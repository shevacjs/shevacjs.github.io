<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>shevacjs home</title>
  <subtitle>自强不息</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://shevacjs.com/"/>
  <updated>2018-05-07T04:53:46.000Z</updated>
  <id>http://shevacjs.com/</id>
  
  <author>
    <name>shevacjs</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>weekly of 20180505</title>
    <link href="http://shevacjs.com/2018/05/07/20180506/"/>
    <id>http://shevacjs.com/2018/05/07/20180506/</id>
    <published>2018-05-07T04:53:45.000Z</published>
    <updated>2018-05-07T04:53:46.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/yanqing01.jpg" alt="延庆"></p>
<h3 id="工具技巧"><a href="#工具技巧" class="headerlink" title="工具技巧"></a>工具技巧</h3><ul>
<li><p><a href="https://zinovyev.net/blog/ssh-client-configuration-tricks" target="_blank" rel="external">SSH client configuration tricks</a> : 关于SSH的使用技巧, 可以对特定机器设定alias, 并且绑定相关配置, 对于常见的VPS可以做这类的优化</p>
</li>
<li><p><a href="https://opensource.com/article/18/4/cpu-utilization-wrong" target="_blank" rel="external">CPU utilization is wrong, says Netflix’s Brendan Gregg</a> : 关于CPU优化的深入讨论, 其实强调的核心理念是，现在CPU和内存的速度越差越大，所以有时候会我们发现CPU idle很低的时候，有可能其并不是在忙着执行指令，而是在等待Memory IO，尤其是高速缓存失效的时候</p>
</li>
<li><p><a href="https://onlinebinarytools.com/" target="_blank" rel="external">online binary tools</a> : 一些online bianry的工具集合, 有兴趣可以关注下。不过个人更喜欢用类似于<a href="https://zeppelin.apache.org/" target="_blank" rel="external">Zeppelin</a>通过此类的平台，来构建自己的工具集</p>
</li>
<li><p><a href="http://blog.pengqiuyuan.com/ji-chu-jie-shao-ji-suo-yin-yuan-li-fen-xi/" target="_blank" rel="external">Elasticsearch－基础介绍及索引原理分析</a> : 对ES的索引和存储架构有比较详细的说明，可以快速了解下</p>
</li>
<li><p><a href="https://github.com/google/randen" target="_blank" rel="external">google/randen: Fast backtracking-resistant random generator</a> : “What if we could default to attack-resistant random generators without excessive CPU cost? We introduce ‘Randen’, a new generator with security guarantees; it outperforms MT19937 and pcg64_c32 in real-world benchmarks. This is made possible by AES hardware acceleration and a large Feistel permutation.”， Google提出的新的随机数生成器，不过对其要解决的问题和解决的方案并不是很了解，先mark</p>
</li>
</ul>
<h3 id="系统设计"><a href="#系统设计" class="headerlink" title="系统设计"></a>系统设计</h3><ul>
<li><p><a href="https://groups.csail.mit.edu/mac/users/gjs/6.945/readings/robust-systems.pdf" target="_blank" rel="external">robust-systems.pdf</a> : mark</p>
</li>
<li><p><a href="https://www.oschina.net/news/95719/google-chrome-will-show-warnings-for-non-logged-ssl-certificates" target="_blank" rel="external">谷歌访问非登记SSL证书的HTTPS网站将全屏警告</a> : “自今天开始，访问尚未在公共证书透明度（CT）日志中登记 SSL 证书的 HTTPS 网站，Chrome 浏览器将会显示全屏警告。这样做使 Chrome 浏览器成为首个部署支持 Certificate Transparency Log 策略的浏览器”, 如果有关注之前介绍的TLS的文章，可以认为<a href="https://www.certificate-transparency.org/" target="_blank" rel="external">Certificate Transparency</a>是解决CT恶意或者无意颁发错误证书的一个有效办法</p>
</li>
<li><p><a href="https://www.ebayinc.com/stories/blogs/tech/elasticsearch-performance-tuning-practice-at-ebay/" target="_blank" rel="external">Elasticsearch Performance Tuning Practice at eBay</a> :  本文是eBay分享的关于ES使用优化的一系列建议，包括<code>优化索引设计</code>, <code>优化检索query</code>，<code>性能评估</code>等多个阶段多个方面的具体实践建议, 也有中文版<a href="http://www.infoq.com/cn/articles/elasticsearch-performance-tuning-practice-at-ebay" target="_blank" rel="external">eBay的Elasticsearch性能调优实践</a></p>
</li>
</ul>
<h3 id="专题topic"><a href="#专题topic" class="headerlink" title="专题topic"></a>专题topic</h3><blockquote>
<p>这两周主要关注WebAssembly，在整理相关的文章~</p>
</blockquote>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ul>
<li><p><a href="https://dendibakh.github.io/blog/2018/04/22/What-optimizations-you-can-expect-from-CPU" target="_blank" rel="external">What optimizations you can expect from CPU?</a> : Mark</p>
</li>
<li><p><a href="http://www.techug.com/post/27-incredibly-useful-things-you-didnt-know-chrome-could-do.html" target="_blank" rel="external">超好用的27个谷歌Chrome浏览器使用技巧</a> : 一些Chrome使用的技巧，可以推荐的包括: <code>Cmd+Shift+T</code>恢复最近关闭的标签, <code>Chrome作为你的文件浏览</code>等</p>
</li>
<li><p><a href="https://mp.weixin.qq.com/s?__biz=MzU1NDA4NjU2MA==&amp;mid=2247489971&amp;idx=1&amp;sn=f9b023413f17576c0e859e1f12c3c5fb&amp;chksm=fbe9a07ccc9e296a24891063cb92c4ecbdee984985f9c9afcc1691748d7ea4c483bd96dc5540#rd" target="_blank" rel="external">苹果、谷歌等大厂的AI面试题被我们搞到手了，你敢来挑战吗？</a> : 有空锻炼下自己也挺好的~</p>
</li>
<li><p><a href="https://mp.weixin.qq.com/s/ZY0S6V3gOMJ9MNomHJCGQw" target="_blank" rel="external">没有真实，区块链不可篡改有毛用</a> : 比较赞同的一个文章，区块链的核心价值是需要记录真是的信息，然后不被篡改；但是前者才是真正的难题，也很难想明白现在的不可篡改的存储机制对现有的业务流程有深层次改善的地方</p>
</li>
<li><p><a href="http://www.techug.com/post/machine-learning-study-list.html" target="_blank" rel="external">牛人的Machine Learning 机器学习笔记目录</a> : ML的学习比较, mark</p>
</li>
<li><p><a href="https://asylo.dev/" target="_blank" rel="external">Asylo</a> : Google发布的可信计算的框架，支持在云端部署含有私密数据的应用；直观而言，这个方面的需求在技术方面实现难度还比较大，先mark，下来深入学习</p>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/yanqing01.jpg&quot; alt=&quot;延庆&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;工具技巧&quot;&gt;&lt;a href=&quot;#工具技巧&quot; class=&quot;headerlink&quot; title=&quot;工具技巧&quot;&gt;&lt;/a&gt;工具技巧&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a 
    
    </summary>
    
    
      <category term="weekly" scheme="http://shevacjs.com/tags/weekly/"/>
    
  </entry>
  
  <entry>
    <title>weekly of 20180429</title>
    <link href="http://shevacjs.com/2018/05/07/20180429/"/>
    <id>http://shevacjs.com/2018/05/07/20180429/</id>
    <published>2018-05-07T04:50:45.000Z</published>
    <updated>2018-05-07T04:55:31.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="工具技巧"><a href="#工具技巧" class="headerlink" title="工具技巧"></a>工具技巧</h3><ul>
<li><p><a href="https://blogs.msdn.microsoft.com/vcblog/2018/04/24/announcing-a-single-c-library-manager-for-linux-macos-and-windows-vcpkg/" target="_blank" rel="external">Announcing a single C++ library manager for Linux, macOS and Windows: Vcpkg</a> : VC提供的跨平台的C++的lib库，还是第一次见到C++库的解决方案，可以关注</p>
</li>
<li><p><a href="https://mp.weixin.qq.com/s?__biz=MzUxMzcxMzE5Ng==&amp;mid=2247488782&amp;idx=1&amp;sn=9a450b5e97410a0f58fb61900fd82055" target="_blank" rel="external">Google Fuchsia微内核Zircon先睹为快</a> : Ziron是Google推出的面向IoT操作系统Fuchsia的内核，是一个微内核系统，文章主要介绍了此内核的体系，其语义和传统的Unix操作系统也有诸多不一样的地方，详细可以看原<a href="https://fuchsia.googlesource.com/docs/+/master/the-book/" target="_blank" rel="external">英文文档</a></p>
</li>
<li><p><a href="http://norvig.com/spell-correct.html" target="_blank" rel="external">How to Write a Spelling Corrector</a> : </p>
</li>
</ul>
<h3 id="系统设计"><a href="#系统设计" class="headerlink" title="系统设计"></a>系统设计</h3><h3 id="专题topic"><a href="#专题topic" class="headerlink" title="专题topic"></a>专题topic</h3><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ul>
<li><p><a href="http://blog.qt.io/blog/2018/04/23/beta-qt-webassembly-technology-preview/" target="_blank" rel="external">Beta for Qt for WebAssembly Technology Preview - Qt Blog</a> : Qt发布了支持编译成WebAssembly的beta版本。如此，以后写UI组件等，并不一定需要Js，C++也行；不过效果上面令人存疑</p>
</li>
<li><p><a href="http://www.ruanyifeng.com/blog/2018/04/weekly-issue-1.html" target="_blank" rel="external">每周分享第 1 期 - 阮一峰的网络日志</a> : 感觉干货不少，可以订阅关注下</p>
</li>
<li><p><a href="http://blog.zulip.org/2018/04/18/zulip-1-8-released/" target="_blank" rel="external">Zulip 1.8: Open source team chat</a> : 类似于<code>Slack</code>的开源方案，mark关注下~</p>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;工具技巧&quot;&gt;&lt;a href=&quot;#工具技巧&quot; class=&quot;headerlink&quot; title=&quot;工具技巧&quot;&gt;&lt;/a&gt;工具技巧&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://blogs.msdn.microsoft.com/vcblog/2018
    
    </summary>
    
    
      <category term="weekly" scheme="http://shevacjs.com/tags/weekly/"/>
    
  </entry>
  
  <entry>
    <title>weekly of 20180422</title>
    <link href="http://shevacjs.com/2018/04/23/20180422/"/>
    <id>http://shevacjs.com/2018/04/23/20180422/</id>
    <published>2018-04-23T03:03:45.000Z</published>
    <updated>2018-04-23T03:09:19.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/football_stadium.jpg" alt="中超现场"></p>
<h3 id="工具技巧"><a href="#工具技巧" class="headerlink" title="工具技巧"></a>工具技巧</h3><ul>
<li><p><a href="https://news.ycombinator.com/item?id=16862925" target="_blank" rel="external">Facebook Container for Firefox</a> : Firefox发布了一个支持自动隔离facebook的扩展, 其实现在的feed机制也一直在窃取各种个人信息，mark后续研究下，在国内互联网，这类的数据是如何传播传递的，同时又如何可以避免~</p>
</li>
<li><p><a href="http://www.graalvm.org/" target="_blank" rel="external">GraalVM</a> : “GraalVM is a universal virtual machine for running applications written in JavaScript, Python, Ruby, R, JVM-based languages like Java, Scala, Kotlin, and LLVM-based languages such as C and C++”, Oracle出品的，意在构建一个统一的VM，看其文档，应该包括对整个编译链的支持(比如支持定制化构建自己的语言)，先mark关注</p>
</li>
<li><p><a href="https://news.ycombinator.com/item?id=16888605" target="_blank" rel="external">FFmpeg 4.0 released</a> : 最新版的FFmpeg好像有不少新的功能</p>
</li>
<li><p><a href="https://news.ycombinator.com/item?id=16889181" target="_blank" rel="external">Mermaid: Markdown-like generation of diagrams and flowcharts from text</a> : 有点类似于<code>Dot</code>语言的规则模式，不过其在生成图片的配色方面更好看一些，不过整体图片的布局还是需要进一步的优化,其也被gitlab所<a href="https://docs.gitlab.com/ee/user/markdown.html#mermaid" target="_blank" rel="external">支持</a></p>
</li>
</ul>
<h3 id="系统设计"><a href="#系统设计" class="headerlink" title="系统设计"></a>系统设计</h3><ul>
<li><p><a href="https://blog.benjojo.co.uk/post/scan-ping-the-internet-hilbert-curve" target="_blank" rel="external">Mapping the whole internet with Hilbert curves</a> : 作者通过对全部IPV4的扫描, 并以可视化的方式(Hilbert曲线)展示全球IP的活跃情况</p>
</li>
<li><p><a href="https://mp.weixin.qq.com/s/mYuEt2jFRcO1rbWEe9qL-g" target="_blank" rel="external">谷歌前员工因建言YouTube被炒鱿鱼，开源揭秘其算法</a> : 推荐算法越来越多影响着我们的生活, 但是其对人的影响却很难量化去描述, 本文讲述了Google前员工对于透明推荐算法运动的推进。个人认为，让用户可以透明的了解自己的推荐策略和算法，或者可以让用户自己去定制这方面的算法，Maybe也是一个不错的产品选择。</p>
</li>
<li><p><a href="https://eng.uber.com/rethinking-gps/" target="_blank" rel="external">Rethinking GPS: Engineering Next-Gen Location at Uber</a> : </p>
</li>
</ul>
<h3 id="专题topic"><a href="#专题topic" class="headerlink" title="专题topic"></a>专题topic</h3><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ul>
<li><p><a href="https://medium.com/@anildash/the-missing-building-blocks-of-the-web-3fa490ae5cbc" target="_blank" rel="external">The Missing Building Blocks of the Web</a> :  现在互联网的一切好像都是理所当然的，比如中心化的服务交付，基于js/css等技术组合的web页面, 作者的这个系列从不忘初心开始, 讨论早期互联网技术的设计偏好，以及研究其在发展历程中间的演变，最后分析以后互联网技术发展的方向，同时可以关注的文章还有<a href="https://www.oreilly.com/ideas/its-time-to-rebuild-the-web" target="_blank" rel="external">It’s time to rebuild the web</a>和<a href="http://anildash.com/2012/12/13/the_web_we_lost/" target="_blank" rel="external">The Web We Lost</a></p>
</li>
<li><p><a href="https://betanalpha.github.io/assets/case_studies/probability_theory.html" target="_blank" rel="external">Probability Theory (For Scientists and Engineers)</a> : mark</p>
</li>
<li><p><a href="https://medium.com/@buckhx/unwinding-uber-s-most-efficient-service-406413c5871d" target="_blank" rel="external">Unwinding Uber’s Most Efficient Service</a> : mark</p>
</li>
<li><p><a href="https://mp.weixin.qq.com/s?__biz=MzU1NDA4NjU2MA==&amp;mid=2247489926&amp;idx=1&amp;sn=e26ee3315236e646a5e6e78bcebfe705" target="_blank" rel="external">机器学习宗师迈克尔·乔丹：AI革命尚未发生</a> : 作者认为，技术变更的本质是『在保证安全的前提下，为人们带来新的资源和能力』，所以我们系统更系统宏观的考虑现实世界的问题，AI(或者文中所说的IA)，会是我们构建更理想目标世界(<code>II</code>(Intelligent Infrastruction))的一个强有力的工具手段，但是不会是全部，而且也很难奢望通过AI等就能自动学习构建更理想的社会。另一方面，从II的视角去考虑问题，可能会更快的触达本质。以自动驾驶为例，我们现在的从IA(AI)的角度，核心的注意力在于让汽车去拥有人的判断力；但是从II的角度，去构建一个更高效的交通体系，其会自动化控制所有汽车，通过大规模的物联网，机器学习算法去做调度控制，可能是一个更好的选择(这段纯属自己臆想)。</p>
</li>
<li><p><a href="https://zhuanlan.zhihu.com/p/35925589" target="_blank" rel="external">InnoDB 存储引擎原理解析</a> : 关于Innodb的介绍，不过是纯PPT版本，有些内容只看图片并不直观</p>
</li>
<li><p><a href="https://weibo.com/1560906700/GcZescpzI" target="_blank" rel="external">关于Pornhub的一些产品细节和道德节操</a> : 挺有意思的一个说明, Maybe只有压力没那么大的一些产品，对于用户体验和产品细节才会如此用心</p>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/football_stadium.jpg&quot; alt=&quot;中超现场&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;工具技巧&quot;&gt;&lt;a href=&quot;#工具技巧&quot; class=&quot;headerlink&quot; title=&quot;工具技巧&quot;&gt;&lt;/a&gt;工具技巧&lt;/h3&gt;&lt;ul&gt;
&lt;
    
    </summary>
    
    
      <category term="weekly" scheme="http://shevacjs.com/tags/weekly/"/>
    
  </entry>
  
  <entry>
    <title>PAC文件</title>
    <link href="http://shevacjs.com/2018/04/21/about_pac/"/>
    <id>http://shevacjs.com/2018/04/21/about_pac/</id>
    <published>2018-04-21T11:18:29.000Z</published>
    <updated>2018-04-21T11:25:48.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p><a href="https://en.wikipedia.org/wiki/Proxy_auto-config" target="_blank" rel="external">PAC文件</a>(Proxy Auto-Config)可以约定浏览器如何去访问一个特定的网站。其应该是最为常见的代理技术之一，以其方便，简洁，灵活性被大部分主流系统(无论是安卓还是IOS)和浏览器所支持。正好最近处理了一个PAC的问题，所以这里具体介绍PAC相关的技术，包括PAC的文件编写和PAC的代理技术。</p>
<h2 id="PAC文件编写"><a href="#PAC文件编写" class="headerlink" title="PAC文件编写"></a>PAC文件编写</h2><p>如上，PAC是一个用来约定浏览器如何访问网站的配置描述。其组织方式如下:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//code demo from: https://en.wikipedia.org/wiki/Proxy_auto-config</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">FindProxyForURL</span>(<span class="params">url, host</span>) </span>&#123;</div><div class="line">	<span class="comment">// our local URLs from the domains below example.com don't need a proxy:</span></div><div class="line">	<span class="keyword">if</span> (shExpMatch(host, <span class="string">"*.example.com"</span>))</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">return</span> <span class="string">"DIRECT"</span>;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// URLs within this network are accessed through</span></div><div class="line">	<span class="comment">// port 8080 on fastproxy.example.com:</span></div><div class="line">	<span class="keyword">if</span> (isInNet(host, <span class="string">"10.0.0.0"</span>, <span class="string">"255.255.248.0"</span>))</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">return</span> <span class="string">"PROXY fastproxy.example.com:8080"</span>;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// All other requests go through port 8080 of proxy.example.com.</span></div><div class="line">	<span class="comment">// should that fail to respond, go directly to the WWW:</span></div><div class="line">	<span class="keyword">return</span> <span class="string">"PROXY proxy.example.com:8080; DIRECT"</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>其核心是暴露一个<code>FindProxyForURL</code>的接口，每次有请求时候触发这个函数的回调，用于判断具体走哪种方式。 具体编写应用时，有如下几点可以注意: </p>
<ul>
<li><p>url/host信息 : 如果请求是<code>https</code>协议，则回调的url里面并不会包含完整路径信息, 也就是说如果原始的url是<code>https://xyz.com/abc</code>回调给<code>FindProxyForURL</code>的参数也只是<code>https://xyz.com</code>, 这就意味着对于https协议，我们做不了url粒度的代理控制。具体可以参考<a href="https://github.com/FelisCatus/SwitchyOmega/issues/845" target="_blank" rel="external">Full URLs for HTTPS are no longer provided to PAC scripts</a></p>
</li>
<li><p>调试问题: PAC的调试和普通js的调试有点不一样，其是浏览器自动触发请求的，所以方法也有些区别。在Chrome环境下，可以去<code>chrome://net-internals/#proxy</code>用于重新加载代理脚本, 同时在<code>chrome://net-internals/#events</code>去追踪日志，详细可以参考<a href="http://artica-proxy.com/how-to-debug-proxy-pac-with-google-chrome/" target="_blank" rel="external">How to debug proxy.pac with Google Chrome</a></p>
</li>
<li><p>代理问题 : 无论是怎么样的代理策略，最终我们函数需要返回的是一个代理服务器, 现在主流的浏览器主要支持如下三种访问方式:</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>指令类型</th>
<th>方式</th>
</tr>
</thead>
<tbody>
<tr>
<td>DIRECT</td>
<td>直接访问</td>
</tr>
<tr>
<td>PROXY name:port</td>
<td>通过走特定地址的http代理访问</td>
</tr>
<tr>
<td>SOCKS name:port</td>
<td>通过走特定地址的socks代理访问</td>
</tr>
</tbody>
</table>
<p>具体实现的时候也可以通过不同协议的组合或者冗余，来提供更高质量的代理服务。</p>
<p>这里我们重点关注<code>PROXY name:port</code>的方式，其提供的是一个HTTP代理访问的能力支持, 我们现在主流有http/https两个访问协议，其又具体如何去实现代理的呢？</p>
<h2 id="HTTP代理"><a href="#HTTP代理" class="headerlink" title="HTTP代理"></a>HTTP代理</h2><p>如上，我们希望通过一个http/https服务来提供对<code>http/https</code>访问的代理。如果是仅仅代理<code>HTTP</code>访问, 其实算比较简单。由于是纯文本，也无需任何鉴权之类的逻辑(TLS)，只有正常转发请求即可，普通的Nginx就能实现该功能，可以参考<a href="http://shevacjs.com/2015/04/25/nginx_https_proxy/">nginx与https:正向代理支持</a>(原文有些地方有错误之处)。但是如何基于http/https的服务做<code>https</code>的代理呢? 因为对服务器的验证等不可能是代理服务器自己实现的，故而需要代理服务器，根本上面支持<code>TLS</code>或者更底层的服务代理。</p>
<p>这里需要用到<a href="https://en.wikipedia.org/wiki/HTTP_tunnel" target="_blank" rel="external">HTTP tunnel</a>技术, 其主要包括两个步骤:</p>
<ol>
<li>协商阶段: 这个时候Client发送一个<code>CONNECT</code>指令，连接代理服务器，同时告诉代理服务器具体要访问的地址, 具体如下: </li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">## Client发送CONNECT指令</div><div class="line">CONNECT example.host.com:22 HTTP/1.1</div><div class="line">Proxy-Authorization: Basic encoded-credentials</div><div class="line"></div><div class="line">## 服务器返回OK，这这次协商完成，允许代理</div><div class="line">HTTP/1.1 200 OK</div></pre></td></tr></table></figure>
<p>如上其实是一个正常标准的HTTP交互流程</p>
<ol>
<li>代理阶段 : 一旦协商OK，代理服务器这个时候有点类似于要转变成<code>TCP代理</code>，只做透明的client和server之间的数据转发</li>
</ol>
<p>可以通过一个<code>wireshark</code>的请求包，来进一步了解给过程: </p>
<p><img src="/images/http_tunnel_demo.png" alt="HTTP tunnel"></p>
<h2 id="HTTP代理实现"><a href="#HTTP代理实现" class="headerlink" title="HTTP代理实现"></a>HTTP代理实现</h2><p>从HTTP代理的协议我们可以知道，如果一个服务器要实现HTTP tunnel代理既要支持HTTP的CONNECT指令，也得支持<code>TLS</code>或者<code>TCP</code>的代理。这个要求对于之前的nginx是很难实现的，所以大部分的解决方案都是基于<code>squid</code>，当然我们知道通过<a href="https://github.com/chobits/ngx_http_proxy_connect_module" target="_blank" rel="external">ngx_http_proxy_connect_module</a>也能实现，但是需要打上patch包，维护成本相对较高。</p>
<p>那有没有可能用更便捷的方式，让Nginx实现HTTP tunnel代理呢？答案是肯定的！</p>
<p>我们知道Nginx已经通过<code>ngx_stream_core_module</code>, <code>ngx_stream_proxy_module</code>等模块这次了TCP/UDP的代理，加上<a href="https://github.com/openresty/stream-lua-nginx-module" target="_blank" rel="external">openresty/stream-lua-nginx-module</a>的支持，我们可以很方便的去实现上面的代理协议。整体思路如下:</p>
<ol>
<li>应用nginx的stream能力，做TCP的透明代理</li>
<li>对于初次建立链接的请求，做一些包体的分析，如果是CONNECT方式，则以HTTP方式返回数据，构建协商协议</li>
<li>协商之后，则以TCP代理方式提供服务即可</li>
</ol>
<p>整体代码配置如下:</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"><span class="section">stream</span> &#123;</div><div class="line">	<span class="attribute">log_format</span> basic <span class="string">'<span class="variable">$remote_addr</span> [<span class="variable">$time_local</span>] '</span></div><div class="line">					 <span class="string">'<span class="variable">$protocol</span> <span class="variable">$status</span> <span class="variable">$bytes_sent</span> <span class="variable">$bytes_received</span> '</span></div><div class="line">					 <span class="string">'<span class="variable">$session_time</span>'</span>;</div><div class="line"></div><div class="line">    <span class="comment">## 需要声明一个变量，注意该指令在stream-lua-nginx-module-0.0.4版本以上才有</span></div><div class="line">    <span class="attribute">lua_add_variable</span> <span class="variable">$py_upstream</span>;</div><div class="line"></div><div class="line">    <span class="section">server</span> &#123;</div><div class="line">        <span class="attribute">listen</span> <span class="number">7070</span>;</div><div class="line"></div><div class="line">		<span class="attribute">access_log</span> logs/stream.log basic;</div><div class="line"></div><div class="line">        <span class="comment">## 指定dns解析代理服务器</span></div><div class="line">        <span class="attribute">resolver</span> <span class="number">8.8.8.8</span>;</div><div class="line"></div><div class="line">        <span class="comment">## preread_by_lua是在每次连接建立(TCP)或者数据包(UDP)过来被触发调用</span></div><div class="line">        <span class="comment">## 代码无太多容错性，仅用于描述功能</span></div><div class="line">        <span class="section">preread_by_lua_block</span> &#123;</div><div class="line">            <span class="attribute">local</span> sock = assert(ngx.req.socket(<span class="literal">true</span>))</div><div class="line">            <span class="comment">## 获取数据</span></div><div class="line">            local data = sock:receive()</div><div class="line">            local len = string.len(data)</div><div class="line">            local connect = string.sub(data,<span class="number">1</span>, <span class="number">7</span>)</div><div class="line"></div><div class="line">            <span class="comment">## ngx.log(ngx.ERR, "data is: ", data)</span></div><div class="line">            <span class="comment">## 判断前缀是不是"CONNECT"</span></div><div class="line">            if connect ~= <span class="string">"CONNECT"</span> then</div><div class="line">                ngx.log(ngx.ERR, <span class="string">"prefix scheme is connect, is: "</span>, connect)</div><div class="line">                ngx.exit()</div><div class="line">            end</div><div class="line"></div><div class="line">            <span class="comment">## 获取要发送的域名端口信息</span></div><div class="line">            local end_start,end_pos = string.find(data,<span class="string">" "</span>, <span class="number">9</span>)</div><div class="line">            local hostname = string.sub(data,<span class="number">9</span>, end_start - <span class="number">1</span>)</div><div class="line">            ngx.log(ngx.ERR, <span class="string">"hostname is: "</span>, hostname)</div><div class="line"></div><div class="line">            <span class="comment">## 回填到py_upstream变量，以便proxy_pass调用</span></div><div class="line">            ngx.var.py_upstream = hostname</div><div class="line"></div><div class="line">            <span class="comment">## 以正常HTTP方式返回，完成协商</span></div><div class="line">            ngx.say(<span class="string">"HTTP/1.1 200 OK\r\n"</span>)</div><div class="line">            ngx.flush()</div><div class="line">            ngx.eof()</div><div class="line">        &#125;</div><div class="line">        <span class="comment">## 正向代理</span></div><div class="line">        proxy_pass <span class="variable">$py_upstream</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>如上，就能完成一个<code>http tunnel</code>协议的功能。</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><p><a href="http://jdebp.eu./FGA/web-browser-auto-proxy-configuration.html" target="_blank" rel="external">Automatic proxy HTTP server configuration in web browsers</a> : 对PAC协议，实现，规则有详细的描述</p>
</li>
<li><p><a href="https://en.wikipedia.org/wiki/HTTP_tunnel" target="_blank" rel="external">HTTP tunnel</a> : 具体介绍<code>HTTP tunnel</code>的机制, 也就是http proxy代理https请求的常规方法</p>
</li>
<li><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/CONNECT" target="_blank" rel="external">MDN HTTP: CONNECT</a> : HTTP CONNECT方法</p>
</li>
<li><p><a href="https://github.com/chobits/ngx_http_proxy_connect_module" target="_blank" rel="external">A forward proxy module for CONNECT request handling</a> : 一个Nginx patch/扩展, 可以支持HTTP tunnel的<code>CONNECT</code>请求， 支持<code>Forward Proxy</code></p>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;headerlink&quot; title=&quot;概述&quot;&gt;&lt;/a&gt;概述&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Proxy_auto-config&quot; target=&quot;_bla
    
    </summary>
    
    
      <category term="nginx, proxy" scheme="http://shevacjs.com/tags/nginx-proxy/"/>
    
  </entry>
  
  <entry>
    <title>weekly of 20180415</title>
    <link href="http://shevacjs.com/2018/04/18/20180415/"/>
    <id>http://shevacjs.com/2018/04/18/20180415/</id>
    <published>2018-04-18T04:26:45.000Z</published>
    <updated>2018-04-18T04:31:25.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/yanqing.jpg" alt="延庆一景"></p>
<h3 id="工具技巧"><a href="#工具技巧" class="headerlink" title="工具技巧"></a>工具技巧</h3><ul>
<li><p><a href="https://ultralig.ht/" target="_blank" rel="external">Lightweight, Pure-GPU HTML Renderer</a> : 一个纯GPU执行的HTML渲染器，对于游戏类的业务场景会有比较好的支持</p>
</li>
<li><p><a href="http://0x80.pl/notesen/2018-04-11-simd-is-sorted.html" target="_blank" rel="external">Is sorted using SIMD instructions</a> : 判断一个数组是否有序的最简单算法，就是遍历数组，依次比较; 但是如果处理器本身支持<code>SIMD</code>之类，会有怎么样的优化算法呢?文章具体说明了如何将上面操作<code>vectorization</code>，以提升判断的速度，结果表明在<code>AVX2</code>的指令集下面性能有<code>100%</code>以上的提升, 对SIMD指令感兴趣的话，可以参看<a href="https://software.intel.com/sites/landingpage/IntrinsicsGuide/" target="_blank" rel="external">Intrinsics Guide</a>这个指令手册</p>
</li>
</ul>
<h3 id="系统设计"><a href="#系统设计" class="headerlink" title="系统设计"></a>系统设计</h3><ul>
<li><p><a href="https://blog.cloudflare.com/neon-is-the-new-black/" target="_blank" rel="external">NEON is the new black: fast JPEG optimization on ARM server</a> : CloudFlare的技术博客，介绍其对<code>libjpg</code>在ARM平台的优化，主要是讲将在Intel下面优化的SIMD指令在ARM系统上面重写, 总结值得思考: “It is evident that the Qualcomm Centriq is a powerful processor, that definitely provides a good bang for a buck. However, years of Intel leadership in the server and desktop space mean that a lot of software is better optimized for Intel processors.”</p>
</li>
<li><p><a href="https://snr.stanford.edu/salsify/" target="_blank" rel="external">Salsify</a> : Salsify是斯坦福大学的一个项目，其核心思路是通过对视频编码速率和网络速率的协同控制，来提升<code>real time video</code>的性能和体验，直接感觉意义一般，但是其性能数据体现”reduced delay (at the 95th percentile) by 4.6×, while also improving SSIM by about 60% (2.1 dB)”，先mark，后续有空关注</p>
</li>
</ul>
<h3 id="专题topic"><a href="#专题topic" class="headerlink" title="专题topic"></a>专题topic</h3><blockquote>
<p>本周关注GPU编程</p>
</blockquote>
<ul>
<li><p><a href="http://courses.cms.caltech.edu/cs179/" target="_blank" rel="external">课程: GPU Programming CS179</a> : 比较综合的介绍GPU的概念基础，以及和CUDA的实践, 可以关注<a href="https://news.ycombinator.com/item?id=11902172" target="_blank" rel="external">Hacer News</a>上面对其评价</p>
</li>
<li><p><a href="https://cn.udacity.com/course/intro-to-parallel-programming--cs344" target="_blank" rel="external">课程: 并行编程入门 by Nvidia</a> : 中文版的课程</p>
</li>
</ul>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ul>
<li><p><a href="https://weibo.com/1705822647/GbThVDxKJ?type=comment" target="_blank" rel="external">关于百度区块链应用的思考</a> : 用区块链进行图片和内容版权保护的问题，作者的存疑和我个人的思考分析一致，mark下关注网友的讨论</p>
</li>
<li><p><a href="https://news.ycombinator.com/item?id=16827817" target="_blank" rel="external">Quantum mechanics used for better random numbers</a> : 量子计算机可以产生真正的随机数，但是评论上面认为，其实现在的不少硬件，比如说<code>Johnson–Nyquist</code>已经具备这类能力了</p>
</li>
<li><p><a href="https://news.ycombinator.com/item?id=16817234" target="_blank" rel="external">Quantum Algorithm Implementations for Beginners</a> : </p>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/yanqing.jpg&quot; alt=&quot;延庆一景&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;工具技巧&quot;&gt;&lt;a href=&quot;#工具技巧&quot; class=&quot;headerlink&quot; title=&quot;工具技巧&quot;&gt;&lt;/a&gt;工具技巧&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a 
    
    </summary>
    
    
      <category term="weekly" scheme="http://shevacjs.com/tags/weekly/"/>
    
  </entry>
  
  <entry>
    <title>weekly of 20180408</title>
    <link href="http://shevacjs.com/2018/04/17/20180408/"/>
    <id>http://shevacjs.com/2018/04/17/20180408/</id>
    <published>2018-04-17T14:21:45.000Z</published>
    <updated>2018-04-17T14:21:57.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="工具技巧"><a href="#工具技巧" class="headerlink" title="工具技巧"></a>工具技巧</h3><ul>
<li><a href="https://blog.cryptographyengineering.com/2018/04/07/hash-based-signatures-an-illustrated-primer/" target="_blank" rel="external">Hash-based Signatures: An illustrated Primer</a> : 文章和作者的blog多深度推荐</li>
</ul>
<h3 id="系统设计"><a href="#系统设计" class="headerlink" title="系统设计"></a>系统设计</h3><ul>
<li><p><a href="https://mp.weixin.qq.com/s?__biz=MzIzOTU0NTQ0MA==&amp;mid=2247487203&amp;idx=1&amp;sn=a1510a4d29a7bdb9cc60d58c13161db9" target="_blank" rel="external">当数据库遇见FPGA：X-DB异构计算如何实现百万级TPS？</a> : 阿里数据库方向的又一个创新，核心问题是, 在基于LSM存储引擎构建的数据库，需要耗费大量的计算量在做<code>SSTable</code>的merge, 这类的<code>compaction</code>计算量大且计算模式相对一致，基于此，其构建了一个传统CPU架构+<code>FPGA</code>的协同计算模式, 对于写密集型的业务场景有着较大效率提升。</p>
</li>
<li><p><a href="https://blog.codingnow.com/2018/04/lua_54_nil_in_table.html" target="_blank" rel="external">Lua 5.4 的改进及 Lua 的版本演进</a> : 先Mark，没有深看，但是非常佩服云风对技术的持续投入和研究~</p>
</li>
</ul>
<h3 id="专题topic"><a href="#专题topic" class="headerlink" title="专题topic"></a>专题topic</h3><blockquote>
<p>本周关注simd</p>
</blockquote>
<ul>
<li><p><a href="https://en.wikipedia.org/wiki/SIMD" target="_blank" rel="external">Wikipedia: SIMD</a> : 对SIMD的概念性介绍, 其是一类并行技术的概称”单指令流多数据流”。在具体应用方面，CPU多以<code>SSE(Intel)</code>或者<code>3D Now!(AMD)</code>等提供支持，而GPU则是本身就拥有类似的能力。</p>
</li>
<li><p><a href="https://news.ycombinator.com/item?id=8533350" target="_blank" rel="external">Introducing SIMD.js</a> : Mozilla发布的<code>SIMD</code>支持的Js Library, 主要是基于CPU的<code>SSE</code>或者<code>NEON</code>提供<code>SIMD</code>能力，希望在<code>games, video and audio manipulation, scientific simulations</code>提升其相关能力。</p>
</li>
<li><p><a href="http://sci.tuomastonteri.fi/programming/sse" target="_blank" rel="external">A practical guide to SSE SIMD with C++</a> : 关于SSE SIMD的实践教程，感觉有点冗长，另外也可以参看<a href="http://www.cs.uu.nl/docs/vakken/magr/2017-2018/files/SIMD%20Tutorial.pdf" target="_blank" rel="external">Practical SIMD Programming(pdf)</a></p>
</li>
</ul>
<blockquote>
<p>关于<a href="https://en.wikipedia.org/wiki/Tor_(anonymity_network" target="_blank" rel="external">TOR</a>)的一些文章</p>
</blockquote>
<ul>
<li><p><a href="https://jordan-wright.com/blog/2015/02/28/how-tor-works-part-one/" target="_blank" rel="external">How Tor Works(Part1/2/3)</a> : 从较为宏观的角度介绍Tor的执行机制和核心设计理念，是理解TOR的比较好的入门文档, 另外作者本身的blog主要关注安全因素相关，有不少文章值得细看</p>
</li>
<li><p><a href="https://www.digitaltrends.com/computing/a-beginners-guide-to-tor-how-to-navigate-through-the-underground-internet/" target="_blank" rel="external">A beginner’s guide to Tor: How to navigate through the underground Internet</a> : 也是一个入门的文章</p>
</li>
<li><p><a href="http://www.cs.umd.edu/class/fall2017/cmsc818O/papers/understanding-tor.pdf" target="_blank" rel="external">Shining Light in Dark Places: Understanding the Tor Network(pdf)</a> : </p>
</li>
<li><p><a href="https://www.freehaven.net/anonbib/cache/draft-tor-design-2004.pdf" target="_blank" rel="external">Tor: The Second-Generation Onion Router(pdf)</a> : 类似于Tor的白皮书，系统性介绍如何设计相关系统，可以深入了解</p>
</li>
<li><p><a href="https://www.torproject.org/docs/onion-services.html.en" target="_blank" rel="external">Tor: Onion Service Protocol</a> : 我们知道Tor不仅能提供匿名访问，也通用支持匿名提供<code>online service</code>; 其核心机制是依赖<a href="https://gitweb.torproject.org/torspec.git/tree/rend-spec.txt" target="_blank" rel="external">rendezvous specification</a>，也就是依赖”约会协商”出一个中转<code>Relay</code>, 再基于此节点双方进行通信</p>
</li>
</ul>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ul>
<li><p><a href="http://redbeardlab.tech/rediSQL/" target="_blank" rel="external">RedisSQL</a> : RediSQL is a Redis module that embeds a fully functional SQLite database. 也就是说，基于<code>SQLit</code>做存储引擎，通过<code>Redis Module</code>做接口扩展，对于<code>partition</code>和<code>replication</code>的问题，应该不大好解决，但文章也没有特多涉及，需要细究。</p>
</li>
<li><p><a href="https://weibo.com/2126427211/GavUQjfLa?type=comment#_rnd1523244261713" target="_blank" rel="external">Deep learning的发展历程</a> : 比较系统，概括性的介绍了，深度学习的发展历程</p>
</li>
<li><p><a href="https://weibo.com/1907380525/Gbg8LzxEI?type=comment#_rnd1523274106579" target="_blank" rel="external">What are the ten most cited sources on Wikipedia? Let’s ask the data</a> : 关于Wikipeida资料引用的有趣分析, 文末付<a href="https://medium.com/freely-sharing-the-sum-of-all-knowledge/what-are-the-ten-most-cited-sources-on-wikipedia-lets-ask-the-data-34071478785a" target="_blank" rel="external">英文链接</a></p>
</li>
<li><p><a href="https://github.com/hongfanqie/discussion/issues/1" target="_blank" rel="external">技术文章翻译规范</a> : mark</p>
</li>
<li><p><a href="https://news.ycombinator.com/item?id=16806976" target="_blank" rel="external">AV1 beats x264 and libvpx-vp9 in practical use case</a> : “Our testing shows AV1 surpasses its stated goal of 30% better compression than VP9, and achieves gains of 50.3%, 46.2% and 34.0%, compared to x264 main profile, x264 high profile and libvpx-vp9, respectively.However, AV1 saw increases in encoding computational complexity compared with x264 main, x264 high and libvpx-vp9 for ABR mode. Encoding run time was 9226.4x, 8139.2x and 667.1x greater, respectively…”</p>
</li>
<li><p><a href="https://docs.microsoft.com/en-us/teamblog/docs-extension" target="_blank" rel="external">Announcing the Docs Markdown Extension for Visual Studio Code</a> : 基于<a href="https://dotnet.github.io/docfx/spec/docfx_flavored_markdown.html?tabs=tabid-2%2Ctabid-b" target="_blank" rel="external">DFX</a>语法的VS CODE扩展，个人感觉其语法赋予了不少新奇的能力，可以关注</p>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;工具技巧&quot;&gt;&lt;a href=&quot;#工具技巧&quot; class=&quot;headerlink&quot; title=&quot;工具技巧&quot;&gt;&lt;/a&gt;工具技巧&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://blog.cryptographyengineering.com/2018/0
    
    </summary>
    
    
      <category term="weekly" scheme="http://shevacjs.com/tags/weekly/"/>
    
  </entry>
  
  <entry>
    <title>weekly of 20180401</title>
    <link href="http://shevacjs.com/2018/04/06/20180401/"/>
    <id>http://shevacjs.com/2018/04/06/20180401/</id>
    <published>2018-04-06T13:15:45.000Z</published>
    <updated>2018-04-06T13:14:55.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="工具技巧"><a href="#工具技巧" class="headerlink" title="工具技巧"></a>工具技巧</h3><ul>
<li><p><a href="https://github.com/Microsoft/vscode-tips-and-tricks" target="_blank" rel="external">VS Code Tips and Tricks</a> : 关于VS的tips，简单看了一些，感觉干货还是很多的。之前个人习惯所有的编辑任务都是依赖于命令行的<code>vim</code></p>
</li>
<li><p><a href="https://www.charlesproxy.com/documentation/ios/" target="_blank" rel="external">Charles for iOS</a> : Charles支持在IOS系统的请求包分析和捕获,体验还是很不错的。</p>
</li>
<li><p><a href="https://bdupras.github.io/filter-tutorial/" target="_blank" rel="external">Probabilistic Filters By Example</a> : 本文简要介绍了<a href="https://brilliant.org/wiki/cuckoo-filter/#cuckoo-vs-bloom-filters" target="_blank" rel="external">Cuckoo Filter</a> 和<a href="https://en.wikipedia.org/wiki/Bloom_filter" target="_blank" rel="external">Blomm Filter</a>各自的特点以及区别, 并具体给出了不用应用场景下面如何选择两者的建议。(PS: 发现网上并没有很多的Cuckoo Filter的入门介绍文章，后续可以补充一个)</p>
</li>
<li><p><a href="https://blog.cloudflare.com/dns-resolver-1-1-1-1/" target="_blank" rel="external">Announcing 1.1.1.1: the fastest, privacy-first consumer DNS service</a> : Cloudflare在4月1号发布了号称速度最快的DNS服务器<code>1.1.1.1</code>, 可以参看<a href="https://blog.cloudflare.com/dns-resolver-1-1-1-1/" target="_blank" rel="external">Introducing DNS Resolver, 1.1.1.1 (not a joke)</a>对其技术细节进行深入了解，包括对DNS查询的隐私保护，速度优化方面的策略，对DNS服务有兴趣的可以深入了解下, 正好也可以关注文章<a href="http://blog.jobbole.com/113809/" target="_blank" rel="external">DNS 解析器性能比较：CloudFlare vs Google vs Quad9</a>, 里面具体对比了几个大型DNS服务商的响应时间，cloudflare的确遥遥领先</p>
</li>
<li><p><a href="https://medium.com/@NetflixTechBlog/netflix-flamescope-a57ca19d47bb" target="_blank" rel="external">Netflix FlameScope</a> : Netflix开放了另外一个关于<code>flame graph</code>的工具，其主要特点是通过热力图的形式，以<code>100ms</code>为粒度，记录不同时刻的时间情况，并支持基于此粒度进行钻取。同时还可以关注二进制数据的可视化方法，<a href="https://github.com/cortesi/scurve" target="_blank" rel="external">lib库</a>和<a href="https://binvis.io/#/" target="_blank" rel="external">demo</a></p>
</li>
</ul>
<h3 id="系统设计"><a href="#系统设计" class="headerlink" title="系统设计"></a>系统设计</h3><ul>
<li><p><a href="https://medium.com/@NetflixTechBlog/performance-under-load-3e6fa9a60581" target="_blank" rel="external">Performance Under Load</a> : Netflix关于如何做过载保护的文章，其实这个topic，个人感觉也研究了一段时间，包括排队论等都做了一些分析。文章的核心思路是复用TCP拥塞控制的算法, 开始以较低流量去尝试，在流量逐渐增大的过程中，通过一些参数指标评估服务是否达到瓶颈，如果是，则流量回退(类似于拥塞窗口减少)($newLimit = currentLimit × gradient + queueSize$)。同时也直接开放了相关的<a href="https://github.com/Netflix/concurrency-limits" target="_blank" rel="external">lib库</a>, 支持Java/Grpc等，可以关注。</p>
</li>
<li><p><a href="https://blog.cloudflare.com/introducing-cloudflare-workers/" target="_blank" rel="external">Introducing Cloudflare Workers: Run JavaScript Service Workers at the Edge</a> :  CloudFlare的<code>Service Worker</code>概述，赋予了业务在Edge Node(类似于CDN)执行代码的能力，后端的同学可以通过这篇文章<a href="https://lzw.me/a/pwa-service-worker.html#1%20%E4%BB%80%E4%B9%88%E6%98%AF%20Service%20Worker" target="_blank" rel="external">Service Worker 应用详解</a>了解浏览器service worker的大概机制；整体而言，个人感觉思路和创新都是有的，不过对于应用场景还需要深入和进一步的思考</p>
</li>
<li><p><a href="https://medium.com/netflix-techblog/using-machine-learning-to-improve-streaming-quality-at-netflix-9651263ef09f" target="_blank" rel="external">Using Machine Learning to Improve Streaming Quality at Netflix</a> : 通过ML的方法，来预估网络的质量和延迟情况，先mark</p>
</li>
</ul>
<h3 id="琐事小记"><a href="#琐事小记" class="headerlink" title="琐事小记"></a>琐事小记</h3><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ul>
<li><p><a href="http://cstaecker.fairfield.edu/~cstaecker/machines/longimeter.html" target="_blank" rel="external">Steinhaus Longimeter</a> : mark，一个测量曲线长度的办法，非常精巧，先mark</p>
</li>
<li><p><a href="https://mp.weixin.qq.com/s/moyoJd1EnNziRPQgHbNXRw" target="_blank" rel="external">从抄书到开源之巅：章亦春的程序人生</a> : 非常敬佩的工程师, 每个成功故事的历程都有所不一样，但是持续努力奋斗是永恒的主题；</p>
</li>
<li><p><a href="https://www.dongqiudi.com/archive/596265.html" target="_blank" rel="external">西甲风云21：铁血军团，马德里竞技</a> : “催人泪下的卡尔德隆，这是我的家。它教会我怎样成长，怎样忍耐，怎样生活，怎样面对困境。不管贫富，我们永远是第一！Forza Atleti!”, 有点跑题的文章，不过写得很好，也mark</p>
</li>
<li><p><a href="https://mp.weixin.qq.com/s?__biz=MzIwMzg1ODcwMw==&amp;mid=2247487637&amp;idx=1&amp;sn=d76a3e92036c0487c6f3e16b6afd3df8" target="_blank" rel="external">聊聊Chaos Engineering的历史、原则和最佳实践</a> : 我的理解<code>Chaos Engineering</code>应该属于SRE的一部分，其采用特殊的方法，去验证系统的容灾能力，评估系统的可用性。随着分布式系统的日趋复杂，这样的需求也会愈加强烈。</p>
</li>
<li><p><a href="https://weibo.com/ttarticle/p/show?id=2309404225376346895947" target="_blank" rel="external">既练轻功也练内功——面对风口的正确姿势</a> : 每个人都会面临各种选择和权衡，如何合适的机会和风口，让自己的职业生涯有进一步提升，是个需要深思的问题, 作者建议的三个原则，学会预测，需找开鱼刀，练轻功之前先修炼好内功, 可以采纳</p>
</li>
<li><p><a href="http://www.quickcode.co/engineer-blogs" target="_blank" rel="external">Engineering Blogs</a> : 一些公司的技术blog的list，感觉可以通过收藏夹或者其他的可以序列话的方式提供。</p>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;工具技巧&quot;&gt;&lt;a href=&quot;#工具技巧&quot; class=&quot;headerlink&quot; title=&quot;工具技巧&quot;&gt;&lt;/a&gt;工具技巧&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/Microsoft/vscode-tips-and
    
    </summary>
    
    
      <category term="weekly" scheme="http://shevacjs.com/tags/weekly/"/>
    
  </entry>
  
  <entry>
    <title>Crypto101读书笔记</title>
    <link href="http://shevacjs.com/2018/03/28/note_about_crypto101/"/>
    <id>http://shevacjs.com/2018/03/28/note_about_crypto101/</id>
    <published>2018-03-28T07:58:45.000Z</published>
    <updated>2018-03-28T08:13:50.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/cryptography.jpg" alt="cryptography"></p>
<blockquote>
<p>最近要把去年的读书笔记补齐~</p>
</blockquote>
<p>电子书<a href="https://www.crypto101.io/" target="_blank" rel="external">Crypto 101</a>是我个人感觉最好的关于密码学的入门笔记; 深入浅出的介绍了整个密码学体系的各类算法，此文为此书的读书笔记</p>
<h2 id="分层体系"><a href="#分层体系" class="headerlink" title="分层体系"></a>分层体系</h2><ul>
<li><p>第一层: 最底层是基础算法原语的实现, 比如: md5, AES, RSA, SHA256等</p>
</li>
<li><p>第二层: 选定参数后，划分为符合密码学标准分类的算法, 几个基本能力:</p>
<ul>
<li>块加密算法</li>
<li>流加密算法</li>
<li>密钥交换算法</li>
<li>公钥加密算法</li>
<li>MAC算法</li>
<li>签名算法</li>
</ul>
</li>
<li><p>第三层: 基于标准分类算法进一步组合而成的半成品，比如说对称传输组件例如<code>aes-128-cbc + hmac-sha256</code>, 认证密钥协商算法<code>rsassa-OAEP + ecdh-secp256r1</code></p>
</li>
<li><p>第四层: 用各种组件拼装而成的各种成品密码学协议/软件, 比如TLS协议等</p>
</li>
</ul>
<p>这里先介绍第一/二层的常见技术和方法，以后再深入分析第四层的业务应用。</p>
<h2 id="标准密码学概述"><a href="#标准密码学概述" class="headerlink" title="标准密码学概述"></a>标准密码学概述</h2><h3 id="Block-ciphers"><a href="#Block-ciphers" class="headerlink" title="Block ciphers"></a>Block ciphers</h3><ul>
<li>定义:</li>
</ul>
<p>A block cipher is an algorithm that allows us to encrypt blocks of a fixed length.  It provides an encryption function E that turns plaintext blocks P into ciphertext blocks C, using a secret key k:</p>
<p>$$ C = E(k, P) \ \ encrpytion $$<br>$$ P = D(k, C) \ \ decryption $$</p>
<p>一般情况下, 明文和密文的长度是一样的，这个是由密钥控制的；</p>
<p>常见放的对称加密算法有: <code>AES</code>(Advanced Encryption Standard) 和 相对比较老的 <code>DES</code>和<code>3DES</code></p>
<p>可以预见块加密算法有两个比较大的问题，具体包括:</p>
<p>1) 块加密算法只能加密固定长度的信息，这个并不能很好应用于现实世界，所以我们需要引入<code>Stream ciphers</code></p>
<p>2) 密钥非常重要，但我们仍会面临着如何在一个不安全的通道上面交互密钥；这个在<code>key exchange protocol</code>里面会介绍其解决方案</p>
<h3 id="Stream-Ciphers"><a href="#Stream-Ciphers" class="headerlink" title="Stream Ciphers"></a>Stream Ciphers</h3><p>还是先看定义，英文如下:</p>
<p>“A stream cipher is a symmetric-key encryption algorithm that encrypts a stream of bits. Ideally, that stream could be as long as we’d like;”</p>
<p>如何实现, 初步的想法就是基于<code>Block Ciphers</code>去实现，将超长的文本切分为固定长度的子串，再分别加密。如何将<code>block ciphers</code>变成<code>stream ciphers</code>是需要精细考量的。比如最简单的ECB模式(Electronic Code Book Mode),  其过程大概如下:</p>
<p><img src="/images/ECB_encryption.svg.png" alt="ECB加密过程"></p>
<p><img src="/images/ECB_decryption.svg.png" alt="ECB解密过程"></p>
<p>但是这个模块是的弱点非常明显, 比如攻击者可以方便地做流量重放，而且密文和原始明文的顺序也是一一对应，容易被攻击。</p>
<p>我们可以考虑其他的几个方式，包括:</p>
<ul>
<li>CBC :  “plaintext blocks are XORed with the previous ciphertext block before being encrypted by the block cipher.”, 同时对于第一个block，我们通过引入初始向量解决(initialization vector, <code>IV</code>) ，其中<code>IV</code>我们要求满足不可预测的要求，所以一般用CBC模式加密的时候还需要双方达成<code>IV</code>的一致这个步骤(后续详解)</li>
</ul>
<p>如下是CBC的加解密过程示意图:</p>
<p><img src="/images/CBC_encryption.svg.png" alt="CBC加密过程"><br><img src="/images/CBC_decryption.svg.png" alt="CBC加密过程"></p>
<p>CBC模式对于初始向量有较大依赖，一旦<code>IV</code>被攻击者预测等，整个加密的安全性也难以得到保障</p>
<p>一些数学形式化的说明如下，可以简单参考</p>
<table>
<thead>
<tr>
<th>Mode</th>
<th>Formulas</th>
<th>Ciphertext</th>
</tr>
</thead>
<tbody>
<tr>
<td>ECB</td>
<td>$Y_i = F(Plaintext_i, Key)$</td>
<td>$Y_i$</td>
</tr>
<tr>
<td>CBC</td>
<td>$Y_i = Plaintext_i XOR \ Ciphertext_{i-1}$</td>
<td>$F(Y,key); Ciphertext_0 = IV$</td>
</tr>
<tr>
<td>PCBC</td>
<td>$Y_i = Plaintext_i XOR \ (Ciphertext_{i-1} XOR \ Plaintext_{i-1})$</td>
<td>$F(Y,key); Ciphertext_0 = IV$</td>
</tr>
</tbody>
</table>
<p>虽然通过<code>CBC</code>等模式，我们可以实现对字节流的加密，但是如何达成密钥的一致性依旧是个问题，所以我们可以看下<code>Key Exchange Protocol</code></p>
<p>(如上的内容和表格都来自于<a href="https://en.wikipedia.org/wiki/Block_cipher_mode_of_operation" target="_blank" rel="external">Wikipedia:Block cipher mode of operation</a>)</p>
<h3 id="Key-exchange"><a href="#Key-exchange" class="headerlink" title="Key exchange"></a>Key exchange</h3><p>目标大概如下: “Key exchange protocols attempt to solve a problem that, at first glance, seems impossible. Alice and Bob, who’ve never met before, have to agree on a secret value.  the channel they use to communicate is insecure: we’re assuming that everything they send across the channel is being eavesdropped on.”</p>
<p>该协议又称<code>Diffie-Hellman</code>算法, 一般有两个实现方式，包括<code>discrete logarithms</code>和<code>elliptic curves</code>，前者相对来说比较好理解，下面详细说明:</p>
<p>离散对数问题基于如下的假设，对于等式:</p>
<p>$$ g^x \equiv y (mod \ p) $$</p>
<p>已知$g,p$, 给定$x$计算$y$很容易，反之则很难; 则我们可以推理如下: </p>
<p>对于消息交换者Alice, Bob 和 窃听者Eve, 他们在传输消息时候有($r_a$和$r_b$是A，B产生的随机数), 则他们初步可以发送如下两个消息:</p>
<p>$$ m_a \equiv g^{(r_a)}(mod\ p)$$ </p>
<p>$$ m_b \equiv g^{(r_b)}(mod\ p)$$ </p>
<p>依照约定，可以产生密钥$s$</p>
<p>$$ s = (g^{(r_a)})^{r_b} (mod\ p)$$</p>
<p>这两个消息，三个人都能看见；但是对Alice而言，他收到了$m_b$我们有:</p>
<p>$$ s = m_b^{r_a} (mod\ p)$$ </p>
<p>对Bob同理；</p>
<p>$$ s = m_a^{r_b} (mod\ p)$$</p>
<p>但是对于只有$m_a,m_b,g,p$的Eve来说是不能计算出$s$的, 即便$m_a, m_b$相乘:</p>
<p>$$ t = m_a * m_b (mod\ p) = g^{r_a + r_b} (mod\ p)$$</p>
<p>如下是从<a href="https://zh.wikipedia.org/wiki/%E8%BF%AA%E8%8F%B2-%E8%B5%AB%E7%88%BE%E6%9B%BC%E5%AF%86%E9%91%B0%E4%BA%A4%E6%8F%9B" target="_blank" rel="external">Wikipedia: 迪菲-赫尔曼密钥交换</a>摘录的示意图: </p>
<p><img src="/images/Diffie-Hellman-demo.svg.png" alt="DH示意图"></p>
<p>这个算法很优雅，但是存在很大的问题，就是中间人攻击。 所以我们需要一些新的基础能力，比如说去验证Alice和Bob的真假, 去保障我们消息的完整性。这个后续再讨论如何去保障。</p>
<h3 id="Public-Key-encryption"><a href="#Public-Key-encryption" class="headerlink" title="Public-Key encryption"></a>Public-Key encryption</h3><p>定义: “People can encrypt information intended for you by using your public key.  the information is then impossible to decipher without your private key.”</p>
<p>这里咬文嚼字一翻，公钥加密算法并不等同与『公钥算法』，后者的应用场景会更多，包括:</p>
<ul>
<li>密钥交换</li>
<li>加密信息</li>
<li>数字签名</li>
</ul>
<p>常见的公钥算法包括: </p>
<ul>
<li>RSA encryption algorithm (PKCS#1)</li>
<li>Various elliptic curve techniques</li>
<li>Diffie–Hellman key exchange protocol</li>
<li>ElGamal</li>
</ul>
<p>现在主流的是RSA和基于椭圆曲线的加密算法。</p>
<p>公钥算法是一个非常大的进步，而且直接感觉，好像所有的密码学问题都可以通过公钥算法解决。但是从现实角度而言,但是仅仅依靠此还不能构建健壮的安全体系，具体的问题包括:</p>
<ul>
<li>作用范围 : 公钥加密算法只能加密一小块的数据</li>
<li>性能问题，这个可以通过混合加密体系解决(公钥+对称加密)</li>
<li>合法性验证问题: 虽然我们可以加密解密任何消息，但是我们并不知道此消息是否来自真的发送者</li>
</ul>
<p>对与最后一个问题，我们需要一个机制去验证消息的合法性(完整性和不可否认性)；常见的做法是在发送消息的时候，增加一些额外信息，这次信息只能是正确的发送者才能构造的；同加密算法一样，验证消息机制同样有对称和非对称体系。如果发送方和接收方用同一个key进行验证，我们一般称为<code>MAC</code>(message authentication codes)；如果用不同的key进行验证，我们则称为<code>signature</code>(数字签名)</p>
<p>在介绍着两者之前，我们先简单介绍他们的基础支持体系 – hash function</p>
<h3 id="Hash-functions"><a href="#Hash-functions" class="headerlink" title="Hash functions"></a>Hash functions</h3><p>Hash函数一般而言是对一段文本的摘要(<code>digest</code>), 用于加密验证的hash function一般有更高的要求, 不再赘述，常见的有如下几个算法: </p>
<ul>
<li>MD5 : 不建议了</li>
<li>SHA-1 : 不建议范畴了</li>
<li>SHA-2 : 现在通用的</li>
<li>SHA-3(Keccak) : 未来的标准</li>
</ul>
<p>可以区别和注意的是<code>SHA2</code>和<code>SHA3</code>,后者的设计理念和前者完全不一致，在硬件上面的性能也更为高效。可以参看<a href="https://en.wikipedia.org/wiki/SHA-3" target="_blank" rel="external">Wikipedia:SHA-3
</a> 对比不同hash function的特性，表格太大，就不直接摘录了。</p>
<h3 id="Message-authentication-code"><a href="#Message-authentication-code" class="headerlink" title="Message authentication code"></a>Message authentication code</h3><p>定义: A Message authentication code (MAC) is a small bit of information that can be used to check the authenticity and the integrity of a message.  else codes are often called ”tags”</p>
<p>也就是说在双方共享$K_m$的情况下，需要达成一种协议，包括接收方能够快速的验证$P$的完整性。本质而言，就是需要一个$F$, 支持如下的模式:</p>
<p>$$ t = F(P, K_m)$$</p>
<p>对于如何将MAC和加密消息组合，有三种不同的方式，包括:</p>
<ul>
<li>Authenticate and encrypt : 分别进行消息验证和加密，类似于 $C = E(K_C, P), t = MAC(K_m, P)$, 同时发送$C$和$t$, SSH采用该方式</li>
<li>Authenticate, then encrypt : 对消息进行验证，其次和明文组合一起后加密发送，如下方式 $t=MAC(K_m,P), C=E(K_C,P||t)$, 只要发送$C$ 就可以了, TLS采用的方式</li>
<li>Encrypt, then authenticate : 先加密, 对加密串算MAC，后一起发送，类似$C=E(K_C,P), t=MAC(K_M,C)$, IPSec采用的方式</li>
</ul>
<p>普遍认为第三种方式是最好的，因为在解密之前就可以验证消息的合法性；</p>
<p>对于<code>MAC</code>的具体实现方式，本质而言，就是需要一个$F$, 给定密钥</p>
<ul>
<li>简单的方式: $t=H(k||m)$, H可以选择一个hash function,  这类组合方式有较大的安全风险(不展开)</li>
<li>HMAC(Hash-based Message Authentication Code<br>) : 其是通过特殊计算的消息验证码，有着更好的安全保障。可以参看其<a href="https://tools.ietf.org/html/rfc2104" target="_blank" rel="external">RFC文档</a></li>
<li>One-times MAC</li>
</ul>
<p>从上面可以看到, 我们现在对于<code>加密</code>和<code>消息验证</code>是当做两个独立的操作，但是在现实生活中，我们很少会独立应用这两个场景，所以现在也提出了AEAD(Authenticated Encryption with Associated Data), 其能支持”验证加密”(authenticated encryption), 将AE的能力以直观的方式提供给业务方。</p>
<h3 id="Signature-algorithms"><a href="#Signature-algorithms" class="headerlink" title="Signature algorithms"></a>Signature algorithms</h3><p>简单定义如下: </p>
<p>A signature algorithm is the public-key equivalent of a message authentication code. It consists of three parts:</p>
<ol>
<li>a key generation algorithm, which can be shared with other public-key algorithms</li>
<li>a signature generation algorithm </li>
<li>a signature verification algorithm</li>
</ol>
<p>很自然而然的我们可以想到<code>RSA</code>可以用于数字签名</p>
<p>下面我们简单分析另外一个数字签名算法<code>DSA</code>, 其分为两个缓解，一个是参数选择，另外一个是生成公钥私钥; 具体如下:</p>
<blockquote>
<p>TODO, 补充</p>
</blockquote>
<h4 id="DSA-Parameter-generation"><a href="#DSA-Parameter-generation" class="headerlink" title="DSA Parameter generation"></a>DSA Parameter generation</h4><h4 id="Key-generation"><a href="#Key-generation" class="headerlink" title="Key generation"></a>Key generation</h4><p>如下是常见的签名算法(<a href="https://en.wikipedia.org/wiki/Digital_signature" target="_blank" rel="external">Wikipedia: Digital signature
</a>)</p>
<ul>
<li>RSA-based signature schemes, such as RSA-PSS</li>
<li>DSA and its elliptic curve variant ECDSA</li>
<li>Edwards-curve Digital Signature Algorithm and its Ed25519 variant.</li>
</ul>
<h2 id="通信过程概述"><a href="#通信过程概述" class="headerlink" title="通信过程概述"></a>通信过程概述</h2><p>通过如上的分析，我们可以认为拥有如下几个能力:</p>
<ul>
<li>对称加密能力 : 给定一个key，将内容进行加密的能力</li>
<li>消息散列 : 通过一个key，可以验证消息的完整性和认证</li>
<li>非对称加密能力: 可以通过公钥密钥进行加解密</li>
<li>数字签名 : 通过非对称密钥验证消息完整性和认证</li>
</ul>
<p>基于此，可以构建上层更复杂丰富的业务场景，比如说<a href="https://en.wikipedia.org/wiki/Transport_Layer_Security" target="_blank" rel="external">TLS</a>; 这个里面的细节比较多，我们在以后的文章详细介绍TLS的协议流程。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/cryptography.jpg&quot; alt=&quot;cryptography&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;最近要把去年的读书笔记补齐~&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;电子书&lt;a href=&quot;https://www.c
    
    </summary>
    
    
      <category term="cryptography" scheme="http://shevacjs.com/tags/cryptography/"/>
    
  </entry>
  
  <entry>
    <title>weekly of 20180318</title>
    <link href="http://shevacjs.com/2018/03/27/20180318/"/>
    <id>http://shevacjs.com/2018/03/27/20180318/</id>
    <published>2018-03-27T02:57:45.000Z</published>
    <updated>2018-03-27T02:57:35.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="工具技巧"><a href="#工具技巧" class="headerlink" title="工具技巧"></a>工具技巧</h3><ul>
<li><p><a href="https://www.nginx.com/blog/nginx-1-13-10-grpc/" target="_blank" rel="external">Announcing gRPC Support in NGINX</a> : Nginx支持Grpc方式的服务代理，和服务转发, 下来写文章重点关注</p>
</li>
<li><p><a href="https://news.ycombinator.com/item?id=16609429" target="_blank" rel="external">RedisGraph: A High Performance In-Memory Graph Database as a Redis Module</a> : 作者基于Redis的扩展机制，写了一个基于<code>openCypher</code>接口，底层存储以<a href="Hexastore">Hexastore</a>为主的图数据库; 之前对于图数据库理解一般, 可以持续关注</p>
</li>
<li><p><a href="https://news.ycombinator.com/item?id=16651426" target="_blank" rel="external">TCP Tracepoints</a> : Linux 4.15版本即将支持<code>TCP tracepoint</code>, 也就是说，后续通过eBPF工具，我们可以非常方便的探测<code>tcp socket</code>的变化情况，对于我们分析网络拥塞，tcp协议细节等都有较大帮助</p>
</li>
<li><p><a href="https://news.ycombinator.com/item?id=16666057" target="_blank" rel="external">TLS 1.3 approved</a> : TLS 1.3的规范正式确定, 链接里面主要讨论了<code>0-RTT</code>情况下潜在的攻击和风险</p>
</li>
</ul>
<h3 id="系统设计"><a href="#系统设计" class="headerlink" title="系统设计"></a>系统设计</h3><ul>
<li><p><a href="https://webkit.org/blog/8146/protecting-against-hsts-abuse/" target="_blank" rel="external">Protecting Against HSTS Abuse</a> : 本文介绍了<code>HSTS</code>的另外一个缺点, 除了传统的设置<code>HSTS</code>不合理，可能导致源站不能访问之外。文章指出: 每为一个域名设置一个HSTS, 其实就相当于给这个域名种下永久cookie。基于次, 我们可以通过N个不同的域名(比如a/b/c/d/e)，并且以类似于0/1组合的方式设置HSTS, 这样的话，我们就可以唯一标识一个具体的用户。基于次，在用户信息收集，广告追踪等方面，都可以发挥一定效果。<code>webkit</code>同时也给出了他们的解决方案，比如控制相同域名请求等, 感觉治标不治本。其实进一步，可以分析和感觉，网络攻击的自由和灵活性。</p>
</li>
<li><p><a href="https://dendibakh.github.io/blog/2018/03/21/port-contention" target="_blank" rel="external">Understanding CPU port contention.</a> : mark，作者是做编译器设计的，blog里面有不少文章介绍<code>performance optimizations and analysis in C/C++</code></p>
</li>
</ul>
<h3 id="琐事小记"><a href="#琐事小记" class="headerlink" title="琐事小记"></a>琐事小记</h3><ul>
<li><a href="https://stackoverflow.com/questions/19413494/does-grep-work-differently-on-osx" target="_blank" rel="external">Does grep work differently on OSX</a> : 大家知道MacOS是基于FreeBSD的，所以其内置的<code>grep</code>命令，也是不支持<code>Perl regex</code>语法，一个解决方案是用<code>homebrew</code>去安装, 会生成<code>ggrep</code>的新的支持GNU Grep规则的命令</li>
</ul>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ul>
<li><p><a href="http://codebay.cn/post/8161.html" target="_blank" rel="external">推荐10款流行的密码破解工具</a> : 关注下, 后续找地方实践</p>
</li>
<li><p><a href="http://www.ifanr.com/553590" target="_blank" rel="external">霍金用的那套语音合成软件，现在你也可以尝鲜了</a> : </p>
</li>
<li><p><a href="http://photo.weibo.com/1963193953/wbphotos/large/mid/4219964099264239/pid/7503f661gy1fpk97cer8tj21ay2an1ky" target="_blank" rel="external">信息安全书单推荐</a> : 可以重点关注<code>安全技术</code>分类下面的那些书，虽然感觉看了一半，但是缺乏实践，所得一般</p>
</li>
<li><p><a href="https://aws.amazon.com/cn/public-datasets/" target="_blank" rel="external">AWS 公用数据集</a> : 有兴趣的可以关注下, 建议可以关注<code>Amazon Bin Image Dataset</code>, <code>GDELT on AWS</code>(Global Database of Events, Language and Tone)等</p>
</li>
<li><p><a href="https://vincent.bernat.im/en/blog/2014-tcp-time-wait-state-linux" target="_blank" rel="external">Coping with the TCP TIME-WAIT state on busy Linux servers</a> : 14年的一篇老文章，今天才看到，个人感觉是对Linux <code>TIME_WAIT</code>等问题和解决方案介绍的比较系统的文章。简而言之，<code>TIME_WAIT</code>状态, 一则可以避免网络中丢失包的错误ACK，同时也能解决<code>FIN-&gt;ACK</code>时ACK丢失的问题。但是正常情况下, <code>TIME_WAIT</code>状态要保留2MSL(差不多60s), 这个对于固定的四元组(src ip, src port ,dest ip, dest port)来说, port资源会不足，从而导致性能上面会有影响。而一旦使用<code>tcp_tw_recycle</code> flag，就会存在较大的副作用, 比较建议的是<code>tcp_tw_reuse</code>, 但是其要求开启tcp timestamp flag, 在NAT网络下兼容性较差。同时也推荐下作者的blog，有不少非常靠谱的文章。</p>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;工具技巧&quot;&gt;&lt;a href=&quot;#工具技巧&quot; class=&quot;headerlink&quot; title=&quot;工具技巧&quot;&gt;&lt;/a&gt;工具技巧&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://www.nginx.com/blog/nginx-1-13-10-grp
    
    </summary>
    
    
      <category term="weekly" scheme="http://shevacjs.com/tags/weekly/"/>
    
  </entry>
  
  <entry>
    <title>weekly of 20180311</title>
    <link href="http://shevacjs.com/2018/03/23/20180311/"/>
    <id>http://shevacjs.com/2018/03/23/20180311/</id>
    <published>2018-03-23T03:03:45.000Z</published>
    <updated>2018-03-23T03:03:09.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="工具技巧"><a href="#工具技巧" class="headerlink" title="工具技巧"></a>工具技巧</h3><ul>
<li><p><a href="http://cs.boisestate.edu/~alark/cs354/lectures/ieee754.pdf" target="_blank" rel="external">IEEE 754 Floating Point Representation</a> : 本文非常精炼的介绍了<a href="https://en.wikipedia.org/wiki/IEEE_754" target="_blank" rel="external">IEEE 754</a>浮点数的标准规范, 对于<code>IEEE 754</code>想有进一步了解，可以参考<a href="https://coolshell.cn/articles/11235.html" target="_blank" rel="external">一个浮点数跨平台产生的问题</a>, <a href="http://www.ruanyifeng.com/blog/2010/06/ieee_floating-point_representation.html" target="_blank" rel="external">浮点数的二进制表示</a>, 以及推荐的可视化工具<a href="https://www.h-schmidt.net/FloatConverter/IEEE754.html" target="_blank" rel="external">Floating Point Converter</a>, <a href="https://en.wikipedia.org/wiki/File:IEEE754.png" target="_blank" rel="external">File:IEEE754 精度图说明</a>, 新出的<a href="https://bellard.org/libbf/" target="_blank" rel="external">LibBF Library</a></p>
</li>
<li><p><a href="https://liudanking.com/network/tls1-3-quic-%E6%98%AF%E6%80%8E%E6%A0%B7%E5%81%9A%E5%88%B0-0-rtt-%E7%9A%84/" target="_blank" rel="external">TLS1.3/QUIC 是怎样做到 0-RTT 的</a> ： 对于常见的协议TLS1.2/TLS1.3/QUIC/HTTP 2等初始化数据交互的所需RTT，有详细的分析和介绍, 作者blog的文章和排版都很好看，也值得关注</p>
</li>
</ul>
<h3 id="系统设计"><a href="#系统设计" class="headerlink" title="系统设计"></a>系统设计</h3><ul>
<li><p><a href="https://weibo.com/ttarticle/p/show?id=2309404214118084135438" target="_blank" rel="external">以太坊 Vitalik Buterin：“去中文化”的含义</a> : 三把衡量“去中心化”程度的尺子，三个独立的判断标准：架构层、政治层、逻辑层。其可以保证容错性、抗攻击性、抗勾结性。对”中心化”有深刻的理解和说明</p>
</li>
<li><p><a href="https://mp.weixin.qq.com/s/LVmSFtU_UEDIRS8OLgM0DQ" target="_blank" rel="external">除了虚拟货币，区块链到底能用在哪些领域和场景下？</a> : 抛砖引玉，个觉得写的内容还是有点浅，对于区块链如何真正应用，和业务结合，形成业务场景说的不够清楚, 可以参考<a href="http://tech.sina.com.cn/i/2018-01-30/doc-ifyqyuhy7705954.shtml" target="_blank" rel="external">高盛区块链79页完整报告：从理论到实践</a></p>
</li>
<li><p><a href="https://www.qubole.com/blog/advantage-decoupling/" target="_blank" rel="external">The Cloud Advantage: Decoupling Storage and Compute</a> : 传统的基于Hadoop模型，将系统的能力核心拆分为计算和存储，但是现在的计算机架构将这两个耦合在一起, 文章认为在系统设计和架构方面，都需要进一步将「计算」和『存储』能力解耦，这样能提供更大的灵活性和系统性能</p>
</li>
<li><p><a href="https://code.facebook.com/posts/286893341840510/under-the-hood-suicide-prevention-tools-powered-by-ai/" target="_blank" rel="external">Under the hood: Suicide prevention tools powered by AI</a> : Facebook的又一个AI场景应用，通过对博文内容以及相关场景的识别，判读一个人是否有自杀倾向，并给予帮助。虽然是一个很小的点，但是特别有人文关怀信息, mark</p>
</li>
</ul>
<h3 id="琐事小记"><a href="#琐事小记" class="headerlink" title="琐事小记"></a>琐事小记</h3><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ul>
<li><p><a href="https://news.ycombinator.com/item?id=16535358" target="_blank" rel="external">Convert screenshots of equations to LaTeX</a> : 将数学公司转换成<code>LaTex</code>公式；属于个人觉得非常有用的一个功能，希望某天有空自己去实现一个简单版本的;</p>
</li>
<li><p><a href="http://netsmell.com/post/how-elon-musk-learns-faster-and-better-than-everyone-else.html" target="_blank" rel="external">马斯克：如何做到常人阅读量的60倍？</a> : </p>
</li>
</ul>
<ul>
<li><p><a href="https://mp.weixin.qq.com/s/2Rk7bhRb8cPhGHbYzdtt3w" target="_blank" rel="external">读懂这台Google量子计算机，你才明白它的意义远超“量子霸权”</a> : 本文对量子计算机有深入浅出的介绍，一个关键点说明就是”学界普遍认为当量子计算机的量子比特超过 50，量子优势就实现”</p>
</li>
<li><p><a href="https://weibo.com/1560906700/G6JupkTq7?type=comment" target="_blank" rel="external">论P2P的这几年发展</a> : 关于P2P网络这几年的发展，中心化的趋势而是越来越明显, </p>
</li>
<li><p><a href="https://github.com/alevchuk/vim-clutch" target="_blank" rel="external">vim-clutch: A hardware pedal for improved text editing in Vim</a> : VIM离合器类似于汽车的脚踏板, 一旦踩下，会出发vim进入插入模式, 继续踩下则是退出编辑, 感觉这样编码起来非常像一个缝纫机</p>
</li>
<li><p><a href="https://snips-nlu.readthedocs.io" target="_blank" rel="external">Snips: Python library to extract meaning from text</a> : Snips NLU (Natural Language Understanding) is a Python library that allows to parse sentences written in natural language and extracts structured information. </p>
</li>
<li><p><a href="https://mp.weixin.qq.com/s/Hjl8pRlVKkahxsWwhUXAmA" target="_blank" rel="external">开源社区，终于找到了公平的商业模式</a> : 文章的一些前后逻辑并不完全赞同, 但是几个最后关于区块链的应用说的很清楚, 可以关注，包括<code>IPFS</code>的<code>FileCoin</code>, <code>Steemit</code>, <code>Aptoide</code></p>
</li>
<li><p><a href="https://mp.weixin.qq.com/s?__biz=MzU1NDA4NjU2MA==&amp;mid=2247489065&amp;idx=1&amp;sn=cd6f7f0abd7c52faf33ddabf3429480e" target="_blank" rel="external">JeffDean又用深度学习搞事情：这次要颠覆整个计算机系统结构设计</a> : 通过引入ML的技术来提升内存分支预测的准确率，进一步提升整体计算机的性能，个人可能认识有点肤浅，但是整体觉得方案有点重</p>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;工具技巧&quot;&gt;&lt;a href=&quot;#工具技巧&quot; class=&quot;headerlink&quot; title=&quot;工具技巧&quot;&gt;&lt;/a&gt;工具技巧&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://cs.boisestate.edu/~alark/cs354/lectur
    
    </summary>
    
    
      <category term="weekly" scheme="http://shevacjs.com/tags/weekly/"/>
    
  </entry>
  
  <entry>
    <title>nginx 1.13.10 版本说明</title>
    <link href="http://shevacjs.com/2018/03/23/nginx_1_13_10/"/>
    <id>http://shevacjs.com/2018/03/23/nginx_1_13_10/</id>
    <published>2018-03-23T03:02:29.000Z</published>
    <updated>2018-03-23T03:04:11.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Feature-List"><a href="#Feature-List" class="headerlink" title="Feature List"></a>Feature List</h2><blockquote>
<p>对SSI模块增强，支持set指令，允许插入任何变量</p>
</blockquote>
<ul>
<li>Feature: the “set” parameter of the “include” SSI directive now allows writing arbitrary responses to a variable; the “subrequest_output_buffer_size” directive defines maximum responsesize.</li>
</ul>
<blockquote>
<p>通过 CLOCK_MONOTONIC方式获取时间, 避免时间回转</p>
</blockquote>
<ul>
<li>Feature: now nginx uses clock_gettime( CLOCK_MONOTONIC ) if available, to avoid timeouts being incorrectly triggered on system time changes.</li>
</ul>
<blockquote>
<p>支持日志输出时不做字符转义</p>
</blockquote>
<ul>
<li>Feature: the “escape=none” parameter of the “log_format” directive.</li>
</ul>
<blockquote>
<p>支持打印<code>ALPN</code>变量情况</p>
</blockquote>
<ul>
<li>Feature: the $ssl_preread_alpn_protocols variable in the ngx_stream_ssl_preread_module.</li>
</ul>
<blockquote>
<p>引入gRpc支持</p>
</blockquote>
<ul>
<li>Feature: the ngx_http_grpc_module.</li>
</ul>
<h2 id="快速说明"><a href="#快速说明" class="headerlink" title="快速说明"></a>快速说明</h2><ul>
<li>CLOCK_MONOTONIC方式获取时间 : 正常系统提供两个类型的时间<ul>
<li>time-of-day : 俗称墙上时间，但是墙上时间会通过类似于<code>NTP</code>的协议同步时钟，这个有可能导致时间回退，</li>
<li>CLOCK_MONOTONIC时间 : 理论上对和time-of-day一致，其主要特点是, 基本同步时钟后发现自己时间过快，也不会回退，而是按照一定的算法自己缓慢增加，慢慢保持一致, 也就是能保障这个时间总是<code>单调</code>(MONOTONIC)的</li>
<li>这个问题是分布式系统经常会碰到的，可以深入了解</li>
</ul>
</li>
</ul>
<ul>
<li>“escape=none”支持:<ul>
<li>简单来说, 之前nginx默认对输入的日志变量会进行转义，转义的字符主要是<code>Nginx</code>认为不可见的那部分, 这部分代码实现很精巧，如下:</li>
</ul>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="function"><span class="keyword">static</span> uintptr_t</span></div><div class="line"><span class="title">ngx_http_log_escape</span><span class="params">(u_char *dst, u_char *src, <span class="keyword">size_t</span> size)</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">ngx_uint_t</span>      n;</div><div class="line">    <span class="keyword">static</span> u_char   hex[] = <span class="string">"0123456789ABCDEF"</span>;</div><div class="line"></div><div class="line">    <span class="comment">//建立`escape`的bitmask数组, 一个有 32 * 8 = 256个bit</span></div><div class="line">    <span class="comment">//如果对于bit被mask为1，表明需要转义</span></div><div class="line">    <span class="keyword">static</span> <span class="keyword">uint32_t</span>   escape[] = &#123;</div><div class="line">        <span class="number">0xffffffff</span>, <span class="comment">/* 1111 1111 1111 1111  1111 1111 1111 1111 */</span></div><div class="line"></div><div class="line">                    <span class="comment">/* ?&gt;=&lt; ;:98 7654 3210  /.-, +*)( '&amp;%$ #"!  */</span></div><div class="line">        <span class="number">0x00000004</span>, <span class="comment">/* 0000 0000 0000 0000  0000 0000 0000 0100 */</span></div><div class="line"></div><div class="line">                    <span class="comment">/* _^]\ [ZYX WVUT SRQP  ONML KJIH GFED CBA@ */</span></div><div class="line">        <span class="number">0x10000000</span>, <span class="comment">/* 0001 0000 0000 0000  0000 0000 0000 0000 */</span></div><div class="line"></div><div class="line">                    <span class="comment">/*  ~&#125;| &#123;zyx wvut srqp  onml kjih gfed cba` */</span></div><div class="line">        <span class="number">0x80000000</span>, <span class="comment">/* 1000 0000 0000 0000  0000 0000 0000 0000 */</span></div><div class="line"></div><div class="line">        <span class="number">0xffffffff</span>, <span class="comment">/* 1111 1111 1111 1111  1111 1111 1111 1111 */</span></div><div class="line">        <span class="number">0xffffffff</span>, <span class="comment">/* 1111 1111 1111 1111  1111 1111 1111 1111 */</span></div><div class="line">        <span class="number">0xffffffff</span>, <span class="comment">/* 1111 1111 1111 1111  1111 1111 1111 1111 */</span></div><div class="line">        <span class="number">0xffffffff</span>, <span class="comment">/* 1111 1111 1111 1111  1111 1111 1111 1111 */</span></div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    <span class="keyword">while</span> (size) &#123;</div><div class="line">        <span class="comment">// 判断其mask位是否为1</span></div><div class="line">        <span class="comment">// *src &gt;&gt; 5 为去其高3位，用于获取数组的便宜量</span></div><div class="line">        <span class="comment">// 1U &lt;&lt; (*src &amp; 0x0f) 为获取具体在数据bit mask的位置</span></div><div class="line">        <span class="keyword">if</span> (escape[*src &gt;&gt; <span class="number">5</span>] &amp; (<span class="number">1U</span> &lt;&lt; (*src &amp; <span class="number">0x1f</span>))) &#123;</div><div class="line">            *dst++ = <span class="string">'\\'</span>;</div><div class="line">            *dst++ = <span class="string">'x'</span>;</div><div class="line">            *dst++ = hex[*src &gt;&gt; <span class="number">4</span>];</div><div class="line">            *dst++ = hex[*src &amp; <span class="number">0xf</span>];</div><div class="line">            src++;</div><div class="line"></div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            *dst++ = *src++;</div><div class="line">        &#125;</div><div class="line">        size--;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> (<span class="keyword">uintptr_t</span>) dst;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>ssl_preread_alpn_protocols变量 :<ul>
<li>这里面大家可以关注<code>ALPN</code>协议，他和<code>NPN</code>都是用于在TLS交互的时候进行协议的协商, 可以关注之前的文章<a href="https://imququ.com/post/enable-alpn-asap.html" target="_blank" rel="external">为什么我们应该尽快支持 ALPN？</a><br>，大概区别如下: <ul>
<li>NPN 是服务端发送所支持的 HTTP 协议列表，由客户端选择；而 ALPN 是客户端发送所支持的 HTTP 协议列表，由服务端选择；</li>
<li>NPN 的协商结果是在 Change Cipher Spec 之后加密发送给服务端；而 ALPN 的协商结果是通过 Server Hello 明文发给客户端；</li>
</ul>
</li>
<li>可以总结为ALPN是趋势，也是未来的标准，但是短期内各方厂商的支持情况并不理想</li>
</ul>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Feature-List&quot;&gt;&lt;a href=&quot;#Feature-List&quot; class=&quot;headerlink&quot; title=&quot;Feature List&quot;&gt;&lt;/a&gt;Feature List&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;对SSI模块增强，支持set指令，
    
    </summary>
    
    
      <category term="nginx" scheme="http://shevacjs.com/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>weekly of 20180304</title>
    <link href="http://shevacjs.com/2018/03/06/20180304/"/>
    <id>http://shevacjs.com/2018/03/06/20180304/</id>
    <published>2018-03-06T04:28:45.000Z</published>
    <updated>2018-03-06T04:28:10.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="工具技巧"><a href="#工具技巧" class="headerlink" title="工具技巧"></a>工具技巧</h3><ul>
<li><p><a href="https://developers.googleblog.com/2018/02/announcing-flutter-beta-1.html" target="_blank" rel="external">Announcing Flutter beta 1: Build beautiful native apps</a> :  Flutter is Google’s new mobile UI framework that helps developers craft high-quality native interfaces for both iOS and Android, 其采用<code>Dart</code>语言, 有兴趣的可以去进一步了解</p>
</li>
<li><p><a href="https://github.com/pornin/CTTK" target="_blank" rel="external">CTTK: Constant-Time Toolkit</a> : A collection of constant-time implementations of primitive operations that may help in writing constant-time code, including non-cryptographic constant-time code</p>
</li>
<li><p><a href="https://blog.cloudflare.com/memcrashed-major-amplification-attacks-from-port-11211/" target="_blank" rel="external">Memcrashed - Major amplification attacks from UDP port 11211</a> : 基于Memcached的放大攻击, 是本周Github DDOS攻击的主要恶意流量</p>
</li>
</ul>
<h3 id="系统设计"><a href="#系统设计" class="headerlink" title="系统设计"></a>系统设计</h3><ul>
<li><p><a href="https://textslashplain.com/2018/02/14/understanding-the-limitations-of-https/" target="_blank" rel="external">Understanding the Limitations of HTTPS</a> : HTTPS协议不是银弹，本文系统化的介绍HTTPS协议的一些弊端，包括<code>Privacy Limitations</code>, <code>Real-world Implementation Limitations</code>等，可以加深对整个https协议和网络栈的理解</p>
</li>
<li><p><a href="https://developers.redhat.com/blog/2018/02/22/container-terminology-practical-introduction/#h.dqlu6589o789" target="_blank" rel="external">A Practical Introduction to Container Terminology</a> : 关于容器化技术的概述性介绍，值得收藏</p>
</li>
<li><p><a href="http://www.ruanyifeng.com/blog/2018/03/http2_server_push.html" target="_blank" rel="external">HTTP/2 服务器推送（Server Push）教程</a> : 一个入门的HTTP2推送介绍, 可以手动试验下</p>
</li>
<li><p><a href="http://www.techug.com/post/zero-knowledge-and-blockchains.html" target="_blank" rel="external">白话区块链加密货币中的零知识证明（Zero-Knowledge Proof）</a> : 零知识证明的介绍, 。零知识证明的本质就是在不揭晓我所知道或拥有的某样东西的前提下，向别人证明我有很大几率（这点很重要，零知识证明说到底是一个概率上的证明）确实知道或拥有这个东西。其已经应用在ZCASH等区块链场景下, 可以进一步了解的文章包括<a href="https://www.leiphone.com/news/201712/ACn6T08O3cyhu8DN.html" target="_blank" rel="external">详解零知识证明的四大基础技术，如何与以太坊发生反应</a>, <a href="https://zh.wikipedia.org/wiki/%E4%BA%A4%E4%BA%92%E5%BC%8F%E8%AF%81%E6%98%8E%E7%B3%BB%E7%BB%9F" target="_blank" rel="external">交互式证明系统</a></p>
</li>
</ul>
<h3 id="琐事小记"><a href="#琐事小记" class="headerlink" title="琐事小记"></a>琐事小记</h3><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ul>
<li><p><a href="https://azure.microsoft.com/en-us/services/cosmos-db/?v=17.45b" target="_blank" rel="external">Azure Cosmos DB</a> : A database for extremely low latency and massively scalable applications anywhere in the world, with native support for NoSQL; 微软新出的之前多种Nosql接口的全球数据库</p>
</li>
<li><p><a href="https://github.com/yujiosaka/headless-chrome-crawler" target="_blank" rel="external">headless-chrome-crawler</a> : Distributed crawler powered by Headless Chrome</p>
</li>
<li><p><a href="https://blog.riseml.com/benchmarking-googles-new-tpuv2-121c03b71384" target="_blank" rel="external">Benchmarking Google’s new TPUv2</a> : TPUs compare very well, both, performance-wise and economically, to the latest generations of GPUs.</p>
</li>
<li><p><a href="https://news.ycombinator.com/item?id=16473482" target="_blank" rel="external">101 NumPy Exercises for Data Analysis (Python)</a> : 可以针对性的提高你对<code>Numpy</code>这个库的掌握程度, 其他可以推荐的包括<a href="https://github.com/ajcr/100-pandas-puzzles" target="_blank" rel="external">pandas</a></p>
</li>
</ul>
<ul>
<li>mark下个人感觉不错的关于区块链的文章/资料(现在是信息过剩) :<ul>
<li><a href="https://36kr.com/p/5075268.html" target="_blank" rel="external">比特币从“不了解”到“被误解”——详解区块链技术</a> : 很好的一个入门介绍, 可以先阅读这篇文章</li>
<li><a href="http://ibloodline.com/articles/2018/01/22/mechanics.html" target="_blank" rel="external">Bloodline’s Blog</a> : 比较深入/细节的介绍比特币/区块链的相关技术实现</li>
<li><a href="https://www.jianshu.com/p/8ea9a9a21f1f" target="_blank" rel="external">谈谈自己对比特币脚本的理解</a> : 侧重介绍比特币的脚本机制和实现</li>
<li><a href="https://yeasy.gitbooks.io/blockchain_guide/content/" target="_blank" rel="external">区块链技术指南</a> : 内容不是很对自己胃口，但是对于一些基本概念有比较详细介绍</li>
<li><a href="http://www.aquagemini.com/bitcoin-difficulty-adjust/" target="_blank" rel="external">深入理解比特币系列（25）: 难度系数及调整周期</a> : 对于一些针对性的问题进行讨论</li>
<li><a href="https://www.coursera.org/learn/cryptocurrency" target="_blank" rel="external">课程: Bitcoin and Cryptocurrency Technologies</a></li>
<li><a href="https://github.com/chaozh/awesome-blockchain" target="_blank" rel="external">awesome-blockchain</a> : 收集所有区块链(BlockChain)技术开发相关资料，包括Fabric和Ethereum开发资料</li>
</ul>
</li>
</ul>
<ul>
<li><p><a href="https://www.miaopai.com/show/ZqUFOkk1NeWXcgL12vzhIrkX~uh72G4E77S8pw__.htm" target="_blank" rel="external">The clearest explanation of Paxos I’ve seen so far</a> : 先收藏mark, 周末review一遍</p>
</li>
<li><p><a href="https://developers.google.cn/machine-learning/crash-course/" target="_blank" rel="external">Google: 机器学习速成课程</a> : Google 制作的节奏紧凑、内容实用的机器学习简介课程</p>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;工具技巧&quot;&gt;&lt;a href=&quot;#工具技巧&quot; class=&quot;headerlink&quot; title=&quot;工具技巧&quot;&gt;&lt;/a&gt;工具技巧&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://developers.googleblog.com/2018/02/an
    
    </summary>
    
    
      <category term="weekly" scheme="http://shevacjs.com/tags/weekly/"/>
    
  </entry>
  
  <entry>
    <title>weekly of 20180225</title>
    <link href="http://shevacjs.com/2018/03/06/20180225/"/>
    <id>http://shevacjs.com/2018/03/06/20180225/</id>
    <published>2018-03-06T04:27:45.000Z</published>
    <updated>2018-03-06T04:27:10.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="工具技巧"><a href="#工具技巧" class="headerlink" title="工具技巧"></a>工具技巧</h3><ul>
<li><p><a href="https://instantdomainsearch.com/" target="_blank" rel="external">Use streaming JSON to speed up your website</a> : 作者提出了，通过http的chunk机制以及Json的<a href="https://github.com/eBay/jsonpipe" target="_blank" rel="external">jsonpipe library</a>来断点, 分片传输结果数据, 可以参考下</p>
</li>
<li><p><a href="https://mp.weixin.qq.com/s?__biz=MzIwMzg1ODcwMw==&amp;mid=2247487440&amp;idx=1&amp;sn=230462b054753c6d0a0a155f82ed9993&amp;chksm=96c9b9b0a1be30a624890e1f529058a9ca5b6206bfc9179ecd05843cc78b563599ade9967758#rd" target="_blank" rel="external">LLVM：Swift、Rust等语言背后那个默默付出的女人</a> : 有点标题党，不错这篇文章对LLVM的功能，应用场景，以及不足之处都有简单的介绍，可以了解LLVM的优缺点</p>
</li>
<li><p><a href="http://nginx.org/en/CHANGES" target="_blank" rel="external">Nginx: 1.13.9</a> : Nginx的最新版本, 支持<code>HTTP/2 server push support; the &quot;http2_push&quot; and &quot;http2_push_preload&quot; directives.</code>, 详细的用法和机制可以参考Nginx官方博客的<a href="https://www.nginx.com/blog/nginx-1-13-9-http2-server-push/" target="_blank" rel="external">Introducing HTTP/2 Server Push with NGINX 1.13.9</a> 这篇文章</p>
</li>
</ul>
<h3 id="系统设计"><a href="#系统设计" class="headerlink" title="系统设计"></a>系统设计</h3><ul>
<li><p><a href="https://muratbuffalo.blogspot.com/2018/02/paper-review-ipfs-content-addressed.html" target="_blank" rel="external">Paper review. IPFS: Content addressed, versioned, P2P file system</a> : IPFS最近被普遍认为会是一个改变下一步互联网的技术，其非中心化的特性以及基于内容hash的索引使得我们在内容安全，查找等多方面都有进一步的优势，作者肯定其思路和创意，同时也提出了一些对IPFS的看法，比如说P2P的网络如何和移动设备关联推广起来, P2P的内容管理对现在中心化的产品以及交互的改变(比如Googl如何索引内容)等, 可以加深对整个IPFS的理解和认识</p>
</li>
<li><p><a href="http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.62.7953&amp;rep=rep1&amp;type=pdf" target="_blank" rel="external">Scalable Bloom Filters(PDF)</a> : 作者介绍了一个可扩展的布隆过滤器方法, 核心思路是通过增加新的slot来构建一定数量和准确率要求下的过滤器</p>
</li>
</ul>
<h3 id="琐事小记"><a href="#琐事小记" class="headerlink" title="琐事小记"></a>琐事小记</h3><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ul>
<li><p><a href="https://github.com/Submanifold/latex-mimosis" target="_blank" rel="external">latex-mimosis: A minimal &amp; modern template for your thesis</a> : 一个论文/Paper的LaTex的模板, 个人感觉还是很优雅的，这几天有空完全熟悉下</p>
</li>
<li><p><a href="https://www.checkbot.io/" target="_blank" rel="external">Checkbot: Test your site follows 50+ SEO, speed &amp; security best practices</a> : 一个检验特定网站是否满足一些SEO规则的Chrome扩展，可以检测包括死链，是否页面/标题重复等特性</p>
</li>
<li><p><a href="https://hackernoon.com/securing-your-linux-web-server-2be683c223eb" target="_blank" rel="external">Securing your Linux web server</a> : 介绍了如何防护个人的web server，从帐号保护，运行时进程行为监控等多方面进行；不过介绍的太过琐碎，感觉此类问题最好能够交付出成套的解决方案</p>
</li>
<li><p><a href="https://mp.weixin.qq.com/s?__biz=MjM5MDE0Mjc4MA==&amp;mid=2651001305&amp;idx=1&amp;sn=1593b0a727a2f62de331165096274ff7" target="_blank" rel="external">春节假期技术圈都发生了哪些大新闻？</a> : 可以简单了解下</p>
</li>
<li><p><a href="https://wx4.sinaimg.cn/mw690/006lALW6ly1fop7cqcl9wj30sy2lsq9w.jpg" target="_blank" rel="external">Google内部的一些核心技术，以及外部对应的开源项目整理</a> : 可以关注下<code>Dremel UI</code>, <code>Blaze</code>, <code>styleguide</code>, 其中<code>Dremel UI</code>对应着<a href="https://redash.io/" target="_blank" rel="external">redash</a></p>
</li>
<li><p><a href="Industrial-Strength Natural Language Processing">spaCy</a> : 一个这次多语言的NLP工具，不过现在并不支持中文，看Demo感觉入门应该挺方便的</p>
</li>
<li><p><a href="http://cockpit-project.org/" target="_blank" rel="external">Cockpit</a> : Cockpit is a server manager that makes it easy to administer your GNU/Linux servers via a web browser</p>
</li>
<li><p><a href="https://github.com/google/pprof" target="_blank" rel="external">Google: Pprof</a> : pprof is a tool for visualization and analysis of profiling data, 一个可视化pprof数据的工具, 可惜没有示意图</p>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;工具技巧&quot;&gt;&lt;a href=&quot;#工具技巧&quot; class=&quot;headerlink&quot; title=&quot;工具技巧&quot;&gt;&lt;/a&gt;工具技巧&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://instantdomainsearch.com/&quot; target=&quot;_b
    
    </summary>
    
    
      <category term="weekly" scheme="http://shevacjs.com/tags/weekly/"/>
    
  </entry>
  
  <entry>
    <title>weekly of 20180218</title>
    <link href="http://shevacjs.com/2018/02/20/20180218/"/>
    <id>http://shevacjs.com/2018/02/20/20180218/</id>
    <published>2018-02-19T16:09:45.000Z</published>
    <updated>2018-02-19T16:22:48.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/Austria2.jpg" alt="日本-富士山"></p>
<h3 id="工具技巧"><a href="#工具技巧" class="headerlink" title="工具技巧"></a>工具技巧</h3><ul>
<li><p><a href="https://scotthelme.co.uk/enforcing-the-use-of-sri/" target="_blank" rel="external">Enforcing the use of SRI</a> : SRI策略是CSP新引入的一个策略, 通过<code>SRI</code>可以保障外链的资源(包括js/css), 要和代码里面的签名哈希一致, 避免受到这个方面的攻击影响, 可以同时参考作者的另外一篇文章<a href="https://scotthelme.co.uk/subresource-integrity/" target="_blank" rel="external">Subresource Integrity: Securing CDN loaded assets</a></p>
</li>
<li><p><a href="https://github.com/inspector-repl/inspector" target="_blank" rel="external">Inspector: A drop-anywhere C++ REPL</a> : <code>REPL</code>(Read–Eval–Print Loop), also known as an interactive toplevel or language shell, 他支持对C++代码做交互式的处理，类似于GDB里面的debug状态，可以参看<a href="https://news.ycombinator.com/item?id=16360738" target="_blank" rel="external">Hacker News</a>上面的讨论</p>
</li>
<li><p><a href="https://latency.apex.sh/" target="_blank" rel="external">LATENCY</a> : Global latency testing tool, 可以测试不同域名在全球不同区域的响应速度</p>
</li>
<li><p><a href="http://jmespath.org/" target="_blank" rel="external">JMESPath</a> : JMESPath is a query language for JSON,  类似于<a href="https://stedolan.github.io/jq/" target="_blank" rel="external">JQ</a>，不过语法上面好像更复杂</p>
</li>
</ul>
<h3 id="系统设计"><a href="#系统设计" class="headerlink" title="系统设计"></a>系统设计</h3><ul>
<li><p><a href="https://zwischenzugs.com/2011/08/29/my-favourite-secret-weapon-strace/" target="_blank" rel="external">My Favourite Secret Weapon – strace</a> : 文章系统介绍<code>strace</code>的用法以及作用, 不过从这篇文章来看<a href="http://www.brendangregg.com/blog/2014-05-11/strace-wow-much-syscall.html" target="_blank" rel="external">strace Wow Much Syscall</a>, <code>strace</code>在机制原理上面存在性能瓶颈(通过ptrace的方法，没遇到系统调用就暂停源进程，其后分析数据), 故建议使用类似于<a href="http://www.brendangregg.com/perf.html#More" target="_blank" rel="external">perf trace</a>, <code>sysdig</code>之类的工具</p>
</li>
<li><p><a href="https://news.ycombinator.com/item?id=16365413" target="_blank" rel="external">Nginx HTTP/2 server push support</a> : Nginx也要支持Http 2的server push机制, 原文是具体的代码实现，后者的hacker news上面的讨论，其实对http2的完整支持，nginx相对而言还是比较落后的，但是一旦支持之后，个人决定对于产品的生态链的收敛还是非常有意义的</p>
</li>
<li><p><a href="http://lefred.be/content/top-10-mysql-8-0-features-for-dbas-ops/" target="_blank" rel="external">TOP 10 MySQL 8.0 features for DBAs &amp; OPS</a> : MySQL 8的一些新特性, 个人觉得可以关注的特性包括<code>Removing Query Cache</code>, <code>Faster &amp; More Complete Performance Schema (Histograms, Indexes, …) and Information Schema</code>, <code>Persistent Global Variables</code> etc</p>
</li>
<li><p><a href="https://code.facebook.com/posts/166966743929963/how-production-engineers-support-global-events-on-facebook/" target="_blank" rel="external">How production engineers support global events on Facebook</a> : <code>Facebook Live On</code>产品介绍其如何应对预期流量高峰(比如圣诞，新年)的方法和手段，包括常规的流量预估，压测，方法论上面没有太多新意</p>
</li>
</ul>
<h3 id="琐事小记"><a href="#琐事小记" class="headerlink" title="琐事小记"></a>琐事小记</h3><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ul>
<li><p><a href="https://timkadlec.com/remembers/2018-02-14-the-two-faces-of-amp/" target="_blank" rel="external">The Two Faces of AMP</a> : 本文讨论AMP的两面性，一方面，从技术方面，其提供的能力让web mobile端的体验有了质的提升，另外一方面，Google也说明会提升基于AMP网站的rank排序，对此多少web开发者持反对态度，这种捆绑销售与开放互联网的精神相悖</p>
</li>
<li><p><a href="https://news.ycombinator.com/item?id=16385440" target="_blank" rel="external">A BRIEF GLANCE AT HOW VARIOUS TEXT EDITORS MANAGE THEIR TEXTUAL DATA</a>: 对于场景编辑器的buffer机制的概要说明, 类似于之前同样推荐的文章，建议大家重点关注<a href="https://en.wikipedia.org/wiki/Gap_buffer" target="_blank" rel="external">Gap buffer</a></p>
</li>
</ul>
<ul>
<li><p><a href="https://news.ycombinator.com/item?id=16375938" target="_blank" rel="external">DTRACE FOR LINUX; ORACLE DOES THE RIGHT THING</a> : Oracle将<code>Dtrace</code>的许可协议改为<code>GPL</code>, 普遍认为这个会对于dtrace在Linux生态的发展起到推进作用，另外一个方面，现在Linux生态其实有了不少可以trace/probe的工具，包括<code>eBPF</code>，<code>systemtap</code>, 后面这些工具如何发展还得看各自生态的建设情况</p>
</li>
<li><p><a href="https://mp.weixin.qq.com/s/2j6mpmsd_vb1gCHcjosODg" target="_blank" rel="external">聊聊微软刚发布的区块链去中心化身份识别系统DID</a> : 关注. 文末有不少区块链的参考信息，有更多兴趣可以阅读下</p>
</li>
<li><p><a href="https://github.com/danielgtaylor/jpeg-archive" target="_blank" rel="external">JPEG Archive</a> : Utilities for archiving photos for saving to long term storage or serving over the web</p>
</li>
<li><p><a href="https://github.com/pxgm/awesome-markdown-alternatives" target="_blank" rel="external">Awesome Markdown Alternatives</a> : 还可以参考另外一篇文档<a href="https://blog.jez.io/reach-for-markdown/" target="_blank" rel="external">Reach for Markdown, not LaTeX</a>，介绍基于<code>Markdown</code>, <code>Pandoc</code> 和<code>LaTex</code>组合的工具链</p>
</li>
<li><p><a href="https://blog.sourcerer.io/ascii-art-dead-or-alive-cc237391e5d8" target="_blank" rel="external">ASCII art — dead or alive</a> : 关于ASCII Art的概述，个人决定有时候ASCII的图表在可迁移性和可观性还是不错的, 文章里面的几个工具大家可以参考，包括<a href="https://github.com/dhobsd/asciitosvg" target="_blank" rel="external">asciitosvg</a>, <a href="http://asciiflow.com/" target="_blank" rel="external">asciiflow</a>，<a href="https://en.wikipedia.org/wiki/Cowsay" target="_blank" rel="external">cowsay</a></p>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/Austria2.jpg&quot; alt=&quot;日本-富士山&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;工具技巧&quot;&gt;&lt;a href=&quot;#工具技巧&quot; class=&quot;headerlink&quot; title=&quot;工具技巧&quot;&gt;&lt;/a&gt;工具技巧&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;
    
    </summary>
    
    
      <category term="weekly" scheme="http://shevacjs.com/tags/weekly/"/>
    
  </entry>
  
  <entry>
    <title>weekly of 20180211</title>
    <link href="http://shevacjs.com/2018/02/11/20180211/"/>
    <id>http://shevacjs.com/2018/02/11/20180211/</id>
    <published>2018-02-11T03:33:45.000Z</published>
    <updated>2018-02-11T03:34:45.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/Japan_Fuji.jpg" alt="日本-富士山"></p>
<h3 id="工具技巧"><a href="#工具技巧" class="headerlink" title="工具技巧"></a>工具技巧</h3><ul>
<li><a href="https://www.ctrl.blog/entry/chrome-adblocker" target="_blank" rel="external">Here’s how Google Chrome’s new ad blocker works</a> : 关于Chrome的广告防御系统的设计和构建, 可以了解整个Chrome反作弊体系的设计思路和理念；感觉Google做多系统和模块设计的系统化和组件化都很强，非常值得学习</li>
</ul>
<ul>
<li><a href="https://blog.harmonicinc.com/apple-backs-av1-what-does-this-mean-for-the-future-of-video-codecs/" target="_blank" rel="external">Apple Backs AV1: What Does This Mean for the Future of Video Codecs</a> : 苹果也会加入并且支持AV1，对于视频编解码生态不大了解的可以参看<a href="http://media.pkusz.edu.cn/achievements/?p=138" target="_blank" rel="external">谁将引领新一代视频编码标准：HEVC、AVS2和AV1性能对比报告</a> 和<a href="http://www.sohu.com/a/198863865_458408" target="_blank" rel="external">下一代开放视频编码标准AV1</a></li>
</ul>
<h3 id="系统设计"><a href="#系统设计" class="headerlink" title="系统设计"></a>系统设计</h3><ul>
<li><p><a href="https://lwn.net/Articles/745590/" target="_blank" rel="external">QUIC as a solution to protocol ossification</a> : 文章讨论了<code>QUIC</code>的设计理念, 其主要面临的问题不仅仅是协议设计上面的优化，还包括如何能支持在现在互联网生态</p>
</li>
<li><p><a href="https://code.facebook.com/posts/471099566618454/2017-year-in-review-building-immersive-experiences/" target="_blank" rel="external">2017 Year in review: Building immersive experiences</a> : Facebook总结2017年在用户沉浸式体验上面的改造，包括在文本方面对于多语言和翻译的支持, 以及在VR以及全景图上面的优化和改进</p>
</li>
<li><p><a href="https://code.facebook.com/posts/348442828901047/aquila-what-s-next-for-high-altitude-connectivity-/" target="_blank" rel="external">Aquila: What’s next for high-altitude connectivity?</a> : Facebook为了提升偏远地区的用户体验和网络可达率, 决定成立<code>Aquila</code>项目，核心的思路是通过一个运行在相对低空的太阳能无人机来提供地空的网络链接支持</p>
</li>
<li><p><a href="https://github.com/maemual/raft-zh_cn/blob/master/raft-zh_cn.md" target="_blank" rel="external">寻找一种易于理解的一致性算法</a> : 对Raft的解释，先mark，到时候给个总结</p>
</li>
</ul>
<h3 id="琐事小记"><a href="#琐事小记" class="headerlink" title="琐事小记"></a>琐事小记</h3><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ul>
<li><p><a href="http://www.calstephens.tech/blog/announcing-ar-planes" target="_blank" rel="external">Announcing AR Planes</a> : 关于AR Plane的一个Demo, 可惜是付费软件，不能试用；不过idea可以参考</p>
</li>
<li><p><a href="https://qianduan.group/posts/5a66f36e0cf6b624d2239c74" target="_blank" rel="external">2018 Web 开发者路线图</a> : 可以对整体技术栈有全局的认识, 另外几张图个人感觉画的非常好，可惜不知道画图软件</p>
</li>
<li><p><a href="https://fosdem.org/2018/schedule/event/introduction/" target="_blank" rel="external">Introduction to LLVM</a> : 关于LLVM的介绍，先mark</p>
</li>
<li><p><a href="https://zhuanlan.zhihu.com/p/33678187" target="_blank" rel="external">Google Project Zero 成员教你如何入门搞安全</a> : 定个小目标, 明天开始对安全相关的研究做进一步的深入学习</p>
</li>
<li><p><a href="https://weibo.com/ttarticle/p/show?id=2309404205853535261184" target="_blank" rel="external">科普: 宇宙奥德赛 — 太阳系之旅</a> : 众多关于太阳系星球科普的文章, 看了一部分非常值得推荐, mark</p>
</li>
<li><p><a href="https://mp.weixin.qq.com/s/Q9ZRHbRI5lkqAn1NLkDzXg" target="_blank" rel="external">纠正你对区块链的认知偏见</a> : 又是一个区块链的文章, 作为最近的业内的风口, 此类的文章不少，希望下来自己也写一篇更具针对性的总结文章</p>
</li>
<li><p><a href="http://www.techug.com/post/webassembly-application-example.html" target="_blank" rel="external">WebAssembly 能干什么？8个WebAssembly 应用案例</a> : 关注WebAssembly在多媒体网页编辑上面的应用，希望能够对一些PGC/UGC内容的生产带来不一样的体验</p>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/Japan_Fuji.jpg&quot; alt=&quot;日本-富士山&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;工具技巧&quot;&gt;&lt;a href=&quot;#工具技巧&quot; class=&quot;headerlink&quot; title=&quot;工具技巧&quot;&gt;&lt;/a&gt;工具技巧&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;
    
    </summary>
    
    
      <category term="weekly" scheme="http://shevacjs.com/tags/weekly/"/>
    
  </entry>
  
  <entry>
    <title>weekly of 20180121</title>
    <link href="http://shevacjs.com/2018/02/11/20180121/"/>
    <id>http://shevacjs.com/2018/02/11/20180121/</id>
    <published>2018-02-11T03:32:45.000Z</published>
    <updated>2018-02-11T03:33:13.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/Austria_02.jpg" alt="奥地利"></p>
<h3 id="工具技巧"><a href="#工具技巧" class="headerlink" title="工具技巧"></a>工具技巧</h3><ul>
<li><p><a href="https://blog.cloudflare.com/syn-packet-handling-in-the-wild/" target="_blank" rel="external">SYN packet handling in the wild</a> : 关于TCP SYN交互和实现的深入讨论，包括内核和应用程序对于<code>syn flood</code>, <code>syn queue</code>, <code>accept queue</code>的介绍</p>
</li>
<li><p><a href="https://mp.weixin.qq.com/s?__biz=MzU3MDM4OTE1Mw==&amp;mid=2247483680&amp;idx=1&amp;sn=96c8379db26115cb6e166ce0ef5bdc1d&amp;scene=45#wechat_redirect" target="_blank" rel="external">揭秘超分辨率的正确打开方式</a> : 具体介绍超分图片背后的理念，以及在微信的应用和效果，手百现在也在推动此类的事情。对于超分的应用场景也做了比较好的分析和介绍</p>
</li>
</ul>
<h3 id="系统设计"><a href="#系统设计" class="headerlink" title="系统设计"></a>系统设计</h3><ul>
<li><p><a href="http://www.dwmkerr.com/the-death-of-microservice-madness-in-2018/" target="_blank" rel="external">The Death of Microservice Madness in 2018</a> : 对微服务化的又一次系统性概述，分析，对于希望或者想要设计更理想业务模式的同学而言，是个很好的思路学习机会，也有<a href="http://www.jdon.com/49261" target="_blank" rel="external">中文翻译版</a></p>
</li>
<li><p><a href="https://blog.cloudflare.com/why-tls-1-3-isnt-in-browsers-yet/" target="_blank" rel="external">Why TLS 1.3 isn’t in browsers yet</a> : 随着<code>TLS 1.3</code>的规范落地，其业务落地也是需要重点考虑的问题，然而现实情况是，由于一些<code>middlebox</code>在实现等兼容性的问题, 浏览器其实并不能透明的从<code>TLS 1.2</code>升级到<code>TLS 1.3</code>, 作者具体分析了这里面的一些风险和问题, 包括协议设计上面的兼容性问题等等，整体下来可以加深对TLS协议的理解</p>
</li>
<li><p><a href="https://mp.weixin.qq.com/s/8KYlDIhYmF0jCpbdBsIdcw" target="_blank" rel="external">如何节省1T图片带宽？ 解密极致图像压缩</a> : 腾讯的团队，分别介绍了在<code>WebP</code>, 自研<code>WXAM</code>, 以及<code>guetzli</code>的落地经验。两个总结, 一个是腾讯在这个方面还是做了较多的研究和分析的，文章分享的问题都是比较干货的；其次是, 虽然之前也考虑落地过<code>guetzli</code>, 但没有成功, 整体来说, 执行力还是太差了</p>
</li>
<li><p><a href="http://www.arkteam.net/?p=3390" target="_blank" rel="external">Deemon:自动化CSRF安全检测框架</a> : 关于自动化<code>CSRF</code>攻击检测的设计理念, 一些东西没有完全理解，先mark</p>
</li>
</ul>
<h3 id="琐事小记"><a href="#琐事小记" class="headerlink" title="琐事小记"></a>琐事小记</h3><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ul>
<li><p><a href="https://blog.cloudflare.com/2017-holiday-reading-from-the-cloudflare-blog/" target="_blank" rel="external">Technical reading from the Cloudflare blog for the holidays</a> : 可以认为是2017年<a href="https://blog.cloudflare.com/" target="_blank" rel="external">CloudFlare博客</a>的精选, 里面文章质量都不错，可以mark关注下</p>
</li>
<li><p><a href="https://www.nginx.com/blog/modsecurity-apache-struts-cve-2017-5638/" target="_blank" rel="external">Using ModSecurity to Virtual Patch Apache Struts CVE-2017-5638</a> : 对于一些紧急的线上安全问题, 使用类似于<code>ModSecurtiy</code>的安全策略可以快速止损, 具体nginx的modsecurity的文档可以参看<a href="https://www.nginx.com/resources/library/modsecurity-3-nginx-quick-start-guide/" target="_blank" rel="external">ModSecurity 3.0 and NGINX: Quick Start Guide</a></p>
</li>
<li><p><a href="https://www.gatesnotes.com/Books/Enlightenment-Now" target="_blank" rel="external">Bill Gates: My new favorite book of all time</a> : 作者推荐了一本新书<a href="https://www.amazon.cn/dp/0525559027/" target="_blank" rel="external">Enlightenment Now: The Case for Reason, Science, Humanism, and Progress</a>, 现在英文版刚才出来</p>
</li>
<li><p><a href="http://zulko.github.io/moviepy/getting_started/getting_started.html" target="_blank" rel="external">MoviePy: Video editing with Python</a> : 一个Python的视频编辑库, 可以让你快速做一些视频Gif抽取等工作, 但并不擅长”You only need to do frame-by-frame video analysis “, “You only want to convert a video file, or turn a series of image files into a movie”, 可以先mark关注</p>
</li>
<li><p><a href="https://mp.weixin.qq.com/s/Law7FpS53TjrDrzSMCtcVg" target="_blank" rel="external">低调现身北京的吴恩达，刚刚给人工智能公司下了个定义</a> : 关于传统公司，互联网公司和人工智能公司的定义和理解；其一直强调人工智能技术会想电能等成为企业和产业改造的源动力, 里面的关键在于数据驱动思想的注入以及和行业的深度结合</p>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/Austria_02.jpg&quot; alt=&quot;奥地利&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;工具技巧&quot;&gt;&lt;a href=&quot;#工具技巧&quot; class=&quot;headerlink&quot; title=&quot;工具技巧&quot;&gt;&lt;/a&gt;工具技巧&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;
    
    </summary>
    
    
      <category term="weekly" scheme="http://shevacjs.com/tags/weekly/"/>
    
  </entry>
  
  <entry>
    <title>weekly of 20180114</title>
    <link href="http://shevacjs.com/2018/01/15/20180114/"/>
    <id>http://shevacjs.com/2018/01/15/20180114/</id>
    <published>2018-01-15T10:28:45.000Z</published>
    <updated>2018-01-15T10:38:30.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/Barcelona_Seaside.jpg" alt="巴塞罗那-海边"></p>
<h3 id="工具技巧"><a href="#工具技巧" class="headerlink" title="工具技巧"></a>工具技巧</h3><ul>
<li><p><a href="https://www.netguru.co/codestories/nginx-tutorial-performance" target="_blank" rel="external">Nginx Tutorial #2: Performance</a> : 关于nginx的介绍文章，这篇重点介绍nginx在性能优化方向做的事情，详细说明了<code>TCP_NODEALY</code>, <code>sendfile</code>等特性, 非常值得学习 </p>
</li>
<li><p><a href="http://servercoder.com/2018/01/10/protobuf-usages/" target="_blank" rel="external">你真的用对protobuf了吗?</a> : Protobuf使用的一些tips</p>
</li>
<li><p><a href="https://zoumiaojiang.com/article/common-web-security/" target="_blank" rel="external">常见 Web 安全攻防总结</a> : 概述的还是非常全面的，包括<code>XSS</code>, <code>CSRF</code>, <code>SQL注入</code></p>
</li>
<li><p><a href="http://facebook.github.io/zstd/" target="_blank" rel="external">Zstandard</a> : “Zstandard is a real-time compression algorithm, providing high compression ratios, It also offers a special mode for small data, called dictionary compression, and can create dictionaries from any sample set”; 后面的特性值得关注</p>
</li>
</ul>
<h3 id="系统设计"><a href="#系统设计" class="headerlink" title="系统设计"></a>系统设计</h3><ul>
<li><p><a href="https://buoyant.io/2017/04/25/whats-a-service-mesh-and-why-do-i-need-one/" target="_blank" rel="external">What’s a service mesh? And why do I need one?</a> : 关于Service Mesh的初步介绍, 去年中旬到现在，是微服务框架的一个很多的概念, 其他可以参考的文章包括<a href="https://istio.io/docs/" target="_blank" rel="external">Istio Document</a>, <a href="https://mp.weixin.qq.com/s?__biz=MjM5MDE0Mjc4MA==&amp;mid=2650998746&amp;idx=1&amp;sn=5ef8234abc6855482db64b581e4e9a9a" target="_blank" rel="external">Service Mesh：下一代微服务？</a>, <a href="https://mp.weixin.qq.com/s?__biz=MzU0MTMyMDg1NQ==&amp;mid=2247483697&amp;idx=1&amp;sn=b5fdd3af4ae352942820cec9280257c3" target="_blank" rel="external">演讲实录 | Service Mesh 时代的选边与站队</a>, <a href="http://dockone.io/article/3022" target="_blank" rel="external">使用Istio治理微服务入门</a>, 感觉和自己之前琐碎梳理的想法很一致, 需要进一步提升对问题和解决方案的归纳总结能力</p>
</li>
<li><p><a href="http://blog.cnbang.net/tech/3531/" target="_blank" rel="external">移动 APP 网络优化概述</a> : 概括性的介绍了移动APP的网络优化思路，包括在弱网情况下的优化策略</p>
</li>
<li><p><a href="https://www.bbsmax.com/A/kmzLLLolzG/" target="_blank" rel="external">TLS协议分析 与 现代加密通信协议设计</a> : 对TLS和密码技术的非常全面的介绍，是之前个人比较想写的一类文章，非常赞，先mark</p>
</li>
<li><p><a href="https://mp.weixin.qq.com/s/6V-zQYwvWuvu3bwtkpaM7w" target="_blank" rel="external">Jeff Dean晒谷歌大脑成绩单，TPU、AutoML、TensorFlow等重大突破</a> : 真心佩服这些无论在高屋建瓴还是技术细节方面，都能考虑周全，推进落地的人员,  其整体战略目标是非常清楚的</p>
</li>
</ul>
<h3 id="琐事小记"><a href="#琐事小记" class="headerlink" title="琐事小记"></a>琐事小记</h3><ul>
<li><a href="https://www.gnu.org/software/gawk/manual/html_node/Reference-to-Elements.html" target="_blank" rel="external">AWK: Referring to an Array Element</a> : 在AWK里面直接使用<code>array[index-expression]</code>是有副作用的，awk内部会自动为此index生成一个emtpy value, 所以判断一个arry的某个index是否存在，最合理的办法是<code>if inx in array</code>，而不是<code>array[index] == &quot;&quot;</code>, 也可以参看<a href="https://www.gnu.org/software/gawk/manual/html_node/Array-Intro.html#Array-Intro" target="_blank" rel="external">AWK:Introduction to Arrays</a></li>
</ul>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ul>
<li><p><a href="https://mp.weixin.qq.com/s?__biz=MzU1NDA4NjU2MA==&amp;mid=2247487608&amp;idx=3&amp;sn=a6392d5028f0f33bfeebf89baf9e2975" target="_blank" rel="external">Facebook开源端到端自动语音识别系统wav2letter</a> : 其是由Facebook AI 研究团队开源的一款简单而高效的端到端自动语音识别系统, 简单看了文档，感觉安装之类的还是很复杂的</p>
</li>
<li><p><a href="https://www.jiqizhixin.com/articles/2018-01-12-5/" target="_blank" rel="external">前端慌不慌？用深度学习自动生成HTML代码</a> : “如何用前端页面原型生成对应的代码一直是我们关注的问题，本文作者根据 pix2code 等论文构建了一个强大的前端代码生成模型，并详细解释了如何利用 LSTM 与 CNN 将设计原型编写为 HTML 和 CSS 网站”</p>
</li>
<li><p><a href="https://mp.weixin.qq.com/s/Zaqj421ASh0kWGnR2ksHJA" target="_blank" rel="external">由全民吃鸡引发的网游加速学习总结</a> : 关于游戏网络速度优化的说明，可以了解国内的网络拓扑的大概情况</p>
</li>
<li><p><a href="https://www.toutiao.com/a6509770828173804045/" target="_blank" rel="external">10张图，看懂今日头条核心算法技术</a> : 初步介绍今日头条的算法策略, 后续应该还会有更详细的说明</p>
</li>
<li><p><a href="https://www.jianshu.com/p/56acbd66d525" target="_blank" rel="external">天天写业务代码很焦虑，怎么破?</a> : 关于业务和技术开发的常规讨论, “每一层技术实现，都服务于上一层，都以上一层的需求为业务”, 里面对于业务和技术的感受的区分点个人还是很认可的</p>
</li>
<li><p><a href="https://news.ycombinator.com/item?id=16140418" target="_blank" rel="external">iOS 11 Security[pdf]</a> : 苹果的官方文档，关于IOS系统安全性的白皮书, 文档写的非常系统，排版也非常漂亮，值得mark学习</p>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/Barcelona_Seaside.jpg&quot; alt=&quot;巴塞罗那-海边&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;工具技巧&quot;&gt;&lt;a href=&quot;#工具技巧&quot; class=&quot;headerlink&quot; title=&quot;工具技巧&quot;&gt;&lt;/a&gt;工具技巧&lt;/h3&gt;&lt;u
    
    </summary>
    
    
      <category term="weekly" scheme="http://shevacjs.com/tags/weekly/"/>
    
  </entry>
  
  <entry>
    <title>nginx 1.13.8 版本说明</title>
    <link href="http://shevacjs.com/2018/01/03/nginx_1_13_8/"/>
    <id>http://shevacjs.com/2018/01/03/nginx_1_13_8/</id>
    <published>2018-01-03T07:17:29.000Z</published>
    <updated>2018-01-07T07:08:49.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="原始feature说明"><a href="#原始feature说明" class="headerlink" title="原始feature说明"></a>原始feature说明</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">*) Feature: now nginx automatically preserves the CAP_NET_RAW capability</div><div class="line">   in worker processes when using the &quot;transparent&quot; parameter of the</div><div class="line">   &quot;proxy_bind&quot;, &quot;fastcgi_bind&quot;, &quot;memcached_bind&quot;, &quot;scgi_bind&quot;, and</div><div class="line">   &quot;uwsgi_bind&quot; directives.</div><div class="line"></div><div class="line">*) Feature: improved CPU cache line size detection.</div><div class="line">   Thanks to Debayan Ghosh.</div><div class="line"></div><div class="line">*) Feature: new directives in vim syntax highlighting scripts.</div><div class="line">   Thanks to Gena Makhomed.</div><div class="line">.....</div></pre></td></tr></table></figure>
<p>这个我们主要关注<code>feature1</code>和<code>feature2</code>, 即是:</p>
<ul>
<li>对<code>xxx_bind</code>的指令支持<code>CAP_NET_RAW</code>方式</li>
<li>改进对cpu cache line长度的检测</li>
</ul>
<p>我们分布研究这两个问题的背景以及nginx的解决方案</p>
<h3 id="关于xxx-bind"><a href="#关于xxx-bind" class="headerlink" title="关于xxx_bind"></a>关于xxx_bind</h3><p>我们知道存在类似于<code>proxy_bind</code>, <code>fastcgi_bind</code>, <code>memcached_bind</code>之类的nginx指令，其重要是干嘛的呢? 如下是<a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_bind" target="_blank" rel="external">proxy_bind</a>的官方说明(精简):</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">Syntax:    proxy_bind address [transparent] | off;</div><div class="line">Default:    —</div><div class="line">Context:    http, server, location</div><div class="line"></div><div class="line">Makes outgoing connections to a proxied server originate from the specified local IP address with an optional port (1.11.2). Parameter value can contain variables (1.3.12). The transparent parameter (1.11.0) allows outgoing connections to a proxied server originate from a non-local IP address, for example, from a real IP address of a client:</div><div class="line"></div><div class="line">&gt;&gt;&gt; proxy_bind $remote_addr transparent;</div><div class="line"></div><div class="line">In order for this parameter to work, it is usually necessary to run nginx worker processes with the superuser privileges. On Linux it is not required (1.13.8) as if the transparent parameter is specified, worker processes inherit the CAP_NET_RAW capability from the master process. It is also necessary to configure kernel routing table to intercept network traffic from the proxied server.</div></pre></td></tr></table></figure>
<p>如上, 我们可以总结为<code>proxy_bind</code>实现代理时，和<code>upstream</code>交互，其使用的ip/port是可以调整的，具体包括:</p>
<ol>
<li>绑定本地的其他ip地址 </li>
<li>绑定一个非本地的ip地址 : 这个需要加入<code>transparent</code>参数</li>
</ol>
<p>方法2可以实现真正的透明代理, 不过要具体实现这个功能，需要调整的地方还很多(要保障返回数据报地址是OK的)，具体可以参看nginx的官方blog的文章<a href="https://www.nginx.com/blog/ip-transparency-direct-server-return-nginx-plus-transparent-proxy/" target="_blank" rel="external">IP Transparency and Direct Server Return with NGINX and NGINX Plus as Transparent Proxy</a></p>
<p>回到这次的版本升级的点，可以想像，如果一个机器A想伪造机器B的IP发送请求，是需要一些权限控制的(想想大家之前写的ping程序:) ), 这个传统上面是需要<code>root</code>权限的。显然，这个方案的缺点是，整个nginx都需要以<code>root</code>权限去执行，在安全性和隐私方案是存在风险的。随之，在新的内核和安卓系统强调更多是<a href="http://man7.org/linux/man-pages/man7/capabilities.7.html" target="_blank" rel="external">Capability</a>机制</p>
<p>所以, nginx这次升级的策略就是, 如果存在这个capability，就无需要求root权限了，具体代码如下(添加些许注释): </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">if</span> (NGX_HAVE_PR_SET_KEEPCAPS &amp;&amp; NGX_HAVE_CAPABILITIES)</span></div><div class="line"><span class="comment">/*</span></div><div class="line">* 使用prctl(PR_SET_KEEPCAPS, xxx)的效果是保证即便切换用户, 其capabilities依旧保留</div><div class="line">*/</div><div class="line">        <span class="keyword">if</span> (ccf-&gt;transparent &amp;&amp; ccf-&gt;user) &#123;</div><div class="line">            <span class="keyword">if</span> (prctl(PR_SET_KEEPCAPS, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>) == <span class="number">-1</span>) &#123;</div><div class="line">                ngx_log_error(NGX_LOG_EMERG, cycle-&gt;<span class="built_in">log</span>, ngx_errno,</div><div class="line">                              <span class="string">"prctl(PR_SET_KEEPCAPS, 1) failed"</span>);</div><div class="line">                <span class="comment">/* fatal */</span></div><div class="line">                <span class="built_in">exit</span>(<span class="number">2</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></div><div class="line"></div><div class="line">...</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">if</span> (NGX_HAVE_CAPABILITIES)</span></div><div class="line">        <span class="keyword">if</span> (ccf-&gt;transparent &amp;&amp; ccf-&gt;user) &#123;</div><div class="line">            <span class="class"><span class="keyword">struct</span> __<span class="title">user_cap_data_struct</span>    <span class="title">data</span>;</span></div><div class="line">            <span class="class"><span class="keyword">struct</span> __<span class="title">user_cap_header_struct</span>  <span class="title">header</span>;</span></div><div class="line"></div><div class="line">            ngx_memzero(&amp;header, <span class="keyword">sizeof</span>(struct __user_cap_header_struct));</div><div class="line">            ngx_memzero(&amp;data, <span class="keyword">sizeof</span>(struct __user_cap_data_struct));</div><div class="line"></div><div class="line">            header.version = _LINUX_CAPABILITY_VERSION_1;</div><div class="line">            data.effective = CAP_TO_MASK(CAP_NET_RAW);</div><div class="line">            data.permitted = data.effective;</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line">* 设置用户的CAP_NET_RAW权限</div><div class="line">*/</div><div class="line">            <span class="keyword">if</span> (syscall(SYS_capset, &amp;header, &amp;data) == <span class="number">-1</span>) &#123;</div><div class="line">                ngx_log_error(NGX_LOG_EMERG, cycle-&gt;<span class="built_in">log</span>, ngx_errno,</div><div class="line">                              <span class="string">"capset() failed"</span>);</div><div class="line">                <span class="comment">/* fatal */</span></div><div class="line">                <span class="built_in">exit</span>(<span class="number">2</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<h3 id="关于CPU-Cache-Line"><a href="#关于CPU-Cache-Line" class="headerlink" title="关于CPU Cache Line"></a>关于CPU Cache Line</h3><p>关于CPU Cache Line，我们分成三个细化的问题进行研究:</p>
<ol>
<li>CPU Cache 是什么，有什么作用/影响?</li>
<li>Nginx如何实现对CPU Cache Line Size的检测?</li>
<li>Nginx如何应用CPU Cache?</li>
</ol>
<p>下面依次分析</p>
<h4 id="CPU-Cache-作用"><a href="#CPU-Cache-作用" class="headerlink" title="CPU Cache 作用"></a>CPU Cache 作用</h4><p><a href="http://cenalulu.github.io/linux/all-about-cpu-cache/" target="_blank" rel="external">关于CPU Cache – 程序猿需要知道的那些事</a>和<a href="http://www.aristeia.com/TalkNotes/ACCU2011_CPUCaches.pdf" target="_blank" rel="external">CPU Caches and Why You Care</a>这两篇文章对Cpu Cache有非常详细和深刻的说明，可以深入研究之, 简而言之, CPU Cache是一个CPU的硬件Cache，如何合理的利用其特性，可以极大提升程序的性能, 如下是<a href="http://www.aristeia.com/TalkNotes/ACCU2011_CPUCaches.pdf" target="_blank" rel="external">CPU Cache的示意图</a><br>:<br><img src="/images/cpu_cache.png" alt="CPU Cache"></p>
<p>具体地，CPU CACHE是以<code>CPU CACHE LINE</code>为粒度进行组织管理的，不同的cpu其size会有所不同，但一般都是32/64/128位等; 基于次，我们很自然而然的想到，如果要充分利用CPU CACHE，我们的内存地址最好和<code>CPU CACHE LINE SIZE</code>对齐, 这样可以保障较好的cache命中率和cache利用率</p>
<h4 id="Nginx对CPU-CACHE-LINE-SIZE的检测"><a href="#Nginx对CPU-CACHE-LINE-SIZE的检测" class="headerlink" title="Nginx对CPU CACHE LINE SIZE的检测"></a>Nginx对CPU CACHE LINE SIZE的检测</h4><p>这方面，就不详述其推理过程了，直接结论如下(有谬误之处，<a href="mailto:shevacjs@qq.com" target="_blank" rel="external">还请告知</a>) :</p>
<ul>
<li>在<code>configure</code>阶段, 通过获取CPU信息设置<code>NGX_CPU_CACHE_LINE</code>宏变量，在<code>auto/cc/gcc(clang)</code>里面都会有此类的代码，比如:</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">## file: auto/cc/gcc</span></div><div class="line"><span class="keyword">case</span> <span class="variable">$CPU</span> <span class="keyword">in</span></div><div class="line">    pentium)</div><div class="line">        <span class="comment"># optimize for Pentium and Athlon</span></div><div class="line">        CPU_OPT=<span class="string">"-march=pentium"</span></div><div class="line">        NGX_CPU_CACHE_LINE=32</div><div class="line">    ;;</div></pre></td></tr></table></figure>
<ul>
<li>在编译阶段, 验证是否支持<code>sysconf(_SC_LEVEL1_DCACHE_LINESIZE)</code>这个特性，如果支持, 则开启宏<code>NGX_HAVE_LEVEL1_DCACHE_LINESIZE</code>, 大概代码如下:</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line">file: ./src/os/unix/ngx_posix_init.c</div><div class="line">如果宏 NGX_HAVE_LEVEL1_DCACHE_LINESIZE 设置，就通过sysconf获取*/</div><div class="line"><span class="meta">#<span class="meta-keyword">if</span> (NGX_HAVE_LEVEL1_DCACHE_LINESIZE)</span></div><div class="line">    size = sysconf(_SC_LEVEL1_DCACHE_LINESIZE);</div><div class="line">    <span class="keyword">if</span> (size &gt; <span class="number">0</span>) &#123;</div><div class="line">        ngx_cacheline_size = size;</div><div class="line">    &#125;</div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></div></pre></td></tr></table></figure>
<ul>
<li>在运行启动时候获取(编译和运行的机器可能不一样), 所以还需要主动获取，这个里面主要使用<a href="https://en.wikipedia.org/wiki/CPUID#EAX=1:_Processor_Info_and_Feature_Bits" target="_blank" rel="external">cpuid</a>这个指令获取具体的CPU信息, 简要代码如下:</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line">file: ./src/os/unix/ngx_posix_init.c 获取信息</div><div class="line">*/</div><div class="line">ngx_cpuinfo();</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line">file: src/core/ngx_cpuinfo.c</div><div class="line">通过汇编指令获取cpu信息，结果存储在 ngx_cacheline_size</div><div class="line">*/</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">static</span> ngx_inline <span class="keyword">void</span></span></div><div class="line"><span class="title">ngx_cpuid</span><span class="params">(<span class="keyword">uint32_t</span> i, <span class="keyword">uint32_t</span> *buf)</span></div><div class="line">&#123;</div><div class="line"></div><div class="line">    <span class="comment">/*</span></div><div class="line">     * we could not use %ebx as output parameter if gcc builds PIC,</div><div class="line">     * and we could not save %ebx on stack, because %esp is used,</div><div class="line">     * when the -fomit-frame-pointer optimization is specified.</div><div class="line">     */</div><div class="line"></div><div class="line">    __asm__ (</div><div class="line"></div><div class="line">    <span class="string">"    mov    %%ebx, %%esi;  "</span></div><div class="line"></div><div class="line">    <span class="string">"    cpuid;                "</span></div><div class="line">    <span class="string">"    mov    %%eax, (%1);   "</span></div><div class="line">    <span class="string">"    mov    %%ebx, 4(%1);  "</span></div><div class="line">    <span class="string">"    mov    %%edx, 8(%1);  "</span></div><div class="line">    <span class="string">"    mov    %%ecx, 12(%1); "</span></div><div class="line"></div><div class="line">    <span class="string">"    mov    %%esi, %%ebx;  "</span></div><div class="line"></div><div class="line">    : : <span class="string">"a"</span> (i), <span class="string">"D"</span> (buf) : <span class="string">"ecx"</span>, <span class="string">"edx"</span>, <span class="string">"esi"</span>, <span class="string">"memory"</span> );</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="NGINX如何应用CPU-CACHE-LINE"><a href="#NGINX如何应用CPU-CACHE-LINE" class="headerlink" title="NGINX如何应用CPU CACHE LINE"></a>NGINX如何应用CPU CACHE LINE</h4><p>如上，nginx知道<code>cpu cache line size</code>之后，要想办法尽量的把申请的内存地址和<code>cpu cache line size</code>对齐，一个重要的示例就是<code>CRC32</code>的实现，具体如下:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// file: ./src/core/ngx_crc32.c</span></div><div class="line"></div><div class="line"><span class="keyword">ngx_int_t</span> ngx_crc32_table_init(<span class="keyword">void</span>)</div><div class="line">&#123;</div><div class="line">    <span class="comment">//申请空间，注意多申请了 ngx_cacheline_size</span></div><div class="line">    p = ngx_alloc(<span class="number">16</span> * <span class="keyword">sizeof</span>(<span class="keyword">uint32_t</span>) + ngx_cacheline_size, ngx_cycle-&gt;<span class="built_in">log</span>);</div><div class="line">    <span class="keyword">if</span> (p == <span class="literal">NULL</span>) &#123;</div><div class="line">        <span class="keyword">return</span> NGX_ERROR;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//将内存地址和ngx_cacheline_size对齐，注意，由于多申请了</span></div><div class="line">    <span class="comment">//一些空间，即便内存往前偏移一些，也不会发生内存越界</span></div><div class="line">    p = ngx_align_ptr(p, ngx_cacheline_size);</div><div class="line"></div><div class="line">    <span class="comment">// copy </span></div><div class="line">    ngx_memcpy(p, ngx_crc32_table16, <span class="number">16</span> * <span class="keyword">sizeof</span>(<span class="keyword">uint32_t</span>));</div><div class="line">    ngx_crc32_table_short = p;</div><div class="line"></div><div class="line">    ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h3><ul>
<li><a href="https://www.ibm.com/developerworks/cn/linux/sdk/assemble/inline/" target="_blank" rel="external">Linux 中 x86 的内联汇编</a> : 可以用于了解nginx如何使用<code>cpuid</code>这个指令</li>
<li><a href="http://man7.org/linux/man-pages/man7/capabilities.7.html" target="_blank" rel="external">Capabilities - overview of Linux capabilities</a> :  官方的man手册，对<code>capability</code>有个概述</li>
<li><p><a href="http://rk700.github.io/2016/10/26/linux-capabilities/" target="_blank" rel="external">Linux的capabilities机制</a> : 简单的中文说明，可以作为入门了解</p>
</li>
<li><p><a href="http://www.aristeia.com/TalkNotes/ACCU2011_CPUCaches.pdf" target="_blank" rel="external">CPU Caches and Why You Care</a> : 对CPU CACHE有系统的介绍，其他的概述文章还包括<a href="http://cenalulu.github.io/linux/all-about-cpu-cache/" target="_blank" rel="external">关于CPU Cache – 程序猿需要知道的那些事</a>和<a href="https://coolshell.cn/articles/10249.html" target="_blank" rel="external">7个示例科普CPU CACHE</a></p>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;原始feature说明&quot;&gt;&lt;a href=&quot;#原始feature说明&quot; class=&quot;headerlink&quot; title=&quot;原始feature说明&quot;&gt;&lt;/a&gt;原始feature说明&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;tabl
    
    </summary>
    
    
      <category term="nginx" scheme="http://shevacjs.com/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>weekly of 20171210</title>
    <link href="http://shevacjs.com/2017/12/12/20171210/"/>
    <id>http://shevacjs.com/2017/12/12/20171210/</id>
    <published>2017-12-12T07:17:45.000Z</published>
    <updated>2017-12-12T07:17:20.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/seu.jpg" alt="SEU四牌楼-冬日清晨"></p>
<h2 id="工具技巧"><a href="#工具技巧" class="headerlink" title="工具技巧"></a>工具技巧</h2><ul>
<li><p><a href="https://www.haproxy.com/blog/dynamic-configuration-haproxy-runtime-api/" target="_blank" rel="external">Dynamic Configuration with the HAProxy Runtime API</a> : 介绍了<code>HAProxy</code>的动态configure功能，其可以通过一个<code>socat</code>的命令行工具进行交互, 感觉这个设计对于nginx也很有借鉴意义，先mark</p>
</li>
<li><p><a href="https://news.ycombinator.com/item?id=15845114" target="_blank" rel="external">Evolution of <img>: Gif without the GIF</a> : 先mark</p>
</li>
<li><p><a href="https://github.com/Microsoft/ProcDump-for-Linux" target="_blank" rel="external">Microsoft/ProcDump-for-Linux</a> : “ProcDump provides a convenient way for Linux developers to create core dumps of their application based on performance triggers”</p>
</li>
<li><p><a href="https://blog.cloudflare.com/arm-takes-wing/" target="_blank" rel="external">ARM Takes Wing: Qualcomm vs. Intel CPU comparison</a> : 本文具体对比了intel和高通的CPU在服务器市场的性能情况，文章具体分析了在<code>openssl</code>, <code>zlib</code>, <code>go</code>语言, <code>nginx</code>等，在以C语言为基础的组件里面intel的cpu在单核上面优势都比较明显，但是整体的性能(28核vs48核)会弱一些，而go语言arm的处理器没有太多优势; 整体来看, arm后续的服务器的处理器还是很有竞争力的</p>
</li>
</ul>
<h2 id="每周paper"><a href="#每周paper" class="headerlink" title="每周paper"></a>每周paper</h2><ul>
<li><p><a href="https://machinelearning.apple.com/docs/learning-with-privacy-at-scale/appledifferentialprivacysystem.pdf" target="_blank" rel="external">Learning with Privacy at Scale</a> : 苹果介绍了其差分隐私(Differential Privacy)的实践和经验，略长，先mark</p>
</li>
<li><p><a href="https://blog.acolyer.org/2017/11/28/popularity-predictions-of-facebook-videos-for-higher-quality-streaming/" target="_blank" rel="external">Popularity predictions of Facebook videos for higher quality streaming</a> : 预判一些内容的流行度/热点有时候非常有用，比如说视频转H265对CPU等成本非常高, 所以我们如果能够正确预估哪些视频会是热点，并且提前压缩，对带宽和cpu等资源的利用率会有质的提升，具体的预估算法不是特别理解，反正是又引入了一个简单的神经网络模型进行训练，下来可以细看下</p>
</li>
</ul>
<h2 id="系统设计"><a href="#系统设计" class="headerlink" title="系统设计"></a>系统设计</h2><ul>
<li><p><a href="https://blog.cloudflare.com/make-ssl-boring-again/" target="_blank" rel="external">Make SSL boring again</a> : CloudFlare的分享文章，介绍其引入google的开源<a href="https://boringssl.googlesource.com/boringssl/" target="_blank" rel="external">BoringSSL</a>的历程以及收获, 除了对TLS1.3更好的支持以外，还包括<code>private key callback</code>, <code>equal-preference cipher grouping</code>等特性，对于大规模的SSL部署，非常有裨益</p>
</li>
<li><p><a href="https://www.nginx.com/blog/optimizing-web-servers-for-high-throughput-and-low-latency/" target="_blank" rel="external">Optimizing Web Servers for High Throughput and Low Latency</a> : 对于实现一个高性能web server的建议, 从硬件CPU的选择到上层lib库和nginx配置的控制, 讲得非常细，非常系统, 对里面一些优化的理解可以加深对nginx/linux系统的理解，建议多多review</p>
</li>
<li><p><a href="https://mp.weixin.qq.com/s/sDRftJL1xNBR6tQB7S4SIA" target="_blank" rel="external">Aurora Serveless的红与黑</a> : <code>Aurora Serveless</code>是AWS新推出的无服务,类似于mysql的存储解决方案，现在还不大清楚里面的一些实现细节，但是其设计抽象理念值得关注</p>
</li>
</ul>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><ul>
<li><p><a href="https://www.gatesnotes.com/About-Bill-Gates/Best-Books-2017" target="_blank" rel="external">5 amazing books I read this year</a> :  Bill Gates推荐2017的几本书，包括<code>The Rise of ISIS by</code>, <code>Turtles All the Way Down</code>, <code>The Color of Law</code> 等, 以上几本书亚马逊基本都有售，可以考虑入手</p>
</li>
<li><p><a href="http://www.visualcapitalist.com/histomap/" target="_blank" rel="external">Histomap: Visualizing the 4,000 Year History of Global Power</a> : 通过可视化的方式展现近4000年历史上各个权利的迭代更替</p>
</li>
<li><p><a href="https://www.feistyduck.com/books/openssl-cookbook/" target="_blank" rel="external">OpenSSL Cookbook</a> : 非常好的关于openssl的工具和实践书籍，对此有兴趣的可以深入看看</p>
</li>
<li><p><a href="https://blog.cloudflare.com/randomness-101-lavarand-in-production/" target="_blank" rel="external">Randomness 101: LavaRand in Production</a> : CloudFlare通过摄像头采集<code>LavaRand</code>的信息，来作为加密随机数的输入变量</p>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/seu.jpg&quot; alt=&quot;SEU四牌楼-冬日清晨&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;工具技巧&quot;&gt;&lt;a href=&quot;#工具技巧&quot; class=&quot;headerlink&quot; title=&quot;工具技巧&quot;&gt;&lt;/a&gt;工具技巧&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;
    
    </summary>
    
    
      <category term="weekly" scheme="http://shevacjs.com/tags/weekly/"/>
    
  </entry>
  
  <entry>
    <title>weekly of 20171126</title>
    <link href="http://shevacjs.com/2017/12/05/20171126/"/>
    <id>http://shevacjs.com/2017/12/05/20171126/</id>
    <published>2017-12-05T03:39:45.000Z</published>
    <updated>2017-12-05T03:39:46.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/shanghai01.jpg" alt="上海外滩"></p>
<h2 id="工具技巧"><a href="#工具技巧" class="headerlink" title="工具技巧"></a>工具技巧</h2><ul>
<li><p><a href="https://aws.amazon.com/cn/blogs/opensource/better-random-number-generation-for-openssl-libc-and-linux-mainline/" target="_blank" rel="external">Better Random Number Generation for OpenSSL, libc, and Linux Mainline</a> : AWS构建了自己的ssl库(<a href="https://aws.amazon.com/cn/blogs/security/introducing-s2n-a-new-open-source-tls-implementation/" target="_blank" rel="external">s2c</a>), 其在随机数生成里面考虑了具体在linux系统下面实线的一个问题，比如fork子进程的时候会完全拷贝内存，导致信息泄露, 引入了在madvise的新的option(<code>MADV_DONTFORK</code>)；还是非常佩服这些公司，能够持续的在这些基础技术上面做投入</p>
</li>
<li><p><a href="https://draveness.me/docker" target="_blank" rel="external">Docker 核心技术与实现原理</a> :  非常不错的docker技术的普及和介绍</p>
</li>
<li><p><a href="https://www.opengarden.com/meshkit.html" target="_blank" rel="external">MeshKit: Mesh networking made easy</a> : 可以支持各设备以<code>P2P</code>的方式交互, 类似于PC上面的P2P，个人觉得随着视频等富媒体的增长，此方向是一个不错的技术选择，但是需要考虑和权衡对用户体验/隐私等方面的保护</p>
</li>
<li><p><a href="https://zhuanlan.zhihu.com/p/31630417" target="_blank" rel="external">拒绝超大coredump - 用backtrace和addr2line搞定异常函数栈</a> : 思路可以总结为自己捕捉段错误的信息, 然后通过<code>backtrace</code>和<code>addr2line</code>打印相应的堆栈信息</p>
</li>
<li><p><a href="http://www.commandlinefu.com/commands/browse/sort-by-votes" target="_blank" rel="external">Commandlinefu</a> : 不少命令还挺有用的，关注<code>curl ifconfig.me</code>, <code>dig +short txt &lt;keyword&gt;.wp.dg.cx</code></p>
</li>
<li><p><a href="https://hackernoon.com/how-ive-captured-all-passwords-trying-to-ssh-into-my-server-d26a2a6263ec" target="_blank" rel="external">How I’ve captured all passwords trying to ssh into my server!</a> : 挺有意思的一个研究, 作者通过重编译<code>openssh</code>使得其可以打印出来登录的用户名和密码, 再基于这些数据做研究，可以发现很多攻击者和登陆者的特征</p>
</li>
</ul>
<h2 id="每周paper"><a href="#每周paper" class="headerlink" title="每周paper"></a>每周paper</h2><h2 id="系统设计"><a href="#系统设计" class="headerlink" title="系统设计"></a>系统设计</h2><ul>
<li><p><a href="https://code.facebook.com/posts/190251048047090/myrocks-a-space-and-write-optimized-mysql-database/" target="_blank" rel="external">MyRocks: A space- and write-optimized MySQL database</a> : <code>MyRocks</code>是基于<code>RocksDB</code>封装的mysql存储引擎,  对存储空间和写优化上面做了大幅的提升, 可以了解下，另外也可以参看<a href="https://code.facebook.com/posts/1478526992216557/migrating-a-database-from-innodb-to-myrocks/" target="_blank" rel="external">Migrating a database from InnoDB to MyRocks</a> 了解他们迁移到Innodb的具体过程</p>
</li>
<li><p><a href="https://weibo.com/ttarticle/p/show?id=2309404179898175459305" target="_blank" rel="external">企业大规模部署机器学习模型的困境</a> : 通过类似于<code>FAAS</code>的方式，提供人工智能相关的服务，可以让其他更多专注于策略的迭代和开发</p>
</li>
</ul>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><ul>
<li><p><a href="https://developers.googleblog.com/2017/09/introducing-tensorflow-datasets.html" target="_blank" rel="external">Introduction to TensorFlow Datasets and Estimators</a> : 关于tensorflow的教程，先收藏mark</p>
</li>
<li><p><a href="https://leastauthority.com/blog/mixnet-intro/" target="_blank" rel="external">Introduction to Mix Networks and Anonymous Communication Networks</a> : 对于混杂网络和匿名通信的系统性介绍, 简单扫了一眼，感觉是非常系统性的文章，先收藏mark</p>
</li>
<li><p><a href="https://cs007.blog/" target="_blank" rel="external">Stanford CS007: Personal Finance For Engineers</a> : 斯坦福的教程，一些对于工程师财务管理的建议和指导，现在的材料多为PPT, 先mark收藏</p>
</li>
<li><p><a href="https://weibo.com/ttarticle/p/show?id=2309404179321597125139" target="_blank" rel="external">【深度长文】为什么微博不像微信一样设计得简洁？</a> : 对产品的思考和分析</p>
</li>
<li><p><a href="https://rafalcieslak.wordpress.com/2013/04/02/dynamic-linker-tricks-using-ld_preload-to-cheat-inject-features-and-investigate-programs/" target="_blank" rel="external">Dynamic linker tricks: Using LD_PRELOAD to cheat, inject features and investigate programs</a> : 我们知道系统在搜索动态链接库的时候会优先加载<code>LD_PRELOAD</code>里面的so, 通过着特性，如果我们构造合适威胁的so，可能对程序的行为有着重大影响，比如随机数生成等</p>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/shanghai01.jpg&quot; alt=&quot;上海外滩&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;工具技巧&quot;&gt;&lt;a href=&quot;#工具技巧&quot; class=&quot;headerlink&quot; title=&quot;工具技巧&quot;&gt;&lt;/a&gt;工具技巧&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;
    
    </summary>
    
    
      <category term="weekly" scheme="http://shevacjs.com/tags/weekly/"/>
    
  </entry>
  
</feed>
