<!DOCTYPE html>
<html>
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  <title>shevacjs home</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="all about IT tech, football">
<meta property="og:type" content="website">
<meta property="og:title" content="shevacjs home">
<meta property="og:url" content="http://shevacjs.com/page/2/index.html">
<meta property="og:site_name" content="shevacjs home">
<meta property="og:description" content="all about IT tech, football">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="shevacjs home">
<meta name="twitter:description" content="all about IT tech, football">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="/webfonts/ptserif/main.css" rel='stylesheet' type='text/css'>
  <link href="/webfonts/source-code-pro/main.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  

</head>

<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container">
    <header id="header">
  <div id="header-outer" class="outer">
    <div id="header-inner" class="inner">
      <a id="main-nav-toggle" class="nav-icon" href="javascript:;"></a>
      <a id="logo" class="logo logo-text" href="/">Shevacjs</a>
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/categories">Categories</a>
        
          <a class="main-nav-link" href="/tags">Tags</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
          <a class="main-nav-link" href="/atom.xml">Rss</a>
        
      </nav>
      <nav id="sub-nav">
        <div id="search-form-wrap">
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://shevacjs.com"></form>
        </div>
      </nav>
    </div>
  </div>
</header>
    <section id="main" class="outer">
      <article id="post-nginx_1_13_10" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/23/nginx_1_13_10/">nginx 1.13.10 版本说明</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2018/03/23/nginx_1_13_10/" class="article-date">
  <time datetime="2018-03-23T03:02:29.000Z" itemprop="datePublished">2018-03-23</time>
</a>
      
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Feature-List"><a href="#Feature-List" class="headerlink" title="Feature List"></a>Feature List</h2><blockquote>
<p>对SSI模块增强，支持set指令，允许插入任何变量</p>
</blockquote>
<ul>
<li>Feature: the “set” parameter of the “include” SSI directive now allows writing arbitrary responses to a variable; the “subrequest_output_buffer_size” directive defines maximum responsesize.</li>
</ul>
<blockquote>
<p>通过 CLOCK_MONOTONIC方式获取时间, 避免时间回转</p>
</blockquote>
<ul>
<li>Feature: now nginx uses clock_gettime( CLOCK_MONOTONIC ) if available, to avoid timeouts being incorrectly triggered on system time changes.</li>
</ul>
<blockquote>
<p>支持日志输出时不做字符转义</p>
</blockquote>
<ul>
<li>Feature: the “escape=none” parameter of the “log_format” directive.</li>
</ul>
<blockquote>
<p>支持打印<code>ALPN</code>变量情况</p>
</blockquote>
<ul>
<li>Feature: the $ssl_preread_alpn_protocols variable in the ngx_stream_ssl_preread_module.</li>
</ul>
<blockquote>
<p>引入gRpc支持</p>
</blockquote>
<ul>
<li>Feature: the ngx_http_grpc_module.</li>
</ul>
<h2 id="快速说明"><a href="#快速说明" class="headerlink" title="快速说明"></a>快速说明</h2><ul>
<li>CLOCK_MONOTONIC方式获取时间 : 正常系统提供两个类型的时间<ul>
<li>time-of-day : 俗称墙上时间，但是墙上时间会通过类似于<code>NTP</code>的协议同步时钟，这个有可能导致时间回退，</li>
<li>CLOCK_MONOTONIC时间 : 理论上对和time-of-day一致，其主要特点是, 基本同步时钟后发现自己时间过快，也不会回退，而是按照一定的算法自己缓慢增加，慢慢保持一致, 也就是能保障这个时间总是<code>单调</code>(MONOTONIC)的</li>
<li>这个问题是分布式系统经常会碰到的，可以深入了解</li>
</ul>
</li>
</ul>
<ul>
<li>“escape=none”支持:<ul>
<li>简单来说, 之前nginx默认对输入的日志变量会进行转义，转义的字符主要是<code>Nginx</code>认为不可见的那部分, 这部分代码实现很精巧，如下:</li>
</ul>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="function"><span class="keyword">static</span> uintptr_t</span></div><div class="line"><span class="title">ngx_http_log_escape</span><span class="params">(u_char *dst, u_char *src, <span class="keyword">size_t</span> size)</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">ngx_uint_t</span>      n;</div><div class="line">    <span class="keyword">static</span> u_char   hex[] = <span class="string">"0123456789ABCDEF"</span>;</div><div class="line"></div><div class="line">    <span class="comment">//建立`escape`的bitmask数组, 一个有 32 * 8 = 256个bit</span></div><div class="line">    <span class="comment">//如果对于bit被mask为1，表明需要转义</span></div><div class="line">    <span class="keyword">static</span> <span class="keyword">uint32_t</span>   escape[] = &#123;</div><div class="line">        <span class="number">0xffffffff</span>, <span class="comment">/* 1111 1111 1111 1111  1111 1111 1111 1111 */</span></div><div class="line"></div><div class="line">                    <span class="comment">/* ?&gt;=&lt; ;:98 7654 3210  /.-, +*)( '&amp;%$ #"!  */</span></div><div class="line">        <span class="number">0x00000004</span>, <span class="comment">/* 0000 0000 0000 0000  0000 0000 0000 0100 */</span></div><div class="line"></div><div class="line">                    <span class="comment">/* _^]\ [ZYX WVUT SRQP  ONML KJIH GFED CBA@ */</span></div><div class="line">        <span class="number">0x10000000</span>, <span class="comment">/* 0001 0000 0000 0000  0000 0000 0000 0000 */</span></div><div class="line"></div><div class="line">                    <span class="comment">/*  ~&#125;| &#123;zyx wvut srqp  onml kjih gfed cba` */</span></div><div class="line">        <span class="number">0x80000000</span>, <span class="comment">/* 1000 0000 0000 0000  0000 0000 0000 0000 */</span></div><div class="line"></div><div class="line">        <span class="number">0xffffffff</span>, <span class="comment">/* 1111 1111 1111 1111  1111 1111 1111 1111 */</span></div><div class="line">        <span class="number">0xffffffff</span>, <span class="comment">/* 1111 1111 1111 1111  1111 1111 1111 1111 */</span></div><div class="line">        <span class="number">0xffffffff</span>, <span class="comment">/* 1111 1111 1111 1111  1111 1111 1111 1111 */</span></div><div class="line">        <span class="number">0xffffffff</span>, <span class="comment">/* 1111 1111 1111 1111  1111 1111 1111 1111 */</span></div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    <span class="keyword">while</span> (size) &#123;</div><div class="line">        <span class="comment">// 判断其mask位是否为1</span></div><div class="line">        <span class="comment">// *src &gt;&gt; 5 为去其高3位，用于获取数组的便宜量</span></div><div class="line">        <span class="comment">// 1U &lt;&lt; (*src &amp; 0x0f) 为获取具体在数据bit mask的位置</span></div><div class="line">        <span class="keyword">if</span> (escape[*src &gt;&gt; <span class="number">5</span>] &amp; (<span class="number">1U</span> &lt;&lt; (*src &amp; <span class="number">0x1f</span>))) &#123;</div><div class="line">            *dst++ = <span class="string">'\\'</span>;</div><div class="line">            *dst++ = <span class="string">'x'</span>;</div><div class="line">            *dst++ = hex[*src &gt;&gt; <span class="number">4</span>];</div><div class="line">            *dst++ = hex[*src &amp; <span class="number">0xf</span>];</div><div class="line">            src++;</div><div class="line"></div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            *dst++ = *src++;</div><div class="line">        &#125;</div><div class="line">        size--;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> (<span class="keyword">uintptr_t</span>) dst;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>ssl_preread_alpn_protocols变量 :<ul>
<li>这里面大家可以关注<code>ALPN</code>协议，他和<code>NPN</code>都是用于在TLS交互的时候进行协议的协商, 可以关注之前的文章<a href="https://imququ.com/post/enable-alpn-asap.html" target="_blank" rel="external">为什么我们应该尽快支持 ALPN？</a><br>，大概区别如下: <ul>
<li>NPN 是服务端发送所支持的 HTTP 协议列表，由客户端选择；而 ALPN 是客户端发送所支持的 HTTP 协议列表，由服务端选择；</li>
<li>NPN 的协商结果是在 Change Cipher Spec 之后加密发送给服务端；而 ALPN 的协商结果是通过 Server Hello 明文发给客户端；</li>
</ul>
</li>
<li>可以总结为ALPN是趋势，也是未来的标准，但是短期内各方厂商的支持情况并不理想</li>
</ul>
</li>
</ul>

      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nginx/">nginx</a></li></ul>

      </footer>
    
  </div>
  
</article>








    
      <article id="post-20180304" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/06/20180304/">weekly of 20180304</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2018/03/06/20180304/" class="article-date">
  <time datetime="2018-03-06T04:28:45.000Z" itemprop="datePublished">2018-03-06</time>
</a>
      
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="工具技巧"><a href="#工具技巧" class="headerlink" title="工具技巧"></a>工具技巧</h3><ul>
<li><p><a href="https://developers.googleblog.com/2018/02/announcing-flutter-beta-1.html" target="_blank" rel="external">Announcing Flutter beta 1: Build beautiful native apps</a> :  Flutter is Google’s new mobile UI framework that helps developers craft high-quality native interfaces for both iOS and Android, 其采用<code>Dart</code>语言, 有兴趣的可以去进一步了解</p>
</li>
<li><p><a href="https://github.com/pornin/CTTK" target="_blank" rel="external">CTTK: Constant-Time Toolkit</a> : A collection of constant-time implementations of primitive operations that may help in writing constant-time code, including non-cryptographic constant-time code</p>
</li>
<li><p><a href="https://blog.cloudflare.com/memcrashed-major-amplification-attacks-from-port-11211/" target="_blank" rel="external">Memcrashed - Major amplification attacks from UDP port 11211</a> : 基于Memcached的放大攻击, 是本周Github DDOS攻击的主要恶意流量</p>
</li>
</ul>
<h3 id="系统设计"><a href="#系统设计" class="headerlink" title="系统设计"></a>系统设计</h3><ul>
<li><p><a href="https://textslashplain.com/2018/02/14/understanding-the-limitations-of-https/" target="_blank" rel="external">Understanding the Limitations of HTTPS</a> : HTTPS协议不是银弹，本文系统化的介绍HTTPS协议的一些弊端，包括<code>Privacy Limitations</code>, <code>Real-world Implementation Limitations</code>等，可以加深对整个https协议和网络栈的理解</p>
</li>
<li><p><a href="https://developers.redhat.com/blog/2018/02/22/container-terminology-practical-introduction/#h.dqlu6589o789" target="_blank" rel="external">A Practical Introduction to Container Terminology</a> : 关于容器化技术的概述性介绍，值得收藏</p>
</li>
<li><p><a href="http://www.ruanyifeng.com/blog/2018/03/http2_server_push.html" target="_blank" rel="external">HTTP/2 服务器推送（Server Push）教程</a> : 一个入门的HTTP2推送介绍, 可以手动试验下</p>
</li>
<li><p><a href="http://www.techug.com/post/zero-knowledge-and-blockchains.html" target="_blank" rel="external">白话区块链加密货币中的零知识证明（Zero-Knowledge Proof）</a> : 零知识证明的介绍, 。零知识证明的本质就是在不揭晓我所知道或拥有的某样东西的前提下，向别人证明我有很大几率（这点很重要，零知识证明说到底是一个概率上的证明）确实知道或拥有这个东西。其已经应用在ZCASH等区块链场景下, 可以进一步了解的文章包括<a href="https://www.leiphone.com/news/201712/ACn6T08O3cyhu8DN.html" target="_blank" rel="external">详解零知识证明的四大基础技术，如何与以太坊发生反应</a>, <a href="https://zh.wikipedia.org/wiki/%E4%BA%A4%E4%BA%92%E5%BC%8F%E8%AF%81%E6%98%8E%E7%B3%BB%E7%BB%9F" target="_blank" rel="external">交互式证明系统</a></p>
</li>
</ul>
<h3 id="琐事小记"><a href="#琐事小记" class="headerlink" title="琐事小记"></a>琐事小记</h3><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ul>
<li><p><a href="https://azure.microsoft.com/en-us/services/cosmos-db/?v=17.45b" target="_blank" rel="external">Azure Cosmos DB</a> : A database for extremely low latency and massively scalable applications anywhere in the world, with native support for NoSQL; 微软新出的之前多种Nosql接口的全球数据库</p>
</li>
<li><p><a href="https://github.com/yujiosaka/headless-chrome-crawler" target="_blank" rel="external">headless-chrome-crawler</a> : Distributed crawler powered by Headless Chrome</p>
</li>
<li><p><a href="https://blog.riseml.com/benchmarking-googles-new-tpuv2-121c03b71384" target="_blank" rel="external">Benchmarking Google’s new TPUv2</a> : TPUs compare very well, both, performance-wise and economically, to the latest generations of GPUs.</p>
</li>
<li><p><a href="https://news.ycombinator.com/item?id=16473482" target="_blank" rel="external">101 NumPy Exercises for Data Analysis (Python)</a> : 可以针对性的提高你对<code>Numpy</code>这个库的掌握程度, 其他可以推荐的包括<a href="https://github.com/ajcr/100-pandas-puzzles" target="_blank" rel="external">pandas</a></p>
</li>
</ul>
<ul>
<li>mark下个人感觉不错的关于区块链的文章/资料(现在是信息过剩) :<ul>
<li><a href="https://36kr.com/p/5075268.html" target="_blank" rel="external">比特币从“不了解”到“被误解”——详解区块链技术</a> : 很好的一个入门介绍, 可以先阅读这篇文章</li>
<li><a href="http://ibloodline.com/articles/2018/01/22/mechanics.html" target="_blank" rel="external">Bloodline’s Blog</a> : 比较深入/细节的介绍比特币/区块链的相关技术实现</li>
<li><a href="https://www.jianshu.com/p/8ea9a9a21f1f" target="_blank" rel="external">谈谈自己对比特币脚本的理解</a> : 侧重介绍比特币的脚本机制和实现</li>
<li><a href="https://yeasy.gitbooks.io/blockchain_guide/content/" target="_blank" rel="external">区块链技术指南</a> : 内容不是很对自己胃口，但是对于一些基本概念有比较详细介绍</li>
<li><a href="http://www.aquagemini.com/bitcoin-difficulty-adjust/" target="_blank" rel="external">深入理解比特币系列（25）: 难度系数及调整周期</a> : 对于一些针对性的问题进行讨论</li>
<li><a href="https://www.coursera.org/learn/cryptocurrency" target="_blank" rel="external">课程: Bitcoin and Cryptocurrency Technologies</a></li>
<li><a href="https://github.com/chaozh/awesome-blockchain" target="_blank" rel="external">awesome-blockchain</a> : 收集所有区块链(BlockChain)技术开发相关资料，包括Fabric和Ethereum开发资料</li>
</ul>
</li>
</ul>
<ul>
<li><p><a href="https://www.miaopai.com/show/ZqUFOkk1NeWXcgL12vzhIrkX~uh72G4E77S8pw__.htm" target="_blank" rel="external">The clearest explanation of Paxos I’ve seen so far</a> : 先收藏mark, 周末review一遍</p>
</li>
<li><p><a href="https://developers.google.cn/machine-learning/crash-course/" target="_blank" rel="external">Google: 机器学习速成课程</a> : Google 制作的节奏紧凑、内容实用的机器学习简介课程</p>
</li>
</ul>

      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/weekly/">weekly</a></li></ul>

      </footer>
    
  </div>
  
</article>








    
      <article id="post-20180225" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/06/20180225/">weekly of 20180225</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2018/03/06/20180225/" class="article-date">
  <time datetime="2018-03-06T04:27:45.000Z" itemprop="datePublished">2018-03-06</time>
</a>
      
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="工具技巧"><a href="#工具技巧" class="headerlink" title="工具技巧"></a>工具技巧</h3><ul>
<li><p><a href="https://instantdomainsearch.com/" target="_blank" rel="external">Use streaming JSON to speed up your website</a> : 作者提出了，通过http的chunk机制以及Json的<a href="https://github.com/eBay/jsonpipe" target="_blank" rel="external">jsonpipe library</a>来断点, 分片传输结果数据, 可以参考下</p>
</li>
<li><p><a href="https://mp.weixin.qq.com/s?__biz=MzIwMzg1ODcwMw==&amp;mid=2247487440&amp;idx=1&amp;sn=230462b054753c6d0a0a155f82ed9993&amp;chksm=96c9b9b0a1be30a624890e1f529058a9ca5b6206bfc9179ecd05843cc78b563599ade9967758#rd" target="_blank" rel="external">LLVM：Swift、Rust等语言背后那个默默付出的女人</a> : 有点标题党，不错这篇文章对LLVM的功能，应用场景，以及不足之处都有简单的介绍，可以了解LLVM的优缺点</p>
</li>
<li><p><a href="http://nginx.org/en/CHANGES" target="_blank" rel="external">Nginx: 1.13.9</a> : Nginx的最新版本, 支持<code>HTTP/2 server push support; the &quot;http2_push&quot; and &quot;http2_push_preload&quot; directives.</code>, 详细的用法和机制可以参考Nginx官方博客的<a href="https://www.nginx.com/blog/nginx-1-13-9-http2-server-push/" target="_blank" rel="external">Introducing HTTP/2 Server Push with NGINX 1.13.9</a> 这篇文章</p>
</li>
</ul>
<h3 id="系统设计"><a href="#系统设计" class="headerlink" title="系统设计"></a>系统设计</h3><ul>
<li><p><a href="https://muratbuffalo.blogspot.com/2018/02/paper-review-ipfs-content-addressed.html" target="_blank" rel="external">Paper review. IPFS: Content addressed, versioned, P2P file system</a> : IPFS最近被普遍认为会是一个改变下一步互联网的技术，其非中心化的特性以及基于内容hash的索引使得我们在内容安全，查找等多方面都有进一步的优势，作者肯定其思路和创意，同时也提出了一些对IPFS的看法，比如说P2P的网络如何和移动设备关联推广起来, P2P的内容管理对现在中心化的产品以及交互的改变(比如Googl如何索引内容)等, 可以加深对整个IPFS的理解和认识</p>
</li>
<li><p><a href="http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.62.7953&amp;rep=rep1&amp;type=pdf" target="_blank" rel="external">Scalable Bloom Filters(PDF)</a> : 作者介绍了一个可扩展的布隆过滤器方法, 核心思路是通过增加新的slot来构建一定数量和准确率要求下的过滤器</p>
</li>
</ul>
<h3 id="琐事小记"><a href="#琐事小记" class="headerlink" title="琐事小记"></a>琐事小记</h3><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ul>
<li><p><a href="https://github.com/Submanifold/latex-mimosis" target="_blank" rel="external">latex-mimosis: A minimal &amp; modern template for your thesis</a> : 一个论文/Paper的LaTex的模板, 个人感觉还是很优雅的，这几天有空完全熟悉下</p>
</li>
<li><p><a href="https://www.checkbot.io/" target="_blank" rel="external">Checkbot: Test your site follows 50+ SEO, speed &amp; security best practices</a> : 一个检验特定网站是否满足一些SEO规则的Chrome扩展，可以检测包括死链，是否页面/标题重复等特性</p>
</li>
<li><p><a href="https://hackernoon.com/securing-your-linux-web-server-2be683c223eb" target="_blank" rel="external">Securing your Linux web server</a> : 介绍了如何防护个人的web server，从帐号保护，运行时进程行为监控等多方面进行；不过介绍的太过琐碎，感觉此类问题最好能够交付出成套的解决方案</p>
</li>
<li><p><a href="https://mp.weixin.qq.com/s?__biz=MjM5MDE0Mjc4MA==&amp;mid=2651001305&amp;idx=1&amp;sn=1593b0a727a2f62de331165096274ff7" target="_blank" rel="external">春节假期技术圈都发生了哪些大新闻？</a> : 可以简单了解下</p>
</li>
<li><p><a href="https://wx4.sinaimg.cn/mw690/006lALW6ly1fop7cqcl9wj30sy2lsq9w.jpg" target="_blank" rel="external">Google内部的一些核心技术，以及外部对应的开源项目整理</a> : 可以关注下<code>Dremel UI</code>, <code>Blaze</code>, <code>styleguide</code>, 其中<code>Dremel UI</code>对应着<a href="https://redash.io/" target="_blank" rel="external">redash</a></p>
</li>
<li><p><a href="Industrial-Strength Natural Language Processing">spaCy</a> : 一个这次多语言的NLP工具，不过现在并不支持中文，看Demo感觉入门应该挺方便的</p>
</li>
<li><p><a href="http://cockpit-project.org/" target="_blank" rel="external">Cockpit</a> : Cockpit is a server manager that makes it easy to administer your GNU/Linux servers via a web browser</p>
</li>
<li><p><a href="https://github.com/google/pprof" target="_blank" rel="external">Google: Pprof</a> : pprof is a tool for visualization and analysis of profiling data, 一个可视化pprof数据的工具, 可惜没有示意图</p>
</li>
</ul>

      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/weekly/">weekly</a></li></ul>

      </footer>
    
  </div>
  
</article>








    
      <article id="post-20180218" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/02/20/20180218/">weekly of 20180218</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2018/02/20/20180218/" class="article-date">
  <time datetime="2018-02-19T16:09:45.000Z" itemprop="datePublished">2018-02-20</time>
</a>
      
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><img src="/images/Austria2.jpg" alt="日本-富士山"></p>
<h3 id="工具技巧"><a href="#工具技巧" class="headerlink" title="工具技巧"></a>工具技巧</h3><ul>
<li><p><a href="https://scotthelme.co.uk/enforcing-the-use-of-sri/" target="_blank" rel="external">Enforcing the use of SRI</a> : SRI策略是CSP新引入的一个策略, 通过<code>SRI</code>可以保障外链的资源(包括js/css), 要和代码里面的签名哈希一致, 避免受到这个方面的攻击影响, 可以同时参考作者的另外一篇文章<a href="https://scotthelme.co.uk/subresource-integrity/" target="_blank" rel="external">Subresource Integrity: Securing CDN loaded assets</a></p>
</li>
<li><p><a href="https://github.com/inspector-repl/inspector" target="_blank" rel="external">Inspector: A drop-anywhere C++ REPL</a> : <code>REPL</code>(Read–Eval–Print Loop), also known as an interactive toplevel or language shell, 他支持对C++代码做交互式的处理，类似于GDB里面的debug状态，可以参看<a href="https://news.ycombinator.com/item?id=16360738" target="_blank" rel="external">Hacker News</a>上面的讨论</p>
</li>
<li><p><a href="https://latency.apex.sh/" target="_blank" rel="external">LATENCY</a> : Global latency testing tool, 可以测试不同域名在全球不同区域的响应速度</p>
</li>
<li><p><a href="http://jmespath.org/" target="_blank" rel="external">JMESPath</a> : JMESPath is a query language for JSON,  类似于<a href="https://stedolan.github.io/jq/" target="_blank" rel="external">JQ</a>，不过语法上面好像更复杂</p>
</li>
</ul>
<h3 id="系统设计"><a href="#系统设计" class="headerlink" title="系统设计"></a>系统设计</h3><ul>
<li><p><a href="https://zwischenzugs.com/2011/08/29/my-favourite-secret-weapon-strace/" target="_blank" rel="external">My Favourite Secret Weapon – strace</a> : 文章系统介绍<code>strace</code>的用法以及作用, 不过从这篇文章来看<a href="http://www.brendangregg.com/blog/2014-05-11/strace-wow-much-syscall.html" target="_blank" rel="external">strace Wow Much Syscall</a>, <code>strace</code>在机制原理上面存在性能瓶颈(通过ptrace的方法，没遇到系统调用就暂停源进程，其后分析数据), 故建议使用类似于<a href="http://www.brendangregg.com/perf.html#More" target="_blank" rel="external">perf trace</a>, <code>sysdig</code>之类的工具</p>
</li>
<li><p><a href="https://news.ycombinator.com/item?id=16365413" target="_blank" rel="external">Nginx HTTP/2 server push support</a> : Nginx也要支持Http 2的server push机制, 原文是具体的代码实现，后者的hacker news上面的讨论，其实对http2的完整支持，nginx相对而言还是比较落后的，但是一旦支持之后，个人决定对于产品的生态链的收敛还是非常有意义的</p>
</li>
<li><p><a href="http://lefred.be/content/top-10-mysql-8-0-features-for-dbas-ops/" target="_blank" rel="external">TOP 10 MySQL 8.0 features for DBAs &amp; OPS</a> : MySQL 8的一些新特性, 个人觉得可以关注的特性包括<code>Removing Query Cache</code>, <code>Faster &amp; More Complete Performance Schema (Histograms, Indexes, …) and Information Schema</code>, <code>Persistent Global Variables</code> etc</p>
</li>
<li><p><a href="https://code.facebook.com/posts/166966743929963/how-production-engineers-support-global-events-on-facebook/" target="_blank" rel="external">How production engineers support global events on Facebook</a> : <code>Facebook Live On</code>产品介绍其如何应对预期流量高峰(比如圣诞，新年)的方法和手段，包括常规的流量预估，压测，方法论上面没有太多新意</p>
</li>
</ul>
<h3 id="琐事小记"><a href="#琐事小记" class="headerlink" title="琐事小记"></a>琐事小记</h3><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ul>
<li><p><a href="https://timkadlec.com/remembers/2018-02-14-the-two-faces-of-amp/" target="_blank" rel="external">The Two Faces of AMP</a> : 本文讨论AMP的两面性，一方面，从技术方面，其提供的能力让web mobile端的体验有了质的提升，另外一方面，Google也说明会提升基于AMP网站的rank排序，对此多少web开发者持反对态度，这种捆绑销售与开放互联网的精神相悖</p>
</li>
<li><p><a href="https://news.ycombinator.com/item?id=16385440" target="_blank" rel="external">A BRIEF GLANCE AT HOW VARIOUS TEXT EDITORS MANAGE THEIR TEXTUAL DATA</a>: 对于场景编辑器的buffer机制的概要说明, 类似于之前同样推荐的文章，建议大家重点关注<a href="https://en.wikipedia.org/wiki/Gap_buffer" target="_blank" rel="external">Gap buffer</a></p>
</li>
</ul>
<ul>
<li><p><a href="https://news.ycombinator.com/item?id=16375938" target="_blank" rel="external">DTRACE FOR LINUX; ORACLE DOES THE RIGHT THING</a> : Oracle将<code>Dtrace</code>的许可协议改为<code>GPL</code>, 普遍认为这个会对于dtrace在Linux生态的发展起到推进作用，另外一个方面，现在Linux生态其实有了不少可以trace/probe的工具，包括<code>eBPF</code>，<code>systemtap</code>, 后面这些工具如何发展还得看各自生态的建设情况</p>
</li>
<li><p><a href="https://mp.weixin.qq.com/s/2j6mpmsd_vb1gCHcjosODg" target="_blank" rel="external">聊聊微软刚发布的区块链去中心化身份识别系统DID</a> : 关注. 文末有不少区块链的参考信息，有更多兴趣可以阅读下</p>
</li>
<li><p><a href="https://github.com/danielgtaylor/jpeg-archive" target="_blank" rel="external">JPEG Archive</a> : Utilities for archiving photos for saving to long term storage or serving over the web</p>
</li>
<li><p><a href="https://github.com/pxgm/awesome-markdown-alternatives" target="_blank" rel="external">Awesome Markdown Alternatives</a> : 还可以参考另外一篇文档<a href="https://blog.jez.io/reach-for-markdown/" target="_blank" rel="external">Reach for Markdown, not LaTeX</a>，介绍基于<code>Markdown</code>, <code>Pandoc</code> 和<code>LaTex</code>组合的工具链</p>
</li>
<li><p><a href="https://blog.sourcerer.io/ascii-art-dead-or-alive-cc237391e5d8" target="_blank" rel="external">ASCII art — dead or alive</a> : 关于ASCII Art的概述，个人决定有时候ASCII的图表在可迁移性和可观性还是不错的, 文章里面的几个工具大家可以参考，包括<a href="https://github.com/dhobsd/asciitosvg" target="_blank" rel="external">asciitosvg</a>, <a href="http://asciiflow.com/" target="_blank" rel="external">asciiflow</a>，<a href="https://en.wikipedia.org/wiki/Cowsay" target="_blank" rel="external">cowsay</a></p>
</li>
</ul>

      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/weekly/">weekly</a></li></ul>

      </footer>
    
  </div>
  
</article>








    
      <article id="post-20180211" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/02/11/20180211/">weekly of 20180211</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2018/02/11/20180211/" class="article-date">
  <time datetime="2018-02-11T03:33:45.000Z" itemprop="datePublished">2018-02-11</time>
</a>
      
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><img src="/images/Japan_Fuji.jpg" alt="日本-富士山"></p>
<h3 id="工具技巧"><a href="#工具技巧" class="headerlink" title="工具技巧"></a>工具技巧</h3><ul>
<li><a href="https://www.ctrl.blog/entry/chrome-adblocker" target="_blank" rel="external">Here’s how Google Chrome’s new ad blocker works</a> : 关于Chrome的广告防御系统的设计和构建, 可以了解整个Chrome反作弊体系的设计思路和理念；感觉Google做多系统和模块设计的系统化和组件化都很强，非常值得学习</li>
</ul>
<ul>
<li><a href="https://blog.harmonicinc.com/apple-backs-av1-what-does-this-mean-for-the-future-of-video-codecs/" target="_blank" rel="external">Apple Backs AV1: What Does This Mean for the Future of Video Codecs</a> : 苹果也会加入并且支持AV1，对于视频编解码生态不大了解的可以参看<a href="http://media.pkusz.edu.cn/achievements/?p=138" target="_blank" rel="external">谁将引领新一代视频编码标准：HEVC、AVS2和AV1性能对比报告</a> 和<a href="http://www.sohu.com/a/198863865_458408" target="_blank" rel="external">下一代开放视频编码标准AV1</a></li>
</ul>
<h3 id="系统设计"><a href="#系统设计" class="headerlink" title="系统设计"></a>系统设计</h3><ul>
<li><p><a href="https://lwn.net/Articles/745590/" target="_blank" rel="external">QUIC as a solution to protocol ossification</a> : 文章讨论了<code>QUIC</code>的设计理念, 其主要面临的问题不仅仅是协议设计上面的优化，还包括如何能支持在现在互联网生态</p>
</li>
<li><p><a href="https://code.facebook.com/posts/471099566618454/2017-year-in-review-building-immersive-experiences/" target="_blank" rel="external">2017 Year in review: Building immersive experiences</a> : Facebook总结2017年在用户沉浸式体验上面的改造，包括在文本方面对于多语言和翻译的支持, 以及在VR以及全景图上面的优化和改进</p>
</li>
<li><p><a href="https://code.facebook.com/posts/348442828901047/aquila-what-s-next-for-high-altitude-connectivity-/" target="_blank" rel="external">Aquila: What’s next for high-altitude connectivity?</a> : Facebook为了提升偏远地区的用户体验和网络可达率, 决定成立<code>Aquila</code>项目，核心的思路是通过一个运行在相对低空的太阳能无人机来提供地空的网络链接支持</p>
</li>
<li><p><a href="https://github.com/maemual/raft-zh_cn/blob/master/raft-zh_cn.md" target="_blank" rel="external">寻找一种易于理解的一致性算法</a> : 对Raft的解释，先mark，到时候给个总结</p>
</li>
</ul>
<h3 id="琐事小记"><a href="#琐事小记" class="headerlink" title="琐事小记"></a>琐事小记</h3><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ul>
<li><p><a href="http://www.calstephens.tech/blog/announcing-ar-planes" target="_blank" rel="external">Announcing AR Planes</a> : 关于AR Plane的一个Demo, 可惜是付费软件，不能试用；不过idea可以参考</p>
</li>
<li><p><a href="https://qianduan.group/posts/5a66f36e0cf6b624d2239c74" target="_blank" rel="external">2018 Web 开发者路线图</a> : 可以对整体技术栈有全局的认识, 另外几张图个人感觉画的非常好，可惜不知道画图软件</p>
</li>
<li><p><a href="https://fosdem.org/2018/schedule/event/introduction/" target="_blank" rel="external">Introduction to LLVM</a> : 关于LLVM的介绍，先mark</p>
</li>
<li><p><a href="https://zhuanlan.zhihu.com/p/33678187" target="_blank" rel="external">Google Project Zero 成员教你如何入门搞安全</a> : 定个小目标, 明天开始对安全相关的研究做进一步的深入学习</p>
</li>
<li><p><a href="https://weibo.com/ttarticle/p/show?id=2309404205853535261184" target="_blank" rel="external">科普: 宇宙奥德赛 — 太阳系之旅</a> : 众多关于太阳系星球科普的文章, 看了一部分非常值得推荐, mark</p>
</li>
<li><p><a href="https://mp.weixin.qq.com/s/Q9ZRHbRI5lkqAn1NLkDzXg" target="_blank" rel="external">纠正你对区块链的认知偏见</a> : 又是一个区块链的文章, 作为最近的业内的风口, 此类的文章不少，希望下来自己也写一篇更具针对性的总结文章</p>
</li>
<li><p><a href="http://www.techug.com/post/webassembly-application-example.html" target="_blank" rel="external">WebAssembly 能干什么？8个WebAssembly 应用案例</a> : 关注WebAssembly在多媒体网页编辑上面的应用，希望能够对一些PGC/UGC内容的生产带来不一样的体验</p>
</li>
</ul>

      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/weekly/">weekly</a></li></ul>

      </footer>
    
  </div>
  
</article>








    
      <article id="post-20180121" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/02/11/20180121/">weekly of 20180121</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2018/02/11/20180121/" class="article-date">
  <time datetime="2018-02-11T03:32:45.000Z" itemprop="datePublished">2018-02-11</time>
</a>
      
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><img src="/images/Austria_02.jpg" alt="奥地利"></p>
<h3 id="工具技巧"><a href="#工具技巧" class="headerlink" title="工具技巧"></a>工具技巧</h3><ul>
<li><p><a href="https://blog.cloudflare.com/syn-packet-handling-in-the-wild/" target="_blank" rel="external">SYN packet handling in the wild</a> : 关于TCP SYN交互和实现的深入讨论，包括内核和应用程序对于<code>syn flood</code>, <code>syn queue</code>, <code>accept queue</code>的介绍</p>
</li>
<li><p><a href="https://mp.weixin.qq.com/s?__biz=MzU3MDM4OTE1Mw==&amp;mid=2247483680&amp;idx=1&amp;sn=96c8379db26115cb6e166ce0ef5bdc1d&amp;scene=45#wechat_redirect" target="_blank" rel="external">揭秘超分辨率的正确打开方式</a> : 具体介绍超分图片背后的理念，以及在微信的应用和效果，手百现在也在推动此类的事情。对于超分的应用场景也做了比较好的分析和介绍</p>
</li>
</ul>
<h3 id="系统设计"><a href="#系统设计" class="headerlink" title="系统设计"></a>系统设计</h3><ul>
<li><p><a href="http://www.dwmkerr.com/the-death-of-microservice-madness-in-2018/" target="_blank" rel="external">The Death of Microservice Madness in 2018</a> : 对微服务化的又一次系统性概述，分析，对于希望或者想要设计更理想业务模式的同学而言，是个很好的思路学习机会，也有<a href="http://www.jdon.com/49261" target="_blank" rel="external">中文翻译版</a></p>
</li>
<li><p><a href="https://blog.cloudflare.com/why-tls-1-3-isnt-in-browsers-yet/" target="_blank" rel="external">Why TLS 1.3 isn’t in browsers yet</a> : 随着<code>TLS 1.3</code>的规范落地，其业务落地也是需要重点考虑的问题，然而现实情况是，由于一些<code>middlebox</code>在实现等兼容性的问题, 浏览器其实并不能透明的从<code>TLS 1.2</code>升级到<code>TLS 1.3</code>, 作者具体分析了这里面的一些风险和问题, 包括协议设计上面的兼容性问题等等，整体下来可以加深对TLS协议的理解</p>
</li>
<li><p><a href="https://mp.weixin.qq.com/s/8KYlDIhYmF0jCpbdBsIdcw" target="_blank" rel="external">如何节省1T图片带宽？ 解密极致图像压缩</a> : 腾讯的团队，分别介绍了在<code>WebP</code>, 自研<code>WXAM</code>, 以及<code>guetzli</code>的落地经验。两个总结, 一个是腾讯在这个方面还是做了较多的研究和分析的，文章分享的问题都是比较干货的；其次是, 虽然之前也考虑落地过<code>guetzli</code>, 但没有成功, 整体来说, 执行力还是太差了</p>
</li>
<li><p><a href="http://www.arkteam.net/?p=3390" target="_blank" rel="external">Deemon:自动化CSRF安全检测框架</a> : 关于自动化<code>CSRF</code>攻击检测的设计理念, 一些东西没有完全理解，先mark</p>
</li>
</ul>
<h3 id="琐事小记"><a href="#琐事小记" class="headerlink" title="琐事小记"></a>琐事小记</h3><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ul>
<li><p><a href="https://blog.cloudflare.com/2017-holiday-reading-from-the-cloudflare-blog/" target="_blank" rel="external">Technical reading from the Cloudflare blog for the holidays</a> : 可以认为是2017年<a href="https://blog.cloudflare.com/" target="_blank" rel="external">CloudFlare博客</a>的精选, 里面文章质量都不错，可以mark关注下</p>
</li>
<li><p><a href="https://www.nginx.com/blog/modsecurity-apache-struts-cve-2017-5638/" target="_blank" rel="external">Using ModSecurity to Virtual Patch Apache Struts CVE-2017-5638</a> : 对于一些紧急的线上安全问题, 使用类似于<code>ModSecurtiy</code>的安全策略可以快速止损, 具体nginx的modsecurity的文档可以参看<a href="https://www.nginx.com/resources/library/modsecurity-3-nginx-quick-start-guide/" target="_blank" rel="external">ModSecurity 3.0 and NGINX: Quick Start Guide</a></p>
</li>
<li><p><a href="https://www.gatesnotes.com/Books/Enlightenment-Now" target="_blank" rel="external">Bill Gates: My new favorite book of all time</a> : 作者推荐了一本新书<a href="https://www.amazon.cn/dp/0525559027/" target="_blank" rel="external">Enlightenment Now: The Case for Reason, Science, Humanism, and Progress</a>, 现在英文版刚才出来</p>
</li>
<li><p><a href="http://zulko.github.io/moviepy/getting_started/getting_started.html" target="_blank" rel="external">MoviePy: Video editing with Python</a> : 一个Python的视频编辑库, 可以让你快速做一些视频Gif抽取等工作, 但并不擅长”You only need to do frame-by-frame video analysis “, “You only want to convert a video file, or turn a series of image files into a movie”, 可以先mark关注</p>
</li>
<li><p><a href="https://mp.weixin.qq.com/s/Law7FpS53TjrDrzSMCtcVg" target="_blank" rel="external">低调现身北京的吴恩达，刚刚给人工智能公司下了个定义</a> : 关于传统公司，互联网公司和人工智能公司的定义和理解；其一直强调人工智能技术会想电能等成为企业和产业改造的源动力, 里面的关键在于数据驱动思想的注入以及和行业的深度结合</p>
</li>
</ul>

      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/weekly/">weekly</a></li></ul>

      </footer>
    
  </div>
  
</article>








    
      <article id="post-20180114" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/01/15/20180114/">weekly of 20180114</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2018/01/15/20180114/" class="article-date">
  <time datetime="2018-01-15T10:28:45.000Z" itemprop="datePublished">2018-01-15</time>
</a>
      
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><img src="/images/Barcelona_Seaside.jpg" alt="巴塞罗那-海边"></p>
<h3 id="工具技巧"><a href="#工具技巧" class="headerlink" title="工具技巧"></a>工具技巧</h3><ul>
<li><p><a href="https://www.netguru.co/codestories/nginx-tutorial-performance" target="_blank" rel="external">Nginx Tutorial #2: Performance</a> : 关于nginx的介绍文章，这篇重点介绍nginx在性能优化方向做的事情，详细说明了<code>TCP_NODEALY</code>, <code>sendfile</code>等特性, 非常值得学习 </p>
</li>
<li><p><a href="http://servercoder.com/2018/01/10/protobuf-usages/" target="_blank" rel="external">你真的用对protobuf了吗?</a> : Protobuf使用的一些tips</p>
</li>
<li><p><a href="https://zoumiaojiang.com/article/common-web-security/" target="_blank" rel="external">常见 Web 安全攻防总结</a> : 概述的还是非常全面的，包括<code>XSS</code>, <code>CSRF</code>, <code>SQL注入</code></p>
</li>
<li><p><a href="http://facebook.github.io/zstd/" target="_blank" rel="external">Zstandard</a> : “Zstandard is a real-time compression algorithm, providing high compression ratios, It also offers a special mode for small data, called dictionary compression, and can create dictionaries from any sample set”; 后面的特性值得关注</p>
</li>
</ul>
<h3 id="系统设计"><a href="#系统设计" class="headerlink" title="系统设计"></a>系统设计</h3><ul>
<li><p><a href="https://buoyant.io/2017/04/25/whats-a-service-mesh-and-why-do-i-need-one/" target="_blank" rel="external">What’s a service mesh? And why do I need one?</a> : 关于Service Mesh的初步介绍, 去年中旬到现在，是微服务框架的一个很多的概念, 其他可以参考的文章包括<a href="https://istio.io/docs/" target="_blank" rel="external">Istio Document</a>, <a href="https://mp.weixin.qq.com/s?__biz=MjM5MDE0Mjc4MA==&amp;mid=2650998746&amp;idx=1&amp;sn=5ef8234abc6855482db64b581e4e9a9a" target="_blank" rel="external">Service Mesh：下一代微服务？</a>, <a href="https://mp.weixin.qq.com/s?__biz=MzU0MTMyMDg1NQ==&amp;mid=2247483697&amp;idx=1&amp;sn=b5fdd3af4ae352942820cec9280257c3" target="_blank" rel="external">演讲实录 | Service Mesh 时代的选边与站队</a>, <a href="http://dockone.io/article/3022" target="_blank" rel="external">使用Istio治理微服务入门</a>, 感觉和自己之前琐碎梳理的想法很一致, 需要进一步提升对问题和解决方案的归纳总结能力</p>
</li>
<li><p><a href="http://blog.cnbang.net/tech/3531/" target="_blank" rel="external">移动 APP 网络优化概述</a> : 概括性的介绍了移动APP的网络优化思路，包括在弱网情况下的优化策略</p>
</li>
<li><p><a href="https://www.bbsmax.com/A/kmzLLLolzG/" target="_blank" rel="external">TLS协议分析 与 现代加密通信协议设计</a> : 对TLS和密码技术的非常全面的介绍，是之前个人比较想写的一类文章，非常赞，先mark</p>
</li>
<li><p><a href="https://mp.weixin.qq.com/s/6V-zQYwvWuvu3bwtkpaM7w" target="_blank" rel="external">Jeff Dean晒谷歌大脑成绩单，TPU、AutoML、TensorFlow等重大突破</a> : 真心佩服这些无论在高屋建瓴还是技术细节方面，都能考虑周全，推进落地的人员,  其整体战略目标是非常清楚的</p>
</li>
</ul>
<h3 id="琐事小记"><a href="#琐事小记" class="headerlink" title="琐事小记"></a>琐事小记</h3><ul>
<li><a href="https://www.gnu.org/software/gawk/manual/html_node/Reference-to-Elements.html" target="_blank" rel="external">AWK: Referring to an Array Element</a> : 在AWK里面直接使用<code>array[index-expression]</code>是有副作用的，awk内部会自动为此index生成一个emtpy value, 所以判断一个arry的某个index是否存在，最合理的办法是<code>if inx in array</code>，而不是<code>array[index] == &quot;&quot;</code>, 也可以参看<a href="https://www.gnu.org/software/gawk/manual/html_node/Array-Intro.html#Array-Intro" target="_blank" rel="external">AWK:Introduction to Arrays</a></li>
</ul>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ul>
<li><p><a href="https://mp.weixin.qq.com/s?__biz=MzU1NDA4NjU2MA==&amp;mid=2247487608&amp;idx=3&amp;sn=a6392d5028f0f33bfeebf89baf9e2975" target="_blank" rel="external">Facebook开源端到端自动语音识别系统wav2letter</a> : 其是由Facebook AI 研究团队开源的一款简单而高效的端到端自动语音识别系统, 简单看了文档，感觉安装之类的还是很复杂的</p>
</li>
<li><p><a href="https://www.jiqizhixin.com/articles/2018-01-12-5/" target="_blank" rel="external">前端慌不慌？用深度学习自动生成HTML代码</a> : “如何用前端页面原型生成对应的代码一直是我们关注的问题，本文作者根据 pix2code 等论文构建了一个强大的前端代码生成模型，并详细解释了如何利用 LSTM 与 CNN 将设计原型编写为 HTML 和 CSS 网站”</p>
</li>
<li><p><a href="https://mp.weixin.qq.com/s/Zaqj421ASh0kWGnR2ksHJA" target="_blank" rel="external">由全民吃鸡引发的网游加速学习总结</a> : 关于游戏网络速度优化的说明，可以了解国内的网络拓扑的大概情况</p>
</li>
<li><p><a href="https://www.toutiao.com/a6509770828173804045/" target="_blank" rel="external">10张图，看懂今日头条核心算法技术</a> : 初步介绍今日头条的算法策略, 后续应该还会有更详细的说明</p>
</li>
<li><p><a href="https://www.jianshu.com/p/56acbd66d525" target="_blank" rel="external">天天写业务代码很焦虑，怎么破?</a> : 关于业务和技术开发的常规讨论, “每一层技术实现，都服务于上一层，都以上一层的需求为业务”, 里面对于业务和技术的感受的区分点个人还是很认可的</p>
</li>
<li><p><a href="https://news.ycombinator.com/item?id=16140418" target="_blank" rel="external">iOS 11 Security[pdf]</a> : 苹果的官方文档，关于IOS系统安全性的白皮书, 文档写的非常系统，排版也非常漂亮，值得mark学习</p>
</li>
</ul>

      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/weekly/">weekly</a></li></ul>

      </footer>
    
  </div>
  
</article>








    
      <article id="post-nginx_1_13_8" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/01/03/nginx_1_13_8/">nginx 1.13.8 版本说明</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2018/01/03/nginx_1_13_8/" class="article-date">
  <time datetime="2018-01-03T07:17:29.000Z" itemprop="datePublished">2018-01-03</time>
</a>
      
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="原始feature说明"><a href="#原始feature说明" class="headerlink" title="原始feature说明"></a>原始feature说明</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">*) Feature: now nginx automatically preserves the CAP_NET_RAW capability</div><div class="line">   in worker processes when using the &quot;transparent&quot; parameter of the</div><div class="line">   &quot;proxy_bind&quot;, &quot;fastcgi_bind&quot;, &quot;memcached_bind&quot;, &quot;scgi_bind&quot;, and</div><div class="line">   &quot;uwsgi_bind&quot; directives.</div><div class="line"></div><div class="line">*) Feature: improved CPU cache line size detection.</div><div class="line">   Thanks to Debayan Ghosh.</div><div class="line"></div><div class="line">*) Feature: new directives in vim syntax highlighting scripts.</div><div class="line">   Thanks to Gena Makhomed.</div><div class="line">.....</div></pre></td></tr></table></figure>
<p>这个我们主要关注<code>feature1</code>和<code>feature2</code>, 即是:</p>
<ul>
<li>对<code>xxx_bind</code>的指令支持<code>CAP_NET_RAW</code>方式</li>
<li>改进对cpu cache line长度的检测</li>
</ul>
<p>我们分布研究这两个问题的背景以及nginx的解决方案</p>
<h3 id="关于xxx-bind"><a href="#关于xxx-bind" class="headerlink" title="关于xxx_bind"></a>关于xxx_bind</h3><p>我们知道存在类似于<code>proxy_bind</code>, <code>fastcgi_bind</code>, <code>memcached_bind</code>之类的nginx指令，其重要是干嘛的呢? 如下是<a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_bind" target="_blank" rel="external">proxy_bind</a>的官方说明(精简):</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">Syntax:    proxy_bind address [transparent] | off;</div><div class="line">Default:    —</div><div class="line">Context:    http, server, location</div><div class="line"></div><div class="line">Makes outgoing connections to a proxied server originate from the specified local IP address with an optional port (1.11.2). Parameter value can contain variables (1.3.12). The transparent parameter (1.11.0) allows outgoing connections to a proxied server originate from a non-local IP address, for example, from a real IP address of a client:</div><div class="line"></div><div class="line">&gt;&gt;&gt; proxy_bind $remote_addr transparent;</div><div class="line"></div><div class="line">In order for this parameter to work, it is usually necessary to run nginx worker processes with the superuser privileges. On Linux it is not required (1.13.8) as if the transparent parameter is specified, worker processes inherit the CAP_NET_RAW capability from the master process. It is also necessary to configure kernel routing table to intercept network traffic from the proxied server.</div></pre></td></tr></table></figure>
<p>如上, 我们可以总结为<code>proxy_bind</code>实现代理时，和<code>upstream</code>交互，其使用的ip/port是可以调整的，具体包括:</p>
<ol>
<li>绑定本地的其他ip地址 </li>
<li>绑定一个非本地的ip地址 : 这个需要加入<code>transparent</code>参数</li>
</ol>
<p>方法2可以实现真正的透明代理, 不过要具体实现这个功能，需要调整的地方还很多(要保障返回数据报地址是OK的)，具体可以参看nginx的官方blog的文章<a href="https://www.nginx.com/blog/ip-transparency-direct-server-return-nginx-plus-transparent-proxy/" target="_blank" rel="external">IP Transparency and Direct Server Return with NGINX and NGINX Plus as Transparent Proxy</a></p>
<p>回到这次的版本升级的点，可以想像，如果一个机器A想伪造机器B的IP发送请求，是需要一些权限控制的(想想大家之前写的ping程序:) ), 这个传统上面是需要<code>root</code>权限的。显然，这个方案的缺点是，整个nginx都需要以<code>root</code>权限去执行，在安全性和隐私方案是存在风险的。随之，在新的内核和安卓系统强调更多是<a href="http://man7.org/linux/man-pages/man7/capabilities.7.html" target="_blank" rel="external">Capability</a>机制</p>
<p>所以, nginx这次升级的策略就是, 如果存在这个capability，就无需要求root权限了，具体代码如下(添加些许注释): </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">if</span> (NGX_HAVE_PR_SET_KEEPCAPS &amp;&amp; NGX_HAVE_CAPABILITIES)</span></div><div class="line"><span class="comment">/*</span></div><div class="line">* 使用prctl(PR_SET_KEEPCAPS, xxx)的效果是保证即便切换用户, 其capabilities依旧保留</div><div class="line">*/</div><div class="line">        <span class="keyword">if</span> (ccf-&gt;transparent &amp;&amp; ccf-&gt;user) &#123;</div><div class="line">            <span class="keyword">if</span> (prctl(PR_SET_KEEPCAPS, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>) == <span class="number">-1</span>) &#123;</div><div class="line">                ngx_log_error(NGX_LOG_EMERG, cycle-&gt;<span class="built_in">log</span>, ngx_errno,</div><div class="line">                              <span class="string">"prctl(PR_SET_KEEPCAPS, 1) failed"</span>);</div><div class="line">                <span class="comment">/* fatal */</span></div><div class="line">                <span class="built_in">exit</span>(<span class="number">2</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></div><div class="line"></div><div class="line">...</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">if</span> (NGX_HAVE_CAPABILITIES)</span></div><div class="line">        <span class="keyword">if</span> (ccf-&gt;transparent &amp;&amp; ccf-&gt;user) &#123;</div><div class="line">            <span class="class"><span class="keyword">struct</span> __<span class="title">user_cap_data_struct</span>    <span class="title">data</span>;</span></div><div class="line">            <span class="class"><span class="keyword">struct</span> __<span class="title">user_cap_header_struct</span>  <span class="title">header</span>;</span></div><div class="line"></div><div class="line">            ngx_memzero(&amp;header, <span class="keyword">sizeof</span>(struct __user_cap_header_struct));</div><div class="line">            ngx_memzero(&amp;data, <span class="keyword">sizeof</span>(struct __user_cap_data_struct));</div><div class="line"></div><div class="line">            header.version = _LINUX_CAPABILITY_VERSION_1;</div><div class="line">            data.effective = CAP_TO_MASK(CAP_NET_RAW);</div><div class="line">            data.permitted = data.effective;</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line">* 设置用户的CAP_NET_RAW权限</div><div class="line">*/</div><div class="line">            <span class="keyword">if</span> (syscall(SYS_capset, &amp;header, &amp;data) == <span class="number">-1</span>) &#123;</div><div class="line">                ngx_log_error(NGX_LOG_EMERG, cycle-&gt;<span class="built_in">log</span>, ngx_errno,</div><div class="line">                              <span class="string">"capset() failed"</span>);</div><div class="line">                <span class="comment">/* fatal */</span></div><div class="line">                <span class="built_in">exit</span>(<span class="number">2</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<h3 id="关于CPU-Cache-Line"><a href="#关于CPU-Cache-Line" class="headerlink" title="关于CPU Cache Line"></a>关于CPU Cache Line</h3><p>关于CPU Cache Line，我们分成三个细化的问题进行研究:</p>
<ol>
<li>CPU Cache 是什么，有什么作用/影响?</li>
<li>Nginx如何实现对CPU Cache Line Size的检测?</li>
<li>Nginx如何应用CPU Cache?</li>
</ol>
<p>下面依次分析</p>
<h4 id="CPU-Cache-作用"><a href="#CPU-Cache-作用" class="headerlink" title="CPU Cache 作用"></a>CPU Cache 作用</h4><p><a href="http://cenalulu.github.io/linux/all-about-cpu-cache/" target="_blank" rel="external">关于CPU Cache – 程序猿需要知道的那些事</a>和<a href="http://www.aristeia.com/TalkNotes/ACCU2011_CPUCaches.pdf" target="_blank" rel="external">CPU Caches and Why You Care</a>这两篇文章对Cpu Cache有非常详细和深刻的说明，可以深入研究之, 简而言之, CPU Cache是一个CPU的硬件Cache，如何合理的利用其特性，可以极大提升程序的性能, 如下是<a href="http://www.aristeia.com/TalkNotes/ACCU2011_CPUCaches.pdf" target="_blank" rel="external">CPU Cache的示意图</a><br>:<br><img src="/images/cpu_cache.png" alt="CPU Cache"></p>
<p>具体地，CPU CACHE是以<code>CPU CACHE LINE</code>为粒度进行组织管理的，不同的cpu其size会有所不同，但一般都是32/64/128位等; 基于次，我们很自然而然的想到，如果要充分利用CPU CACHE，我们的内存地址最好和<code>CPU CACHE LINE SIZE</code>对齐, 这样可以保障较好的cache命中率和cache利用率</p>
<h4 id="Nginx对CPU-CACHE-LINE-SIZE的检测"><a href="#Nginx对CPU-CACHE-LINE-SIZE的检测" class="headerlink" title="Nginx对CPU CACHE LINE SIZE的检测"></a>Nginx对CPU CACHE LINE SIZE的检测</h4><p>这方面，就不详述其推理过程了，直接结论如下(有谬误之处，<a href="mailto:shevacjs@qq.com" target="_blank" rel="external">还请告知</a>) :</p>
<ul>
<li>在<code>configure</code>阶段, 通过获取CPU信息设置<code>NGX_CPU_CACHE_LINE</code>宏变量，在<code>auto/cc/gcc(clang)</code>里面都会有此类的代码，比如:</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">## file: auto/cc/gcc</span></div><div class="line"><span class="keyword">case</span> <span class="variable">$CPU</span> <span class="keyword">in</span></div><div class="line">    pentium)</div><div class="line">        <span class="comment"># optimize for Pentium and Athlon</span></div><div class="line">        CPU_OPT=<span class="string">"-march=pentium"</span></div><div class="line">        NGX_CPU_CACHE_LINE=32</div><div class="line">    ;;</div></pre></td></tr></table></figure>
<ul>
<li>在编译阶段, 验证是否支持<code>sysconf(_SC_LEVEL1_DCACHE_LINESIZE)</code>这个特性，如果支持, 则开启宏<code>NGX_HAVE_LEVEL1_DCACHE_LINESIZE</code>, 大概代码如下:</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line">file: ./src/os/unix/ngx_posix_init.c</div><div class="line">如果宏 NGX_HAVE_LEVEL1_DCACHE_LINESIZE 设置，就通过sysconf获取*/</div><div class="line"><span class="meta">#<span class="meta-keyword">if</span> (NGX_HAVE_LEVEL1_DCACHE_LINESIZE)</span></div><div class="line">    size = sysconf(_SC_LEVEL1_DCACHE_LINESIZE);</div><div class="line">    <span class="keyword">if</span> (size &gt; <span class="number">0</span>) &#123;</div><div class="line">        ngx_cacheline_size = size;</div><div class="line">    &#125;</div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></div></pre></td></tr></table></figure>
<ul>
<li>在运行启动时候获取(编译和运行的机器可能不一样), 所以还需要主动获取，这个里面主要使用<a href="https://en.wikipedia.org/wiki/CPUID#EAX=1:_Processor_Info_and_Feature_Bits" target="_blank" rel="external">cpuid</a>这个指令获取具体的CPU信息, 简要代码如下:</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line">file: ./src/os/unix/ngx_posix_init.c 获取信息</div><div class="line">*/</div><div class="line">ngx_cpuinfo();</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line">file: src/core/ngx_cpuinfo.c</div><div class="line">通过汇编指令获取cpu信息，结果存储在 ngx_cacheline_size</div><div class="line">*/</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">static</span> ngx_inline <span class="keyword">void</span></span></div><div class="line"><span class="title">ngx_cpuid</span><span class="params">(<span class="keyword">uint32_t</span> i, <span class="keyword">uint32_t</span> *buf)</span></div><div class="line">&#123;</div><div class="line"></div><div class="line">    <span class="comment">/*</span></div><div class="line">     * we could not use %ebx as output parameter if gcc builds PIC,</div><div class="line">     * and we could not save %ebx on stack, because %esp is used,</div><div class="line">     * when the -fomit-frame-pointer optimization is specified.</div><div class="line">     */</div><div class="line"></div><div class="line">    __asm__ (</div><div class="line"></div><div class="line">    <span class="string">"    mov    %%ebx, %%esi;  "</span></div><div class="line"></div><div class="line">    <span class="string">"    cpuid;                "</span></div><div class="line">    <span class="string">"    mov    %%eax, (%1);   "</span></div><div class="line">    <span class="string">"    mov    %%ebx, 4(%1);  "</span></div><div class="line">    <span class="string">"    mov    %%edx, 8(%1);  "</span></div><div class="line">    <span class="string">"    mov    %%ecx, 12(%1); "</span></div><div class="line"></div><div class="line">    <span class="string">"    mov    %%esi, %%ebx;  "</span></div><div class="line"></div><div class="line">    : : <span class="string">"a"</span> (i), <span class="string">"D"</span> (buf) : <span class="string">"ecx"</span>, <span class="string">"edx"</span>, <span class="string">"esi"</span>, <span class="string">"memory"</span> );</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="NGINX如何应用CPU-CACHE-LINE"><a href="#NGINX如何应用CPU-CACHE-LINE" class="headerlink" title="NGINX如何应用CPU CACHE LINE"></a>NGINX如何应用CPU CACHE LINE</h4><p>如上，nginx知道<code>cpu cache line size</code>之后，要想办法尽量的把申请的内存地址和<code>cpu cache line size</code>对齐，一个重要的示例就是<code>CRC32</code>的实现，具体如下:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// file: ./src/core/ngx_crc32.c</span></div><div class="line"></div><div class="line"><span class="keyword">ngx_int_t</span> ngx_crc32_table_init(<span class="keyword">void</span>)</div><div class="line">&#123;</div><div class="line">    <span class="comment">//申请空间，注意多申请了 ngx_cacheline_size</span></div><div class="line">    p = ngx_alloc(<span class="number">16</span> * <span class="keyword">sizeof</span>(<span class="keyword">uint32_t</span>) + ngx_cacheline_size, ngx_cycle-&gt;<span class="built_in">log</span>);</div><div class="line">    <span class="keyword">if</span> (p == <span class="literal">NULL</span>) &#123;</div><div class="line">        <span class="keyword">return</span> NGX_ERROR;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//将内存地址和ngx_cacheline_size对齐，注意，由于多申请了</span></div><div class="line">    <span class="comment">//一些空间，即便内存往前偏移一些，也不会发生内存越界</span></div><div class="line">    p = ngx_align_ptr(p, ngx_cacheline_size);</div><div class="line"></div><div class="line">    <span class="comment">// copy </span></div><div class="line">    ngx_memcpy(p, ngx_crc32_table16, <span class="number">16</span> * <span class="keyword">sizeof</span>(<span class="keyword">uint32_t</span>));</div><div class="line">    ngx_crc32_table_short = p;</div><div class="line"></div><div class="line">    ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h3><ul>
<li><a href="https://www.ibm.com/developerworks/cn/linux/sdk/assemble/inline/" target="_blank" rel="external">Linux 中 x86 的内联汇编</a> : 可以用于了解nginx如何使用<code>cpuid</code>这个指令</li>
<li><a href="http://man7.org/linux/man-pages/man7/capabilities.7.html" target="_blank" rel="external">Capabilities - overview of Linux capabilities</a> :  官方的man手册，对<code>capability</code>有个概述</li>
<li><p><a href="http://rk700.github.io/2016/10/26/linux-capabilities/" target="_blank" rel="external">Linux的capabilities机制</a> : 简单的中文说明，可以作为入门了解</p>
</li>
<li><p><a href="http://www.aristeia.com/TalkNotes/ACCU2011_CPUCaches.pdf" target="_blank" rel="external">CPU Caches and Why You Care</a> : 对CPU CACHE有系统的介绍，其他的概述文章还包括<a href="http://cenalulu.github.io/linux/all-about-cpu-cache/" target="_blank" rel="external">关于CPU Cache – 程序猿需要知道的那些事</a>和<a href="https://coolshell.cn/articles/10249.html" target="_blank" rel="external">7个示例科普CPU CACHE</a></p>
</li>
</ul>

      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nginx/">nginx</a></li></ul>

      </footer>
    
  </div>
  
</article>








    
      <article id="post-20171210" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/12/12/20171210/">weekly of 20171210</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2017/12/12/20171210/" class="article-date">
  <time datetime="2017-12-12T07:17:45.000Z" itemprop="datePublished">2017-12-12</time>
</a>
      
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><img src="/images/seu.jpg" alt="SEU四牌楼-冬日清晨"></p>
<h2 id="工具技巧"><a href="#工具技巧" class="headerlink" title="工具技巧"></a>工具技巧</h2><ul>
<li><p><a href="https://www.haproxy.com/blog/dynamic-configuration-haproxy-runtime-api/" target="_blank" rel="external">Dynamic Configuration with the HAProxy Runtime API</a> : 介绍了<code>HAProxy</code>的动态configure功能，其可以通过一个<code>socat</code>的命令行工具进行交互, 感觉这个设计对于nginx也很有借鉴意义，先mark</p>
</li>
<li><p><a href="https://news.ycombinator.com/item?id=15845114" target="_blank" rel="external">Evolution of <img>: Gif without the GIF</a> : 先mark</p>
</li>
<li><p><a href="https://github.com/Microsoft/ProcDump-for-Linux" target="_blank" rel="external">Microsoft/ProcDump-for-Linux</a> : “ProcDump provides a convenient way for Linux developers to create core dumps of their application based on performance triggers”</p>
</li>
<li><p><a href="https://blog.cloudflare.com/arm-takes-wing/" target="_blank" rel="external">ARM Takes Wing: Qualcomm vs. Intel CPU comparison</a> : 本文具体对比了intel和高通的CPU在服务器市场的性能情况，文章具体分析了在<code>openssl</code>, <code>zlib</code>, <code>go</code>语言, <code>nginx</code>等，在以C语言为基础的组件里面intel的cpu在单核上面优势都比较明显，但是整体的性能(28核vs48核)会弱一些，而go语言arm的处理器没有太多优势; 整体来看, arm后续的服务器的处理器还是很有竞争力的</p>
</li>
</ul>
<h2 id="每周paper"><a href="#每周paper" class="headerlink" title="每周paper"></a>每周paper</h2><ul>
<li><p><a href="https://machinelearning.apple.com/docs/learning-with-privacy-at-scale/appledifferentialprivacysystem.pdf" target="_blank" rel="external">Learning with Privacy at Scale</a> : 苹果介绍了其差分隐私(Differential Privacy)的实践和经验，略长，先mark</p>
</li>
<li><p><a href="https://blog.acolyer.org/2017/11/28/popularity-predictions-of-facebook-videos-for-higher-quality-streaming/" target="_blank" rel="external">Popularity predictions of Facebook videos for higher quality streaming</a> : 预判一些内容的流行度/热点有时候非常有用，比如说视频转H265对CPU等成本非常高, 所以我们如果能够正确预估哪些视频会是热点，并且提前压缩，对带宽和cpu等资源的利用率会有质的提升，具体的预估算法不是特别理解，反正是又引入了一个简单的神经网络模型进行训练，下来可以细看下</p>
</li>
</ul>
<h2 id="系统设计"><a href="#系统设计" class="headerlink" title="系统设计"></a>系统设计</h2><ul>
<li><p><a href="https://blog.cloudflare.com/make-ssl-boring-again/" target="_blank" rel="external">Make SSL boring again</a> : CloudFlare的分享文章，介绍其引入google的开源<a href="https://boringssl.googlesource.com/boringssl/" target="_blank" rel="external">BoringSSL</a>的历程以及收获, 除了对TLS1.3更好的支持以外，还包括<code>private key callback</code>, <code>equal-preference cipher grouping</code>等特性，对于大规模的SSL部署，非常有裨益</p>
</li>
<li><p><a href="https://www.nginx.com/blog/optimizing-web-servers-for-high-throughput-and-low-latency/" target="_blank" rel="external">Optimizing Web Servers for High Throughput and Low Latency</a> : 对于实现一个高性能web server的建议, 从硬件CPU的选择到上层lib库和nginx配置的控制, 讲得非常细，非常系统, 对里面一些优化的理解可以加深对nginx/linux系统的理解，建议多多review</p>
</li>
<li><p><a href="https://mp.weixin.qq.com/s/sDRftJL1xNBR6tQB7S4SIA" target="_blank" rel="external">Aurora Serveless的红与黑</a> : <code>Aurora Serveless</code>是AWS新推出的无服务,类似于mysql的存储解决方案，现在还不大清楚里面的一些实现细节，但是其设计抽象理念值得关注</p>
</li>
</ul>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><ul>
<li><p><a href="https://www.gatesnotes.com/About-Bill-Gates/Best-Books-2017" target="_blank" rel="external">5 amazing books I read this year</a> :  Bill Gates推荐2017的几本书，包括<code>The Rise of ISIS by</code>, <code>Turtles All the Way Down</code>, <code>The Color of Law</code> 等, 以上几本书亚马逊基本都有售，可以考虑入手</p>
</li>
<li><p><a href="http://www.visualcapitalist.com/histomap/" target="_blank" rel="external">Histomap: Visualizing the 4,000 Year History of Global Power</a> : 通过可视化的方式展现近4000年历史上各个权利的迭代更替</p>
</li>
<li><p><a href="https://www.feistyduck.com/books/openssl-cookbook/" target="_blank" rel="external">OpenSSL Cookbook</a> : 非常好的关于openssl的工具和实践书籍，对此有兴趣的可以深入看看</p>
</li>
<li><p><a href="https://blog.cloudflare.com/randomness-101-lavarand-in-production/" target="_blank" rel="external">Randomness 101: LavaRand in Production</a> : CloudFlare通过摄像头采集<code>LavaRand</code>的信息，来作为加密随机数的输入变量</p>
</li>
</ul>

      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/weekly/">weekly</a></li></ul>

      </footer>
    
  </div>
  
</article>








    
      <article id="post-20171126" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/12/05/20171126/">weekly of 20171126</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2017/12/05/20171126/" class="article-date">
  <time datetime="2017-12-05T03:39:45.000Z" itemprop="datePublished">2017-12-05</time>
</a>
      
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><img src="/images/shanghai01.jpg" alt="上海外滩"></p>
<h2 id="工具技巧"><a href="#工具技巧" class="headerlink" title="工具技巧"></a>工具技巧</h2><ul>
<li><p><a href="https://aws.amazon.com/cn/blogs/opensource/better-random-number-generation-for-openssl-libc-and-linux-mainline/" target="_blank" rel="external">Better Random Number Generation for OpenSSL, libc, and Linux Mainline</a> : AWS构建了自己的ssl库(<a href="https://aws.amazon.com/cn/blogs/security/introducing-s2n-a-new-open-source-tls-implementation/" target="_blank" rel="external">s2c</a>), 其在随机数生成里面考虑了具体在linux系统下面实线的一个问题，比如fork子进程的时候会完全拷贝内存，导致信息泄露, 引入了在madvise的新的option(<code>MADV_DONTFORK</code>)；还是非常佩服这些公司，能够持续的在这些基础技术上面做投入</p>
</li>
<li><p><a href="https://draveness.me/docker" target="_blank" rel="external">Docker 核心技术与实现原理</a> :  非常不错的docker技术的普及和介绍</p>
</li>
<li><p><a href="https://www.opengarden.com/meshkit.html" target="_blank" rel="external">MeshKit: Mesh networking made easy</a> : 可以支持各设备以<code>P2P</code>的方式交互, 类似于PC上面的P2P，个人觉得随着视频等富媒体的增长，此方向是一个不错的技术选择，但是需要考虑和权衡对用户体验/隐私等方面的保护</p>
</li>
<li><p><a href="https://zhuanlan.zhihu.com/p/31630417" target="_blank" rel="external">拒绝超大coredump - 用backtrace和addr2line搞定异常函数栈</a> : 思路可以总结为自己捕捉段错误的信息, 然后通过<code>backtrace</code>和<code>addr2line</code>打印相应的堆栈信息</p>
</li>
<li><p><a href="http://www.commandlinefu.com/commands/browse/sort-by-votes" target="_blank" rel="external">Commandlinefu</a> : 不少命令还挺有用的，关注<code>curl ifconfig.me</code>, <code>dig +short txt &lt;keyword&gt;.wp.dg.cx</code></p>
</li>
<li><p><a href="https://hackernoon.com/how-ive-captured-all-passwords-trying-to-ssh-into-my-server-d26a2a6263ec" target="_blank" rel="external">How I’ve captured all passwords trying to ssh into my server!</a> : 挺有意思的一个研究, 作者通过重编译<code>openssh</code>使得其可以打印出来登录的用户名和密码, 再基于这些数据做研究，可以发现很多攻击者和登陆者的特征</p>
</li>
</ul>
<h2 id="每周paper"><a href="#每周paper" class="headerlink" title="每周paper"></a>每周paper</h2><h2 id="系统设计"><a href="#系统设计" class="headerlink" title="系统设计"></a>系统设计</h2><ul>
<li><p><a href="https://code.facebook.com/posts/190251048047090/myrocks-a-space-and-write-optimized-mysql-database/" target="_blank" rel="external">MyRocks: A space- and write-optimized MySQL database</a> : <code>MyRocks</code>是基于<code>RocksDB</code>封装的mysql存储引擎,  对存储空间和写优化上面做了大幅的提升, 可以了解下，另外也可以参看<a href="https://code.facebook.com/posts/1478526992216557/migrating-a-database-from-innodb-to-myrocks/" target="_blank" rel="external">Migrating a database from InnoDB to MyRocks</a> 了解他们迁移到Innodb的具体过程</p>
</li>
<li><p><a href="https://weibo.com/ttarticle/p/show?id=2309404179898175459305" target="_blank" rel="external">企业大规模部署机器学习模型的困境</a> : 通过类似于<code>FAAS</code>的方式，提供人工智能相关的服务，可以让其他更多专注于策略的迭代和开发</p>
</li>
</ul>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><ul>
<li><p><a href="https://developers.googleblog.com/2017/09/introducing-tensorflow-datasets.html" target="_blank" rel="external">Introduction to TensorFlow Datasets and Estimators</a> : 关于tensorflow的教程，先收藏mark</p>
</li>
<li><p><a href="https://leastauthority.com/blog/mixnet-intro/" target="_blank" rel="external">Introduction to Mix Networks and Anonymous Communication Networks</a> : 对于混杂网络和匿名通信的系统性介绍, 简单扫了一眼，感觉是非常系统性的文章，先收藏mark</p>
</li>
<li><p><a href="https://cs007.blog/" target="_blank" rel="external">Stanford CS007: Personal Finance For Engineers</a> : 斯坦福的教程，一些对于工程师财务管理的建议和指导，现在的材料多为PPT, 先mark收藏</p>
</li>
<li><p><a href="https://weibo.com/ttarticle/p/show?id=2309404179321597125139" target="_blank" rel="external">【深度长文】为什么微博不像微信一样设计得简洁？</a> : 对产品的思考和分析</p>
</li>
<li><p><a href="https://rafalcieslak.wordpress.com/2013/04/02/dynamic-linker-tricks-using-ld_preload-to-cheat-inject-features-and-investigate-programs/" target="_blank" rel="external">Dynamic linker tricks: Using LD_PRELOAD to cheat, inject features and investigate programs</a> : 我们知道系统在搜索动态链接库的时候会优先加载<code>LD_PRELOAD</code>里面的so, 通过着特性，如果我们构造合适威胁的so，可能对程序的行为有着重大影响，比如随机数生成等</p>
</li>
</ul>

      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/weekly/">weekly</a></li></ul>

      </footer>
    
  </div>
  
</article>








    
      <nav id="page-nav">
        <a class="extend prev" rel="prev" href="/">&laquo; 上一页</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/">14</a><a class="extend next" rel="next" href="/page/3/">下一页 &raquo;</a>
      </nav>
    </section>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 shevacjs&nbsp;
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>, theme by <a href="http://github.com/ppoffice">PPOffice</a>
    </div>
  </div>
</footer>
    
<script>
  var disqus_shortname = 'shevacjs-com';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="/js/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>
  </div><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
</body>
</html>